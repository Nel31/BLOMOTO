function _f(e,r){for(var t=0;t<r.length;t++){const n=r[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(n,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function Ga(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tu={exports:{}},Ps={},ou={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sn=Symbol.for("react.element"),Rf=Symbol.for("react.portal"),Pf=Symbol.for("react.fragment"),Af=Symbol.for("react.strict_mode"),Lf=Symbol.for("react.profiler"),Tf=Symbol.for("react.provider"),If=Symbol.for("react.context"),Of=Symbol.for("react.forward_ref"),Df=Symbol.for("react.suspense"),zf=Symbol.for("react.memo"),Mf=Symbol.for("react.lazy"),ac=Symbol.iterator;function Ff(e){return e===null||typeof e!="object"?null:(e=ac&&e[ac]||e["@@iterator"],typeof e=="function"?e:null)}var nu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},su=Object.assign,lu={};function so(e,r,t){this.props=e,this.context=r,this.refs=lu,this.updater=t||nu}so.prototype.isReactComponent={};so.prototype.setState=function(e,r){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,r,"setState")};so.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function au(){}au.prototype=so.prototype;function Qa(e,r,t){this.props=e,this.context=r,this.refs=lu,this.updater=t||nu}var Ka=Qa.prototype=new au;Ka.constructor=Qa;su(Ka,so.prototype);Ka.isPureReactComponent=!0;var ic=Array.isArray,iu=Object.prototype.hasOwnProperty,Ja={current:null},cu={key:!0,ref:!0,__self:!0,__source:!0};function du(e,r,t){var n,s={},l=null,a=null;if(r!=null)for(n in r.ref!==void 0&&(a=r.ref),r.key!==void 0&&(l=""+r.key),r)iu.call(r,n)&&!cu.hasOwnProperty(n)&&(s[n]=r[n]);var c=arguments.length-2;if(c===1)s.children=t;else if(1<c){for(var i=Array(c),d=0;d<c;d++)i[d]=arguments[d+2];s.children=i}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)s[n]===void 0&&(s[n]=c[n]);return{$$typeof:sn,type:e,key:l,ref:a,props:s,_owner:Ja.current}}function Bf(e,r){return{$$typeof:sn,type:e.type,key:r,ref:e.ref,props:e.props,_owner:e._owner}}function Xa(e){return typeof e=="object"&&e!==null&&e.$$typeof===sn}function Uf(e){var r={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(t){return r[t]})}var cc=/\/+/g;function nl(e,r){return typeof e=="object"&&e!==null&&e.key!=null?Uf(""+e.key):r.toString(36)}function Mn(e,r,t,n,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case sn:case Rf:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+nl(a,0):n,ic(s)?(t="",e!=null&&(t=e.replace(cc,"$&/")+"/"),Mn(s,r,t,"",function(d){return d})):s!=null&&(Xa(s)&&(s=Bf(s,t+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(cc,"$&/")+"/")+e)),r.push(s)),1;if(a=0,n=n===""?".":n+":",ic(e))for(var c=0;c<e.length;c++){l=e[c];var i=n+nl(l,c);a+=Mn(l,r,t,i,s)}else if(i=Ff(e),typeof i=="function")for(e=i.call(e),c=0;!(l=e.next()).done;)l=l.value,i=n+nl(l,c++),a+=Mn(l,r,t,i,s);else if(l==="object")throw r=String(e),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return a}function pn(e,r,t){if(e==null)return e;var n=[],s=0;return Mn(e,n,"","",function(l){return r.call(t,l,s++)}),n}function $f(e){if(e._status===-1){var r=e._result;r=r(),r.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=r)}if(e._status===1)return e._result.default;throw e._result}var Fe={current:null},Fn={transition:null},Vf={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:Fn,ReactCurrentOwner:Ja};function uu(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:pn,forEach:function(e,r,t){pn(e,function(){r.apply(this,arguments)},t)},count:function(e){var r=0;return pn(e,function(){r++}),r},toArray:function(e){return pn(e,function(r){return r})||[]},only:function(e){if(!Xa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ee.Component=so;ee.Fragment=Pf;ee.Profiler=Lf;ee.PureComponent=Qa;ee.StrictMode=Af;ee.Suspense=Df;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vf;ee.act=uu;ee.cloneElement=function(e,r,t){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=su({},e.props),s=e.key,l=e.ref,a=e._owner;if(r!=null){if(r.ref!==void 0&&(l=r.ref,a=Ja.current),r.key!==void 0&&(s=""+r.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(i in r)iu.call(r,i)&&!cu.hasOwnProperty(i)&&(n[i]=r[i]===void 0&&c!==void 0?c[i]:r[i])}var i=arguments.length-2;if(i===1)n.children=t;else if(1<i){c=Array(i);for(var d=0;d<i;d++)c[d]=arguments[d+2];n.children=c}return{$$typeof:sn,type:e.type,key:s,ref:l,props:n,_owner:a}};ee.createContext=function(e){return e={$$typeof:If,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Tf,_context:e},e.Consumer=e};ee.createElement=du;ee.createFactory=function(e){var r=du.bind(null,e);return r.type=e,r};ee.createRef=function(){return{current:null}};ee.forwardRef=function(e){return{$$typeof:Of,render:e}};ee.isValidElement=Xa;ee.lazy=function(e){return{$$typeof:Mf,_payload:{_status:-1,_result:e},_init:$f}};ee.memo=function(e,r){return{$$typeof:zf,type:e,compare:r===void 0?null:r}};ee.startTransition=function(e){var r=Fn.transition;Fn.transition={};try{e()}finally{Fn.transition=r}};ee.unstable_act=uu;ee.useCallback=function(e,r){return Fe.current.useCallback(e,r)};ee.useContext=function(e){return Fe.current.useContext(e)};ee.useDebugValue=function(){};ee.useDeferredValue=function(e){return Fe.current.useDeferredValue(e)};ee.useEffect=function(e,r){return Fe.current.useEffect(e,r)};ee.useId=function(){return Fe.current.useId()};ee.useImperativeHandle=function(e,r,t){return Fe.current.useImperativeHandle(e,r,t)};ee.useInsertionEffect=function(e,r){return Fe.current.useInsertionEffect(e,r)};ee.useLayoutEffect=function(e,r){return Fe.current.useLayoutEffect(e,r)};ee.useMemo=function(e,r){return Fe.current.useMemo(e,r)};ee.useReducer=function(e,r,t){return Fe.current.useReducer(e,r,t)};ee.useRef=function(e){return Fe.current.useRef(e)};ee.useState=function(e){return Fe.current.useState(e)};ee.useSyncExternalStore=function(e,r,t){return Fe.current.useSyncExternalStore(e,r,t)};ee.useTransition=function(){return Fe.current.useTransition()};ee.version="18.3.1";ou.exports=ee;var b=ou.exports;const ne=Ga(b),Wf=_f({__proto__:null,default:ne},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hf=b,qf=Symbol.for("react.element"),Gf=Symbol.for("react.fragment"),Qf=Object.prototype.hasOwnProperty,Kf=Hf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jf={key:!0,ref:!0,__self:!0,__source:!0};function hu(e,r,t){var n,s={},l=null,a=null;t!==void 0&&(l=""+t),r.key!==void 0&&(l=""+r.key),r.ref!==void 0&&(a=r.ref);for(n in r)Qf.call(r,n)&&!Jf.hasOwnProperty(n)&&(s[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps,r)s[n]===void 0&&(s[n]=r[n]);return{$$typeof:qf,type:e,key:l,ref:a,props:s,_owner:Kf.current}}Ps.Fragment=Gf;Ps.jsx=hu;Ps.jsxs=hu;tu.exports=Ps;var o=tu.exports,Ml={},mu={exports:{}},tr={},fu={exports:{}},pu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function r(S,N){var I=S.length;S.push(N);e:for(;0<I;){var v=I-1>>>1,A=S[v];if(0<s(A,N))S[v]=N,S[I]=A,I=v;else break e}}function t(S){return S.length===0?null:S[0]}function n(S){if(S.length===0)return null;var N=S[0],I=S.pop();if(I!==N){S[0]=I;e:for(var v=0,A=S.length,U=A>>>1;v<U;){var _=2*(v+1)-1,M=S[_],q=_+1,Q=S[q];if(0>s(M,I))q<A&&0>s(Q,M)?(S[v]=Q,S[q]=I,v=q):(S[v]=M,S[_]=I,v=_);else if(q<A&&0>s(Q,I))S[v]=Q,S[q]=I,v=q;else break e}}return N}function s(S,N){var I=S.sortIndex-N.sortIndex;return I!==0?I:S.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,c=a.now();e.unstable_now=function(){return a.now()-c}}var i=[],d=[],u=1,m=null,f=3,j=!1,w=!1,h=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(S){for(var N=t(d);N!==null;){if(N.callback===null)n(d);else if(N.startTime<=S)n(d),N.sortIndex=N.expirationTime,r(i,N);else break;N=t(d)}}function k(S){if(h=!1,x(S),!w)if(t(i)!==null)w=!0,G(C);else{var N=t(d);N!==null&&F(k,N.startTime-S)}}function C(S,N){w=!1,h&&(h=!1,g(L),L=-1),j=!0;var I=f;try{for(x(N),m=t(i);m!==null&&(!(m.expirationTime>N)||S&&!X());){var v=m.callback;if(typeof v=="function"){m.callback=null,f=m.priorityLevel;var A=v(m.expirationTime<=N);N=e.unstable_now(),typeof A=="function"?m.callback=A:m===t(i)&&n(i),x(N)}else n(i);m=t(i)}if(m!==null)var U=!0;else{var _=t(d);_!==null&&F(k,_.startTime-N),U=!1}return U}finally{m=null,f=I,j=!1}}var E=!1,P=null,L=-1,H=5,B=-1;function X(){return!(e.unstable_now()-B<H)}function D(){if(P!==null){var S=e.unstable_now();B=S;var N=!0;try{N=P(!0,S)}finally{N?R():(E=!1,P=null)}}else E=!1}var R;if(typeof p=="function")R=function(){p(D)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,O=V.port2;V.port1.onmessage=D,R=function(){O.postMessage(null)}}else R=function(){y(D,0)};function G(S){P=S,E||(E=!0,R())}function F(S,N){L=y(function(){S(e.unstable_now())},N)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(S){S.callback=null},e.unstable_continueExecution=function(){w||j||(w=!0,G(C))},e.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<S?Math.floor(1e3/S):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return t(i)},e.unstable_next=function(S){switch(f){case 1:case 2:case 3:var N=3;break;default:N=f}var I=f;f=N;try{return S()}finally{f=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(S,N){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var I=f;f=S;try{return N()}finally{f=I}},e.unstable_scheduleCallback=function(S,N,I){var v=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?v+I:v):I=v,S){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=I+A,S={id:u++,callback:N,priorityLevel:S,startTime:I,expirationTime:A,sortIndex:-1},I>v?(S.sortIndex=I,r(d,S),t(i)===null&&S===t(d)&&(h?(g(L),L=-1):h=!0,F(k,I-v))):(S.sortIndex=A,r(i,S),w||j||(w=!0,G(C))),S},e.unstable_shouldYield=X,e.unstable_wrapCallback=function(S){var N=f;return function(){var I=f;f=N;try{return S.apply(this,arguments)}finally{f=I}}}})(pu);fu.exports=pu;var Xf=fu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yf=b,rr=Xf;function $(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)r+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vu=new Set,Bo={};function _t(e,r){Kt(e,r),Kt(e+"Capture",r)}function Kt(e,r){for(Bo[e]=r,e=0;e<r.length;e++)vu.add(r[e])}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fl=Object.prototype.hasOwnProperty,Zf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dc={},uc={};function ep(e){return Fl.call(uc,e)?!0:Fl.call(dc,e)?!1:Zf.test(e)?uc[e]=!0:(dc[e]=!0,!1)}function rp(e,r,t,n){if(t!==null&&t.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function tp(e,r,t,n){if(r===null||typeof r>"u"||rp(e,r,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Be(e,r,t,n,s,l,a){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=e,this.type=r,this.sanitizeURL=l,this.removeEmptyString=a}var _e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_e[e]=new Be(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];_e[r]=new Be(r,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){_e[e]=new Be(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_e[e]=new Be(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_e[e]=new Be(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){_e[e]=new Be(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){_e[e]=new Be(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){_e[e]=new Be(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){_e[e]=new Be(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ya=/[\-:]([a-z])/g;function Za(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(Ya,Za);_e[r]=new Be(r,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(Ya,Za);_e[r]=new Be(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(Ya,Za);_e[r]=new Be(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){_e[e]=new Be(e,1,!1,e.toLowerCase(),null,!1,!1)});_e.xlinkHref=new Be("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){_e[e]=new Be(e,1,!1,e.toLowerCase(),null,!0,!0)});function ei(e,r,t,n){var s=_e.hasOwnProperty(r)?_e[r]:null;(s!==null?s.type!==0:n||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(tp(r,t,s,n)&&(t=null),n||s===null?ep(r)&&(t===null?e.removeAttribute(r):e.setAttribute(r,""+t)):s.mustUseProperty?e[s.propertyName]=t===null?s.type===3?!1:"":t:(r=s.attributeName,n=s.attributeNamespace,t===null?e.removeAttribute(r):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,n?e.setAttributeNS(n,r,t):e.setAttribute(r,t))))}var Br=Yf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vn=Symbol.for("react.element"),At=Symbol.for("react.portal"),Lt=Symbol.for("react.fragment"),ri=Symbol.for("react.strict_mode"),Bl=Symbol.for("react.profiler"),xu=Symbol.for("react.provider"),gu=Symbol.for("react.context"),ti=Symbol.for("react.forward_ref"),Ul=Symbol.for("react.suspense"),$l=Symbol.for("react.suspense_list"),oi=Symbol.for("react.memo"),$r=Symbol.for("react.lazy"),yu=Symbol.for("react.offscreen"),hc=Symbol.iterator;function fo(e){return e===null||typeof e!="object"?null:(e=hc&&e[hc]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Object.assign,sl;function So(e){if(sl===void 0)try{throw Error()}catch(t){var r=t.stack.trim().match(/\n( *(at )?)/);sl=r&&r[1]||""}return`
`+sl+e}var ll=!1;function al(e,r){if(!e||ll)return"";ll=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(d){var n=d}Reflect.construct(e,[],r)}else{try{r.call()}catch(d){n=d}e.call(r.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),l=n.stack.split(`
`),a=s.length-1,c=l.length-1;1<=a&&0<=c&&s[a]!==l[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==l[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==l[c]){var i=`
`+s[a].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}while(1<=a&&0<=c);break}}}finally{ll=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?So(e):""}function op(e){switch(e.tag){case 5:return So(e.type);case 16:return So("Lazy");case 13:return So("Suspense");case 19:return So("SuspenseList");case 0:case 2:case 15:return e=al(e.type,!1),e;case 11:return e=al(e.type.render,!1),e;case 1:return e=al(e.type,!0),e;default:return""}}function Vl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Lt:return"Fragment";case At:return"Portal";case Bl:return"Profiler";case ri:return"StrictMode";case Ul:return"Suspense";case $l:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gu:return(e.displayName||"Context")+".Consumer";case xu:return(e._context.displayName||"Context")+".Provider";case ti:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case oi:return r=e.displayName||null,r!==null?r:Vl(e.type)||"Memo";case $r:r=e._payload,e=e._init;try{return Vl(e(r))}catch{}}return null}function np(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vl(r);case 8:return r===ri?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function lt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bu(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function sp(e){var r=bu(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),n=""+e[r];if(!e.hasOwnProperty(r)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,l=t.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,l.call(this,a)}}),Object.defineProperty(e,r,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function xn(e){e._valueTracker||(e._valueTracker=sp(e))}function wu(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var t=r.getValue(),n="";return e&&(n=bu(e)?e.checked?"true":"false":e.value),e=n,e!==t?(r.setValue(e),!0):!1}function ns(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Wl(e,r){var t=r.checked;return fe({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??e._wrapperState.initialChecked})}function mc(e,r){var t=r.defaultValue==null?"":r.defaultValue,n=r.checked!=null?r.checked:r.defaultChecked;t=lt(r.value!=null?r.value:t),e._wrapperState={initialChecked:n,initialValue:t,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function ju(e,r){r=r.checked,r!=null&&ei(e,"checked",r,!1)}function Hl(e,r){ju(e,r);var t=lt(r.value),n=r.type;if(t!=null)n==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?ql(e,r.type,t):r.hasOwnProperty("defaultValue")&&ql(e,r.type,lt(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function fc(e,r,t){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var n=r.type;if(!(n!=="submit"&&n!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,t||r===e.value||(e.value=r),e.defaultValue=r}t=e.name,t!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,t!==""&&(e.name=t)}function ql(e,r,t){(r!=="number"||ns(e.ownerDocument)!==e)&&(t==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var Eo=Array.isArray;function Vt(e,r,t,n){if(e=e.options,r){r={};for(var s=0;s<t.length;s++)r["$"+t[s]]=!0;for(t=0;t<e.length;t++)s=r.hasOwnProperty("$"+e[t].value),e[t].selected!==s&&(e[t].selected=s),s&&n&&(e[t].defaultSelected=!0)}else{for(t=""+lt(t),r=null,s=0;s<e.length;s++){if(e[s].value===t){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}r!==null||e[s].disabled||(r=e[s])}r!==null&&(r.selected=!0)}}function Gl(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error($(91));return fe({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pc(e,r){var t=r.value;if(t==null){if(t=r.children,r=r.defaultValue,t!=null){if(r!=null)throw Error($(92));if(Eo(t)){if(1<t.length)throw Error($(93));t=t[0]}r=t}r==null&&(r=""),t=r}e._wrapperState={initialValue:lt(t)}}function Nu(e,r){var t=lt(r.value),n=lt(r.defaultValue);t!=null&&(t=""+t,t!==e.value&&(e.value=t),r.defaultValue==null&&e.defaultValue!==t&&(e.defaultValue=t)),n!=null&&(e.defaultValue=""+n)}function vc(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function Cu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ql(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?Cu(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var gn,ku=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,t,n,s){MSApp.execUnsafeLocalFunction(function(){return e(r,t,n,s)})}:e}(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(gn=gn||document.createElement("div"),gn.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=gn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function Uo(e,r){if(r){var t=e.firstChild;if(t&&t===e.lastChild&&t.nodeType===3){t.nodeValue=r;return}}e.textContent=r}var Ao={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lp=["Webkit","ms","Moz","O"];Object.keys(Ao).forEach(function(e){lp.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),Ao[r]=Ao[e]})});function Su(e,r,t){return r==null||typeof r=="boolean"||r===""?"":t||typeof r!="number"||r===0||Ao.hasOwnProperty(e)&&Ao[e]?(""+r).trim():r+"px"}function Eu(e,r){e=e.style;for(var t in r)if(r.hasOwnProperty(t)){var n=t.indexOf("--")===0,s=Su(t,r[t],n);t==="float"&&(t="cssFloat"),n?e.setProperty(t,s):e[t]=s}}var ap=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kl(e,r){if(r){if(ap[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error($(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error($(61))}if(r.style!=null&&typeof r.style!="object")throw Error($(62))}}function Jl(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xl=null;function ni(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yl=null,Wt=null,Ht=null;function xc(e){if(e=cn(e)){if(typeof Yl!="function")throw Error($(280));var r=e.stateNode;r&&(r=Os(r),Yl(e.stateNode,e.type,r))}}function _u(e){Wt?Ht?Ht.push(e):Ht=[e]:Wt=e}function Ru(){if(Wt){var e=Wt,r=Ht;if(Ht=Wt=null,xc(e),r)for(e=0;e<r.length;e++)xc(r[e])}}function Pu(e,r){return e(r)}function Au(){}var il=!1;function Lu(e,r,t){if(il)return e(r,t);il=!0;try{return Pu(e,r,t)}finally{il=!1,(Wt!==null||Ht!==null)&&(Au(),Ru())}}function $o(e,r){var t=e.stateNode;if(t===null)return null;var n=Os(t);if(n===null)return null;t=n[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(t&&typeof t!="function")throw Error($(231,r,typeof t));return t}var Zl=!1;if(Dr)try{var po={};Object.defineProperty(po,"passive",{get:function(){Zl=!0}}),window.addEventListener("test",po,po),window.removeEventListener("test",po,po)}catch{Zl=!1}function ip(e,r,t,n,s,l,a,c,i){var d=Array.prototype.slice.call(arguments,3);try{r.apply(t,d)}catch(u){this.onError(u)}}var Lo=!1,ss=null,ls=!1,ea=null,cp={onError:function(e){Lo=!0,ss=e}};function dp(e,r,t,n,s,l,a,c,i){Lo=!1,ss=null,ip.apply(cp,arguments)}function up(e,r,t,n,s,l,a,c,i){if(dp.apply(this,arguments),Lo){if(Lo){var d=ss;Lo=!1,ss=null}else throw Error($(198));ls||(ls=!0,ea=d)}}function Rt(e){var r=e,t=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,r.flags&4098&&(t=r.return),e=r.return;while(e)}return r.tag===3?t:null}function Tu(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function gc(e){if(Rt(e)!==e)throw Error($(188))}function hp(e){var r=e.alternate;if(!r){if(r=Rt(e),r===null)throw Error($(188));return r!==e?null:e}for(var t=e,n=r;;){var s=t.return;if(s===null)break;var l=s.alternate;if(l===null){if(n=s.return,n!==null){t=n;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===t)return gc(s),e;if(l===n)return gc(s),r;l=l.sibling}throw Error($(188))}if(t.return!==n.return)t=s,n=l;else{for(var a=!1,c=s.child;c;){if(c===t){a=!0,t=s,n=l;break}if(c===n){a=!0,n=s,t=l;break}c=c.sibling}if(!a){for(c=l.child;c;){if(c===t){a=!0,t=l,n=s;break}if(c===n){a=!0,n=l,t=s;break}c=c.sibling}if(!a)throw Error($(189))}}if(t.alternate!==n)throw Error($(190))}if(t.tag!==3)throw Error($(188));return t.stateNode.current===t?e:r}function Iu(e){return e=hp(e),e!==null?Ou(e):null}function Ou(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=Ou(e);if(r!==null)return r;e=e.sibling}return null}var Du=rr.unstable_scheduleCallback,yc=rr.unstable_cancelCallback,mp=rr.unstable_shouldYield,fp=rr.unstable_requestPaint,ve=rr.unstable_now,pp=rr.unstable_getCurrentPriorityLevel,si=rr.unstable_ImmediatePriority,zu=rr.unstable_UserBlockingPriority,as=rr.unstable_NormalPriority,vp=rr.unstable_LowPriority,Mu=rr.unstable_IdlePriority,As=null,Sr=null;function xp(e){if(Sr&&typeof Sr.onCommitFiberRoot=="function")try{Sr.onCommitFiberRoot(As,e,void 0,(e.current.flags&128)===128)}catch{}}var gr=Math.clz32?Math.clz32:bp,gp=Math.log,yp=Math.LN2;function bp(e){return e>>>=0,e===0?32:31-(gp(e)/yp|0)|0}var yn=64,bn=4194304;function _o(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function is(e,r){var t=e.pendingLanes;if(t===0)return 0;var n=0,s=e.suspendedLanes,l=e.pingedLanes,a=t&268435455;if(a!==0){var c=a&~s;c!==0?n=_o(c):(l&=a,l!==0&&(n=_o(l)))}else a=t&~s,a!==0?n=_o(a):l!==0&&(n=_o(l));if(n===0)return 0;if(r!==0&&r!==n&&!(r&s)&&(s=n&-n,l=r&-r,s>=l||s===16&&(l&4194240)!==0))return r;if(n&4&&(n|=t&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=n;0<r;)t=31-gr(r),s=1<<t,n|=e[t],r&=~s;return n}function wp(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jp(e,r){for(var t=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-gr(l),c=1<<a,i=s[a];i===-1?(!(c&t)||c&n)&&(s[a]=wp(c,r)):i<=r&&(e.expiredLanes|=c),l&=~c}}function ra(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Fu(){var e=yn;return yn<<=1,!(yn&4194240)&&(yn=64),e}function cl(e){for(var r=[],t=0;31>t;t++)r.push(e);return r}function ln(e,r,t){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-gr(r),e[r]=t}function Np(e,r){var t=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<t;){var s=31-gr(t),l=1<<s;r[s]=0,n[s]=-1,e[s]=-1,t&=~l}}function li(e,r){var t=e.entangledLanes|=r;for(e=e.entanglements;t;){var n=31-gr(t),s=1<<n;s&r|e[n]&r&&(e[n]|=r),t&=~s}}var se=0;function Bu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Uu,ai,$u,Vu,Wu,ta=!1,wn=[],Kr=null,Jr=null,Xr=null,Vo=new Map,Wo=new Map,Wr=[],Cp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bc(e,r){switch(e){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":Vo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wo.delete(r.pointerId)}}function vo(e,r,t,n,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:r,domEventName:t,eventSystemFlags:n,nativeEvent:l,targetContainers:[s]},r!==null&&(r=cn(r),r!==null&&ai(r)),e):(e.eventSystemFlags|=n,r=e.targetContainers,s!==null&&r.indexOf(s)===-1&&r.push(s),e)}function kp(e,r,t,n,s){switch(r){case"focusin":return Kr=vo(Kr,e,r,t,n,s),!0;case"dragenter":return Jr=vo(Jr,e,r,t,n,s),!0;case"mouseover":return Xr=vo(Xr,e,r,t,n,s),!0;case"pointerover":var l=s.pointerId;return Vo.set(l,vo(Vo.get(l)||null,e,r,t,n,s)),!0;case"gotpointercapture":return l=s.pointerId,Wo.set(l,vo(Wo.get(l)||null,e,r,t,n,s)),!0}return!1}function Hu(e){var r=pt(e.target);if(r!==null){var t=Rt(r);if(t!==null){if(r=t.tag,r===13){if(r=Tu(t),r!==null){e.blockedOn=r,Wu(e.priority,function(){$u(t)});return}}else if(r===3&&t.stateNode.current.memoizedState.isDehydrated){e.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bn(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var t=oa(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(t===null){t=e.nativeEvent;var n=new t.constructor(t.type,t);Xl=n,t.target.dispatchEvent(n),Xl=null}else return r=cn(t),r!==null&&ai(r),e.blockedOn=t,!1;r.shift()}return!0}function wc(e,r,t){Bn(e)&&t.delete(r)}function Sp(){ta=!1,Kr!==null&&Bn(Kr)&&(Kr=null),Jr!==null&&Bn(Jr)&&(Jr=null),Xr!==null&&Bn(Xr)&&(Xr=null),Vo.forEach(wc),Wo.forEach(wc)}function xo(e,r){e.blockedOn===r&&(e.blockedOn=null,ta||(ta=!0,rr.unstable_scheduleCallback(rr.unstable_NormalPriority,Sp)))}function Ho(e){function r(s){return xo(s,e)}if(0<wn.length){xo(wn[0],e);for(var t=1;t<wn.length;t++){var n=wn[t];n.blockedOn===e&&(n.blockedOn=null)}}for(Kr!==null&&xo(Kr,e),Jr!==null&&xo(Jr,e),Xr!==null&&xo(Xr,e),Vo.forEach(r),Wo.forEach(r),t=0;t<Wr.length;t++)n=Wr[t],n.blockedOn===e&&(n.blockedOn=null);for(;0<Wr.length&&(t=Wr[0],t.blockedOn===null);)Hu(t),t.blockedOn===null&&Wr.shift()}var qt=Br.ReactCurrentBatchConfig,cs=!0;function Ep(e,r,t,n){var s=se,l=qt.transition;qt.transition=null;try{se=1,ii(e,r,t,n)}finally{se=s,qt.transition=l}}function _p(e,r,t,n){var s=se,l=qt.transition;qt.transition=null;try{se=4,ii(e,r,t,n)}finally{se=s,qt.transition=l}}function ii(e,r,t,n){if(cs){var s=oa(e,r,t,n);if(s===null)yl(e,r,n,ds,t),bc(e,n);else if(kp(s,e,r,t,n))n.stopPropagation();else if(bc(e,n),r&4&&-1<Cp.indexOf(e)){for(;s!==null;){var l=cn(s);if(l!==null&&Uu(l),l=oa(e,r,t,n),l===null&&yl(e,r,n,ds,t),l===s)break;s=l}s!==null&&n.stopPropagation()}else yl(e,r,n,null,t)}}var ds=null;function oa(e,r,t,n){if(ds=null,e=ni(n),e=pt(e),e!==null)if(r=Rt(e),r===null)e=null;else if(t=r.tag,t===13){if(e=Tu(r),e!==null)return e;e=null}else if(t===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return ds=e,null}function qu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pp()){case si:return 1;case zu:return 4;case as:case vp:return 16;case Mu:return 536870912;default:return 16}default:return 16}}var qr=null,ci=null,Un=null;function Gu(){if(Un)return Un;var e,r=ci,t=r.length,n,s="value"in qr?qr.value:qr.textContent,l=s.length;for(e=0;e<t&&r[e]===s[e];e++);var a=t-e;for(n=1;n<=a&&r[t-n]===s[l-n];n++);return Un=s.slice(e,1<n?1-n:void 0)}function $n(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function jn(){return!0}function jc(){return!1}function or(e){function r(t,n,s,l,a){this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(t=e[c],this[c]=t?t(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?jn:jc,this.isPropagationStopped=jc,this}return fe(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=jn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=jn)},persist:function(){},isPersistent:jn}),r}var lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},di=or(lo),an=fe({},lo,{view:0,detail:0}),Rp=or(an),dl,ul,go,Ls=fe({},an,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ui,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==go&&(go&&e.type==="mousemove"?(dl=e.screenX-go.screenX,ul=e.screenY-go.screenY):ul=dl=0,go=e),dl)},movementY:function(e){return"movementY"in e?e.movementY:ul}}),Nc=or(Ls),Pp=fe({},Ls,{dataTransfer:0}),Ap=or(Pp),Lp=fe({},an,{relatedTarget:0}),hl=or(Lp),Tp=fe({},lo,{animationName:0,elapsedTime:0,pseudoElement:0}),Ip=or(Tp),Op=fe({},lo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dp=or(Op),zp=fe({},lo,{data:0}),Cc=or(zp),Mp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Up(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=Bp[e])?!!r[e]:!1}function ui(){return Up}var $p=fe({},an,{key:function(e){if(e.key){var r=Mp[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=$n(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ui,charCode:function(e){return e.type==="keypress"?$n(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$n(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Vp=or($p),Wp=fe({},Ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kc=or(Wp),Hp=fe({},an,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ui}),qp=or(Hp),Gp=fe({},lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qp=or(Gp),Kp=fe({},Ls,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Jp=or(Kp),Xp=[9,13,27,32],hi=Dr&&"CompositionEvent"in window,To=null;Dr&&"documentMode"in document&&(To=document.documentMode);var Yp=Dr&&"TextEvent"in window&&!To,Qu=Dr&&(!hi||To&&8<To&&11>=To),Sc=" ",Ec=!1;function Ku(e,r){switch(e){case"keyup":return Xp.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ju(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tt=!1;function Zp(e,r){switch(e){case"compositionend":return Ju(r);case"keypress":return r.which!==32?null:(Ec=!0,Sc);case"textInput":return e=r.data,e===Sc&&Ec?null:e;default:return null}}function e0(e,r){if(Tt)return e==="compositionend"||!hi&&Ku(e,r)?(e=Gu(),Un=ci=qr=null,Tt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Qu&&r.locale!=="ko"?null:r.data;default:return null}}var r0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _c(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!r0[e.type]:r==="textarea"}function Xu(e,r,t,n){_u(n),r=us(r,"onChange"),0<r.length&&(t=new di("onChange","change",null,t,n),e.push({event:t,listeners:r}))}var Io=null,qo=null;function t0(e){ih(e,0)}function Ts(e){var r=Dt(e);if(wu(r))return e}function o0(e,r){if(e==="change")return r}var Yu=!1;if(Dr){var ml;if(Dr){var fl="oninput"in document;if(!fl){var Rc=document.createElement("div");Rc.setAttribute("oninput","return;"),fl=typeof Rc.oninput=="function"}ml=fl}else ml=!1;Yu=ml&&(!document.documentMode||9<document.documentMode)}function Pc(){Io&&(Io.detachEvent("onpropertychange",Zu),qo=Io=null)}function Zu(e){if(e.propertyName==="value"&&Ts(qo)){var r=[];Xu(r,qo,e,ni(e)),Lu(t0,r)}}function n0(e,r,t){e==="focusin"?(Pc(),Io=r,qo=t,Io.attachEvent("onpropertychange",Zu)):e==="focusout"&&Pc()}function s0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ts(qo)}function l0(e,r){if(e==="click")return Ts(r)}function a0(e,r){if(e==="input"||e==="change")return Ts(r)}function i0(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var br=typeof Object.is=="function"?Object.is:i0;function Go(e,r){if(br(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var s=t[n];if(!Fl.call(r,s)||!br(e[s],r[s]))return!1}return!0}function Ac(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lc(e,r){var t=Ac(e);e=0;for(var n;t;){if(t.nodeType===3){if(n=e+t.textContent.length,e<=r&&n>=r)return{node:t,offset:r-e};e=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Ac(t)}}function eh(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?eh(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function rh(){for(var e=window,r=ns();r instanceof e.HTMLIFrameElement;){try{var t=typeof r.contentWindow.location.href=="string"}catch{t=!1}if(t)e=r.contentWindow;else break;r=ns(e.document)}return r}function mi(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function c0(e){var r=rh(),t=e.focusedElem,n=e.selectionRange;if(r!==t&&t&&t.ownerDocument&&eh(t.ownerDocument.documentElement,t)){if(n!==null&&mi(t)){if(r=n.start,e=n.end,e===void 0&&(e=r),"selectionStart"in t)t.selectionStart=r,t.selectionEnd=Math.min(e,t.value.length);else if(e=(r=t.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var s=t.textContent.length,l=Math.min(n.start,s);n=n.end===void 0?l:Math.min(n.end,s),!e.extend&&l>n&&(s=n,n=l,l=s),s=Lc(t,l);var a=Lc(t,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(r=r.createRange(),r.setStart(s.node,s.offset),e.removeAllRanges(),l>n?(e.addRange(r),e.extend(a.node,a.offset)):(r.setEnd(a.node,a.offset),e.addRange(r)))}}for(r=[],e=t;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<r.length;t++)e=r[t],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var d0=Dr&&"documentMode"in document&&11>=document.documentMode,It=null,na=null,Oo=null,sa=!1;function Tc(e,r,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;sa||It==null||It!==ns(n)||(n=It,"selectionStart"in n&&mi(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Oo&&Go(Oo,n)||(Oo=n,n=us(na,"onSelect"),0<n.length&&(r=new di("onSelect","select",null,r,t),e.push({event:r,listeners:n}),r.target=It)))}function Nn(e,r){var t={};return t[e.toLowerCase()]=r.toLowerCase(),t["Webkit"+e]="webkit"+r,t["Moz"+e]="moz"+r,t}var Ot={animationend:Nn("Animation","AnimationEnd"),animationiteration:Nn("Animation","AnimationIteration"),animationstart:Nn("Animation","AnimationStart"),transitionend:Nn("Transition","TransitionEnd")},pl={},th={};Dr&&(th=document.createElement("div").style,"AnimationEvent"in window||(delete Ot.animationend.animation,delete Ot.animationiteration.animation,delete Ot.animationstart.animation),"TransitionEvent"in window||delete Ot.transitionend.transition);function Is(e){if(pl[e])return pl[e];if(!Ot[e])return e;var r=Ot[e],t;for(t in r)if(r.hasOwnProperty(t)&&t in th)return pl[e]=r[t];return e}var oh=Is("animationend"),nh=Is("animationiteration"),sh=Is("animationstart"),lh=Is("transitionend"),ah=new Map,Ic="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function it(e,r){ah.set(e,r),_t(r,[e])}for(var vl=0;vl<Ic.length;vl++){var xl=Ic[vl],u0=xl.toLowerCase(),h0=xl[0].toUpperCase()+xl.slice(1);it(u0,"on"+h0)}it(oh,"onAnimationEnd");it(nh,"onAnimationIteration");it(sh,"onAnimationStart");it("dblclick","onDoubleClick");it("focusin","onFocus");it("focusout","onBlur");it(lh,"onTransitionEnd");Kt("onMouseEnter",["mouseout","mouseover"]);Kt("onMouseLeave",["mouseout","mouseover"]);Kt("onPointerEnter",["pointerout","pointerover"]);Kt("onPointerLeave",["pointerout","pointerover"]);_t("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_t("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_t("onBeforeInput",["compositionend","keypress","textInput","paste"]);_t("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_t("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_t("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ro));function Oc(e,r,t){var n=e.type||"unknown-event";e.currentTarget=t,up(n,r,void 0,e),e.currentTarget=null}function ih(e,r){r=(r&4)!==0;for(var t=0;t<e.length;t++){var n=e[t],s=n.event;n=n.listeners;e:{var l=void 0;if(r)for(var a=n.length-1;0<=a;a--){var c=n[a],i=c.instance,d=c.currentTarget;if(c=c.listener,i!==l&&s.isPropagationStopped())break e;Oc(s,c,d),l=i}else for(a=0;a<n.length;a++){if(c=n[a],i=c.instance,d=c.currentTarget,c=c.listener,i!==l&&s.isPropagationStopped())break e;Oc(s,c,d),l=i}}}if(ls)throw e=ea,ls=!1,ea=null,e}function ie(e,r){var t=r[da];t===void 0&&(t=r[da]=new Set);var n=e+"__bubble";t.has(n)||(ch(r,e,2,!1),t.add(n))}function gl(e,r,t){var n=0;r&&(n|=4),ch(t,e,n,r)}var Cn="_reactListening"+Math.random().toString(36).slice(2);function Qo(e){if(!e[Cn]){e[Cn]=!0,vu.forEach(function(t){t!=="selectionchange"&&(m0.has(t)||gl(t,!1,e),gl(t,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[Cn]||(r[Cn]=!0,gl("selectionchange",!1,r))}}function ch(e,r,t,n){switch(qu(r)){case 1:var s=Ep;break;case 4:s=_p;break;default:s=ii}t=s.bind(null,r,t,e),s=void 0,!Zl||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(r,t,{capture:!0,passive:s}):e.addEventListener(r,t,!0):s!==void 0?e.addEventListener(r,t,{passive:s}):e.addEventListener(r,t,!1)}function yl(e,r,t,n,s){var l=n;if(!(r&1)&&!(r&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var c=n.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var i=a.tag;if((i===3||i===4)&&(i=a.stateNode.containerInfo,i===s||i.nodeType===8&&i.parentNode===s))return;a=a.return}for(;c!==null;){if(a=pt(c),a===null)return;if(i=a.tag,i===5||i===6){n=l=a;continue e}c=c.parentNode}}n=n.return}Lu(function(){var d=l,u=ni(t),m=[];e:{var f=ah.get(e);if(f!==void 0){var j=di,w=e;switch(e){case"keypress":if($n(t)===0)break e;case"keydown":case"keyup":j=Vp;break;case"focusin":w="focus",j=hl;break;case"focusout":w="blur",j=hl;break;case"beforeblur":case"afterblur":j=hl;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Ap;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=qp;break;case oh:case nh:case sh:j=Ip;break;case lh:j=Qp;break;case"scroll":j=Rp;break;case"wheel":j=Jp;break;case"copy":case"cut":case"paste":j=Dp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=kc}var h=(r&4)!==0,y=!h&&e==="scroll",g=h?f!==null?f+"Capture":null:f;h=[];for(var p=d,x;p!==null;){x=p;var k=x.stateNode;if(x.tag===5&&k!==null&&(x=k,g!==null&&(k=$o(p,g),k!=null&&h.push(Ko(p,k,x)))),y)break;p=p.return}0<h.length&&(f=new j(f,w,null,t,u),m.push({event:f,listeners:h}))}}if(!(r&7)){e:{if(f=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",f&&t!==Xl&&(w=t.relatedTarget||t.fromElement)&&(pt(w)||w[zr]))break e;if((j||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,j?(w=t.relatedTarget||t.toElement,j=d,w=w?pt(w):null,w!==null&&(y=Rt(w),w!==y||w.tag!==5&&w.tag!==6)&&(w=null)):(j=null,w=d),j!==w)){if(h=Nc,k="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(h=kc,k="onPointerLeave",g="onPointerEnter",p="pointer"),y=j==null?f:Dt(j),x=w==null?f:Dt(w),f=new h(k,p+"leave",j,t,u),f.target=y,f.relatedTarget=x,k=null,pt(u)===d&&(h=new h(g,p+"enter",w,t,u),h.target=x,h.relatedTarget=y,k=h),y=k,j&&w)r:{for(h=j,g=w,p=0,x=h;x;x=Pt(x))p++;for(x=0,k=g;k;k=Pt(k))x++;for(;0<p-x;)h=Pt(h),p--;for(;0<x-p;)g=Pt(g),x--;for(;p--;){if(h===g||g!==null&&h===g.alternate)break r;h=Pt(h),g=Pt(g)}h=null}else h=null;j!==null&&Dc(m,f,j,h,!1),w!==null&&y!==null&&Dc(m,y,w,h,!0)}}e:{if(f=d?Dt(d):window,j=f.nodeName&&f.nodeName.toLowerCase(),j==="select"||j==="input"&&f.type==="file")var C=o0;else if(_c(f))if(Yu)C=a0;else{C=s0;var E=n0}else(j=f.nodeName)&&j.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=l0);if(C&&(C=C(e,d))){Xu(m,C,t,u);break e}E&&E(e,f,d),e==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&ql(f,"number",f.value)}switch(E=d?Dt(d):window,e){case"focusin":(_c(E)||E.contentEditable==="true")&&(It=E,na=d,Oo=null);break;case"focusout":Oo=na=It=null;break;case"mousedown":sa=!0;break;case"contextmenu":case"mouseup":case"dragend":sa=!1,Tc(m,t,u);break;case"selectionchange":if(d0)break;case"keydown":case"keyup":Tc(m,t,u)}var P;if(hi)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Tt?Ku(e,t)&&(L="onCompositionEnd"):e==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(Qu&&t.locale!=="ko"&&(Tt||L!=="onCompositionStart"?L==="onCompositionEnd"&&Tt&&(P=Gu()):(qr=u,ci="value"in qr?qr.value:qr.textContent,Tt=!0)),E=us(d,L),0<E.length&&(L=new Cc(L,e,null,t,u),m.push({event:L,listeners:E}),P?L.data=P:(P=Ju(t),P!==null&&(L.data=P)))),(P=Yp?Zp(e,t):e0(e,t))&&(d=us(d,"onBeforeInput"),0<d.length&&(u=new Cc("onBeforeInput","beforeinput",null,t,u),m.push({event:u,listeners:d}),u.data=P))}ih(m,r)})}function Ko(e,r,t){return{instance:e,listener:r,currentTarget:t}}function us(e,r){for(var t=r+"Capture",n=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=$o(e,t),l!=null&&n.unshift(Ko(e,l,s)),l=$o(e,r),l!=null&&n.push(Ko(e,l,s))),e=e.return}return n}function Pt(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Dc(e,r,t,n,s){for(var l=r._reactName,a=[];t!==null&&t!==n;){var c=t,i=c.alternate,d=c.stateNode;if(i!==null&&i===n)break;c.tag===5&&d!==null&&(c=d,s?(i=$o(t,l),i!=null&&a.unshift(Ko(t,i,c))):s||(i=$o(t,l),i!=null&&a.push(Ko(t,i,c)))),t=t.return}a.length!==0&&e.push({event:r,listeners:a})}var f0=/\r\n?/g,p0=/\u0000|\uFFFD/g;function zc(e){return(typeof e=="string"?e:""+e).replace(f0,`
`).replace(p0,"")}function kn(e,r,t){if(r=zc(r),zc(e)!==r&&t)throw Error($(425))}function hs(){}var la=null,aa=null;function ia(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ca=typeof setTimeout=="function"?setTimeout:void 0,v0=typeof clearTimeout=="function"?clearTimeout:void 0,Mc=typeof Promise=="function"?Promise:void 0,x0=typeof queueMicrotask=="function"?queueMicrotask:typeof Mc<"u"?function(e){return Mc.resolve(null).then(e).catch(g0)}:ca;function g0(e){setTimeout(function(){throw e})}function bl(e,r){var t=r,n=0;do{var s=t.nextSibling;if(e.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(n===0){e.removeChild(s),Ho(r);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=s}while(t);Ho(r)}function Yr(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function Fc(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var t=e.data;if(t==="$"||t==="$!"||t==="$?"){if(r===0)return e;r--}else t==="/$"&&r++}e=e.previousSibling}return null}var ao=Math.random().toString(36).slice(2),kr="__reactFiber$"+ao,Jo="__reactProps$"+ao,zr="__reactContainer$"+ao,da="__reactEvents$"+ao,y0="__reactListeners$"+ao,b0="__reactHandles$"+ao;function pt(e){var r=e[kr];if(r)return r;for(var t=e.parentNode;t;){if(r=t[zr]||t[kr]){if(t=r.alternate,r.child!==null||t!==null&&t.child!==null)for(e=Fc(e);e!==null;){if(t=e[kr])return t;e=Fc(e)}return r}e=t,t=e.parentNode}return null}function cn(e){return e=e[kr]||e[zr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Dt(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function Os(e){return e[Jo]||null}var ua=[],zt=-1;function ct(e){return{current:e}}function ce(e){0>zt||(e.current=ua[zt],ua[zt]=null,zt--)}function ae(e,r){zt++,ua[zt]=e.current,e.current=r}var at={},Te=ct(at),Ve=ct(!1),jt=at;function Jt(e,r){var t=e.type.contextTypes;if(!t)return at;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===r)return n.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in t)s[l]=r[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),s}function We(e){return e=e.childContextTypes,e!=null}function ms(){ce(Ve),ce(Te)}function Bc(e,r,t){if(Te.current!==at)throw Error($(168));ae(Te,r),ae(Ve,t)}function dh(e,r,t){var n=e.stateNode;if(r=r.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var s in n)if(!(s in r))throw Error($(108,np(e)||"Unknown",s));return fe({},t,n)}function fs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||at,jt=Te.current,ae(Te,e),ae(Ve,Ve.current),!0}function Uc(e,r,t){var n=e.stateNode;if(!n)throw Error($(169));t?(e=dh(e,r,jt),n.__reactInternalMemoizedMergedChildContext=e,ce(Ve),ce(Te),ae(Te,e)):ce(Ve),ae(Ve,t)}var Lr=null,Ds=!1,wl=!1;function uh(e){Lr===null?Lr=[e]:Lr.push(e)}function w0(e){Ds=!0,uh(e)}function dt(){if(!wl&&Lr!==null){wl=!0;var e=0,r=se;try{var t=Lr;for(se=1;e<t.length;e++){var n=t[e];do n=n(!0);while(n!==null)}Lr=null,Ds=!1}catch(s){throw Lr!==null&&(Lr=Lr.slice(e+1)),Du(si,dt),s}finally{se=r,wl=!1}}return null}var Mt=[],Ft=0,ps=null,vs=0,lr=[],ar=0,Nt=null,Tr=1,Ir="";function mt(e,r){Mt[Ft++]=vs,Mt[Ft++]=ps,ps=e,vs=r}function hh(e,r,t){lr[ar++]=Tr,lr[ar++]=Ir,lr[ar++]=Nt,Nt=e;var n=Tr;e=Ir;var s=32-gr(n)-1;n&=~(1<<s),t+=1;var l=32-gr(r)+s;if(30<l){var a=s-s%5;l=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Tr=1<<32-gr(r)+s|t<<s|n,Ir=l+e}else Tr=1<<l|t<<s|n,Ir=e}function fi(e){e.return!==null&&(mt(e,1),hh(e,1,0))}function pi(e){for(;e===ps;)ps=Mt[--Ft],Mt[Ft]=null,vs=Mt[--Ft],Mt[Ft]=null;for(;e===Nt;)Nt=lr[--ar],lr[ar]=null,Ir=lr[--ar],lr[ar]=null,Tr=lr[--ar],lr[ar]=null}var er=null,Ze=null,de=!1,xr=null;function mh(e,r){var t=cr(5,null,null,0);t.elementType="DELETED",t.stateNode=r,t.return=e,r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)}function $c(e,r){switch(e.tag){case 5:var t=e.type;return r=r.nodeType!==1||t.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,er=e,Ze=Yr(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,er=e,Ze=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(t=Nt!==null?{id:Tr,overflow:Ir}:null,e.memoizedState={dehydrated:r,treeContext:t,retryLane:1073741824},t=cr(18,null,null,0),t.stateNode=r,t.return=e,e.child=t,er=e,Ze=null,!0):!1;default:return!1}}function ha(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ma(e){if(de){var r=Ze;if(r){var t=r;if(!$c(e,r)){if(ha(e))throw Error($(418));r=Yr(t.nextSibling);var n=er;r&&$c(e,r)?mh(n,t):(e.flags=e.flags&-4097|2,de=!1,er=e)}}else{if(ha(e))throw Error($(418));e.flags=e.flags&-4097|2,de=!1,er=e}}}function Vc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;er=e}function Sn(e){if(e!==er)return!1;if(!de)return Vc(e),de=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!ia(e.type,e.memoizedProps)),r&&(r=Ze)){if(ha(e))throw fh(),Error($(418));for(;r;)mh(e,r),r=Yr(r.nextSibling)}if(Vc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var t=e.data;if(t==="/$"){if(r===0){Ze=Yr(e.nextSibling);break e}r--}else t!=="$"&&t!=="$!"&&t!=="$?"||r++}e=e.nextSibling}Ze=null}}else Ze=er?Yr(e.stateNode.nextSibling):null;return!0}function fh(){for(var e=Ze;e;)e=Yr(e.nextSibling)}function Xt(){Ze=er=null,de=!1}function vi(e){xr===null?xr=[e]:xr.push(e)}var j0=Br.ReactCurrentBatchConfig;function yo(e,r,t){if(e=t.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error($(309));var n=t.stateNode}if(!n)throw Error($(147,e));var s=n,l=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===l?r.ref:(r=function(a){var c=s.refs;a===null?delete c[l]:c[l]=a},r._stringRef=l,r)}if(typeof e!="string")throw Error($(284));if(!t._owner)throw Error($(290,e))}return e}function En(e,r){throw e=Object.prototype.toString.call(r),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function Wc(e){var r=e._init;return r(e._payload)}function ph(e){function r(g,p){if(e){var x=g.deletions;x===null?(g.deletions=[p],g.flags|=16):x.push(p)}}function t(g,p){if(!e)return null;for(;p!==null;)r(g,p),p=p.sibling;return null}function n(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=tt(g,p),g.index=0,g.sibling=null,g}function l(g,p,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<p?(g.flags|=2,p):x):(g.flags|=2,p)):(g.flags|=1048576,p)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function c(g,p,x,k){return p===null||p.tag!==6?(p=_l(x,g.mode,k),p.return=g,p):(p=s(p,x),p.return=g,p)}function i(g,p,x,k){var C=x.type;return C===Lt?u(g,p,x.props.children,k,x.key):p!==null&&(p.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===$r&&Wc(C)===p.type)?(k=s(p,x.props),k.ref=yo(g,p,x),k.return=g,k):(k=Kn(x.type,x.key,x.props,null,g.mode,k),k.ref=yo(g,p,x),k.return=g,k)}function d(g,p,x,k){return p===null||p.tag!==4||p.stateNode.containerInfo!==x.containerInfo||p.stateNode.implementation!==x.implementation?(p=Rl(x,g.mode,k),p.return=g,p):(p=s(p,x.children||[]),p.return=g,p)}function u(g,p,x,k,C){return p===null||p.tag!==7?(p=bt(x,g.mode,k,C),p.return=g,p):(p=s(p,x),p.return=g,p)}function m(g,p,x){if(typeof p=="string"&&p!==""||typeof p=="number")return p=_l(""+p,g.mode,x),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case vn:return x=Kn(p.type,p.key,p.props,null,g.mode,x),x.ref=yo(g,null,p),x.return=g,x;case At:return p=Rl(p,g.mode,x),p.return=g,p;case $r:var k=p._init;return m(g,k(p._payload),x)}if(Eo(p)||fo(p))return p=bt(p,g.mode,x,null),p.return=g,p;En(g,p)}return null}function f(g,p,x,k){var C=p!==null?p.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return C!==null?null:c(g,p,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case vn:return x.key===C?i(g,p,x,k):null;case At:return x.key===C?d(g,p,x,k):null;case $r:return C=x._init,f(g,p,C(x._payload),k)}if(Eo(x)||fo(x))return C!==null?null:u(g,p,x,k,null);En(g,x)}return null}function j(g,p,x,k,C){if(typeof k=="string"&&k!==""||typeof k=="number")return g=g.get(x)||null,c(p,g,""+k,C);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case vn:return g=g.get(k.key===null?x:k.key)||null,i(p,g,k,C);case At:return g=g.get(k.key===null?x:k.key)||null,d(p,g,k,C);case $r:var E=k._init;return j(g,p,x,E(k._payload),C)}if(Eo(k)||fo(k))return g=g.get(x)||null,u(p,g,k,C,null);En(p,k)}return null}function w(g,p,x,k){for(var C=null,E=null,P=p,L=p=0,H=null;P!==null&&L<x.length;L++){P.index>L?(H=P,P=null):H=P.sibling;var B=f(g,P,x[L],k);if(B===null){P===null&&(P=H);break}e&&P&&B.alternate===null&&r(g,P),p=l(B,p,L),E===null?C=B:E.sibling=B,E=B,P=H}if(L===x.length)return t(g,P),de&&mt(g,L),C;if(P===null){for(;L<x.length;L++)P=m(g,x[L],k),P!==null&&(p=l(P,p,L),E===null?C=P:E.sibling=P,E=P);return de&&mt(g,L),C}for(P=n(g,P);L<x.length;L++)H=j(P,g,L,x[L],k),H!==null&&(e&&H.alternate!==null&&P.delete(H.key===null?L:H.key),p=l(H,p,L),E===null?C=H:E.sibling=H,E=H);return e&&P.forEach(function(X){return r(g,X)}),de&&mt(g,L),C}function h(g,p,x,k){var C=fo(x);if(typeof C!="function")throw Error($(150));if(x=C.call(x),x==null)throw Error($(151));for(var E=C=null,P=p,L=p=0,H=null,B=x.next();P!==null&&!B.done;L++,B=x.next()){P.index>L?(H=P,P=null):H=P.sibling;var X=f(g,P,B.value,k);if(X===null){P===null&&(P=H);break}e&&P&&X.alternate===null&&r(g,P),p=l(X,p,L),E===null?C=X:E.sibling=X,E=X,P=H}if(B.done)return t(g,P),de&&mt(g,L),C;if(P===null){for(;!B.done;L++,B=x.next())B=m(g,B.value,k),B!==null&&(p=l(B,p,L),E===null?C=B:E.sibling=B,E=B);return de&&mt(g,L),C}for(P=n(g,P);!B.done;L++,B=x.next())B=j(P,g,L,B.value,k),B!==null&&(e&&B.alternate!==null&&P.delete(B.key===null?L:B.key),p=l(B,p,L),E===null?C=B:E.sibling=B,E=B);return e&&P.forEach(function(D){return r(g,D)}),de&&mt(g,L),C}function y(g,p,x,k){if(typeof x=="object"&&x!==null&&x.type===Lt&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case vn:e:{for(var C=x.key,E=p;E!==null;){if(E.key===C){if(C=x.type,C===Lt){if(E.tag===7){t(g,E.sibling),p=s(E,x.props.children),p.return=g,g=p;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===$r&&Wc(C)===E.type){t(g,E.sibling),p=s(E,x.props),p.ref=yo(g,E,x),p.return=g,g=p;break e}t(g,E);break}else r(g,E);E=E.sibling}x.type===Lt?(p=bt(x.props.children,g.mode,k,x.key),p.return=g,g=p):(k=Kn(x.type,x.key,x.props,null,g.mode,k),k.ref=yo(g,p,x),k.return=g,g=k)}return a(g);case At:e:{for(E=x.key;p!==null;){if(p.key===E)if(p.tag===4&&p.stateNode.containerInfo===x.containerInfo&&p.stateNode.implementation===x.implementation){t(g,p.sibling),p=s(p,x.children||[]),p.return=g,g=p;break e}else{t(g,p);break}else r(g,p);p=p.sibling}p=Rl(x,g.mode,k),p.return=g,g=p}return a(g);case $r:return E=x._init,y(g,p,E(x._payload),k)}if(Eo(x))return w(g,p,x,k);if(fo(x))return h(g,p,x,k);En(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,p!==null&&p.tag===6?(t(g,p.sibling),p=s(p,x),p.return=g,g=p):(t(g,p),p=_l(x,g.mode,k),p.return=g,g=p),a(g)):t(g,p)}return y}var Yt=ph(!0),vh=ph(!1),xs=ct(null),gs=null,Bt=null,xi=null;function gi(){xi=Bt=gs=null}function yi(e){var r=xs.current;ce(xs),e._currentValue=r}function fa(e,r,t){for(;e!==null;){var n=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,n!==null&&(n.childLanes|=r)):n!==null&&(n.childLanes&r)!==r&&(n.childLanes|=r),e===t)break;e=e.return}}function Gt(e,r){gs=e,xi=Bt=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&r&&($e=!0),e.firstContext=null)}function ur(e){var r=e._currentValue;if(xi!==e)if(e={context:e,memoizedValue:r,next:null},Bt===null){if(gs===null)throw Error($(308));Bt=e,gs.dependencies={lanes:0,firstContext:e}}else Bt=Bt.next=e;return r}var vt=null;function bi(e){vt===null?vt=[e]:vt.push(e)}function xh(e,r,t,n){var s=r.interleaved;return s===null?(t.next=t,bi(r)):(t.next=s.next,s.next=t),r.interleaved=t,Mr(e,n)}function Mr(e,r){e.lanes|=r;var t=e.alternate;for(t!==null&&(t.lanes|=r),t=e,e=e.return;e!==null;)e.childLanes|=r,t=e.alternate,t!==null&&(t.childLanes|=r),t=e,e=e.return;return t.tag===3?t.stateNode:null}var Vr=!1;function wi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gh(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Or(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function Zr(e,r,t){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,oe&2){var s=n.pending;return s===null?r.next=r:(r.next=s.next,s.next=r),n.pending=r,Mr(e,t)}return s=n.interleaved,s===null?(r.next=r,bi(n)):(r.next=s.next,s.next=r),n.interleaved=r,Mr(e,t)}function Vn(e,r,t){if(r=r.updateQueue,r!==null&&(r=r.shared,(t&4194240)!==0)){var n=r.lanes;n&=e.pendingLanes,t|=n,r.lanes=t,li(e,t)}}function Hc(e,r){var t=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var s=null,l=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};l===null?s=l=a:l=l.next=a,t=t.next}while(t!==null);l===null?s=l=r:l=l.next=r}else s=l=r;t={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=t;return}e=t.lastBaseUpdate,e===null?t.firstBaseUpdate=r:e.next=r,t.lastBaseUpdate=r}function ys(e,r,t,n){var s=e.updateQueue;Vr=!1;var l=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var i=c,d=i.next;i.next=null,a===null?l=d:a.next=d,a=i;var u=e.alternate;u!==null&&(u=u.updateQueue,c=u.lastBaseUpdate,c!==a&&(c===null?u.firstBaseUpdate=d:c.next=d,u.lastBaseUpdate=i))}if(l!==null){var m=s.baseState;a=0,u=d=i=null,c=l;do{var f=c.lane,j=c.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:j,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var w=e,h=c;switch(f=r,j=t,h.tag){case 1:if(w=h.payload,typeof w=="function"){m=w.call(j,m,f);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=h.payload,f=typeof w=="function"?w.call(j,m,f):w,f==null)break e;m=fe({},m,f);break e;case 2:Vr=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[c]:f.push(c))}else j={eventTime:j,lane:f,tag:c.tag,payload:c.payload,callback:c.callback,next:null},u===null?(d=u=j,i=m):u=u.next=j,a|=f;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;f=c,c=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(i=m),s.baseState=i,s.firstBaseUpdate=d,s.lastBaseUpdate=u,r=s.shared.interleaved,r!==null){s=r;do a|=s.lane,s=s.next;while(s!==r)}else l===null&&(s.shared.lanes=0);kt|=a,e.lanes=a,e.memoizedState=m}}function qc(e,r,t){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var n=e[r],s=n.callback;if(s!==null){if(n.callback=null,n=t,typeof s!="function")throw Error($(191,s));s.call(n)}}}var dn={},Er=ct(dn),Xo=ct(dn),Yo=ct(dn);function xt(e){if(e===dn)throw Error($(174));return e}function ji(e,r){switch(ae(Yo,r),ae(Xo,e),ae(Er,dn),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Ql(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=Ql(r,e)}ce(Er),ae(Er,r)}function Zt(){ce(Er),ce(Xo),ce(Yo)}function yh(e){xt(Yo.current);var r=xt(Er.current),t=Ql(r,e.type);r!==t&&(ae(Xo,e),ae(Er,t))}function Ni(e){Xo.current===e&&(ce(Er),ce(Xo))}var he=ct(0);function bs(e){for(var r=e;r!==null;){if(r.tag===13){var t=r.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var jl=[];function Ci(){for(var e=0;e<jl.length;e++)jl[e]._workInProgressVersionPrimary=null;jl.length=0}var Wn=Br.ReactCurrentDispatcher,Nl=Br.ReactCurrentBatchConfig,Ct=0,me=null,je=null,Ce=null,ws=!1,Do=!1,Zo=0,N0=0;function Re(){throw Error($(321))}function ki(e,r){if(r===null)return!1;for(var t=0;t<r.length&&t<e.length;t++)if(!br(e[t],r[t]))return!1;return!0}function Si(e,r,t,n,s,l){if(Ct=l,me=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Wn.current=e===null||e.memoizedState===null?E0:_0,e=t(n,s),Do){l=0;do{if(Do=!1,Zo=0,25<=l)throw Error($(301));l+=1,Ce=je=null,r.updateQueue=null,Wn.current=R0,e=t(n,s)}while(Do)}if(Wn.current=js,r=je!==null&&je.next!==null,Ct=0,Ce=je=me=null,ws=!1,r)throw Error($(300));return e}function Ei(){var e=Zo!==0;return Zo=0,e}function Cr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?me.memoizedState=Ce=e:Ce=Ce.next=e,Ce}function hr(){if(je===null){var e=me.alternate;e=e!==null?e.memoizedState:null}else e=je.next;var r=Ce===null?me.memoizedState:Ce.next;if(r!==null)Ce=r,je=e;else{if(e===null)throw Error($(310));je=e,e={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},Ce===null?me.memoizedState=Ce=e:Ce=Ce.next=e}return Ce}function en(e,r){return typeof r=="function"?r(e):r}function Cl(e){var r=hr(),t=r.queue;if(t===null)throw Error($(311));t.lastRenderedReducer=e;var n=je,s=n.baseQueue,l=t.pending;if(l!==null){if(s!==null){var a=s.next;s.next=l.next,l.next=a}n.baseQueue=s=l,t.pending=null}if(s!==null){l=s.next,n=n.baseState;var c=a=null,i=null,d=l;do{var u=d.lane;if((Ct&u)===u)i!==null&&(i=i.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};i===null?(c=i=m,a=n):i=i.next=m,me.lanes|=u,kt|=u}d=d.next}while(d!==null&&d!==l);i===null?a=n:i.next=c,br(n,r.memoizedState)||($e=!0),r.memoizedState=n,r.baseState=a,r.baseQueue=i,t.lastRenderedState=n}if(e=t.interleaved,e!==null){s=e;do l=s.lane,me.lanes|=l,kt|=l,s=s.next;while(s!==e)}else s===null&&(t.lanes=0);return[r.memoizedState,t.dispatch]}function kl(e){var r=hr(),t=r.queue;if(t===null)throw Error($(311));t.lastRenderedReducer=e;var n=t.dispatch,s=t.pending,l=r.memoizedState;if(s!==null){t.pending=null;var a=s=s.next;do l=e(l,a.action),a=a.next;while(a!==s);br(l,r.memoizedState)||($e=!0),r.memoizedState=l,r.baseQueue===null&&(r.baseState=l),t.lastRenderedState=l}return[l,n]}function bh(){}function wh(e,r){var t=me,n=hr(),s=r(),l=!br(n.memoizedState,s);if(l&&(n.memoizedState=s,$e=!0),n=n.queue,_i(Ch.bind(null,t,n,e),[e]),n.getSnapshot!==r||l||Ce!==null&&Ce.memoizedState.tag&1){if(t.flags|=2048,rn(9,Nh.bind(null,t,n,s,r),void 0,null),ke===null)throw Error($(349));Ct&30||jh(t,r,s)}return s}function jh(e,r,t){e.flags|=16384,e={getSnapshot:r,value:t},r=me.updateQueue,r===null?(r={lastEffect:null,stores:null},me.updateQueue=r,r.stores=[e]):(t=r.stores,t===null?r.stores=[e]:t.push(e))}function Nh(e,r,t,n){r.value=t,r.getSnapshot=n,kh(r)&&Sh(e)}function Ch(e,r,t){return t(function(){kh(r)&&Sh(e)})}function kh(e){var r=e.getSnapshot;e=e.value;try{var t=r();return!br(e,t)}catch{return!0}}function Sh(e){var r=Mr(e,1);r!==null&&yr(r,e,1,-1)}function Gc(e){var r=Cr();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:en,lastRenderedState:e},r.queue=e,e=e.dispatch=S0.bind(null,me,e),[r.memoizedState,e]}function rn(e,r,t,n){return e={tag:e,create:r,destroy:t,deps:n,next:null},r=me.updateQueue,r===null?(r={lastEffect:null,stores:null},me.updateQueue=r,r.lastEffect=e.next=e):(t=r.lastEffect,t===null?r.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,r.lastEffect=e)),e}function Eh(){return hr().memoizedState}function Hn(e,r,t,n){var s=Cr();me.flags|=e,s.memoizedState=rn(1|r,t,void 0,n===void 0?null:n)}function zs(e,r,t,n){var s=hr();n=n===void 0?null:n;var l=void 0;if(je!==null){var a=je.memoizedState;if(l=a.destroy,n!==null&&ki(n,a.deps)){s.memoizedState=rn(r,t,l,n);return}}me.flags|=e,s.memoizedState=rn(1|r,t,l,n)}function Qc(e,r){return Hn(8390656,8,e,r)}function _i(e,r){return zs(2048,8,e,r)}function _h(e,r){return zs(4,2,e,r)}function Rh(e,r){return zs(4,4,e,r)}function Ph(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function Ah(e,r,t){return t=t!=null?t.concat([e]):null,zs(4,4,Ph.bind(null,r,e),t)}function Ri(){}function Lh(e,r){var t=hr();r=r===void 0?null:r;var n=t.memoizedState;return n!==null&&r!==null&&ki(r,n[1])?n[0]:(t.memoizedState=[e,r],e)}function Th(e,r){var t=hr();r=r===void 0?null:r;var n=t.memoizedState;return n!==null&&r!==null&&ki(r,n[1])?n[0]:(e=e(),t.memoizedState=[e,r],e)}function Ih(e,r,t){return Ct&21?(br(t,r)||(t=Fu(),me.lanes|=t,kt|=t,e.baseState=!0),r):(e.baseState&&(e.baseState=!1,$e=!0),e.memoizedState=t)}function C0(e,r){var t=se;se=t!==0&&4>t?t:4,e(!0);var n=Nl.transition;Nl.transition={};try{e(!1),r()}finally{se=t,Nl.transition=n}}function Oh(){return hr().memoizedState}function k0(e,r,t){var n=rt(e);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},Dh(e))zh(r,t);else if(t=xh(e,r,t,n),t!==null){var s=Me();yr(t,e,n,s),Mh(t,r,n)}}function S0(e,r,t){var n=rt(e),s={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(Dh(e))zh(r,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=r.lastRenderedReducer,l!==null))try{var a=r.lastRenderedState,c=l(a,t);if(s.hasEagerState=!0,s.eagerState=c,br(c,a)){var i=r.interleaved;i===null?(s.next=s,bi(r)):(s.next=i.next,i.next=s),r.interleaved=s;return}}catch{}finally{}t=xh(e,r,s,n),t!==null&&(s=Me(),yr(t,e,n,s),Mh(t,r,n))}}function Dh(e){var r=e.alternate;return e===me||r!==null&&r===me}function zh(e,r){Do=ws=!0;var t=e.pending;t===null?r.next=r:(r.next=t.next,t.next=r),e.pending=r}function Mh(e,r,t){if(t&4194240){var n=r.lanes;n&=e.pendingLanes,t|=n,r.lanes=t,li(e,t)}}var js={readContext:ur,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useInsertionEffect:Re,useLayoutEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useMutableSource:Re,useSyncExternalStore:Re,useId:Re,unstable_isNewReconciler:!1},E0={readContext:ur,useCallback:function(e,r){return Cr().memoizedState=[e,r===void 0?null:r],e},useContext:ur,useEffect:Qc,useImperativeHandle:function(e,r,t){return t=t!=null?t.concat([e]):null,Hn(4194308,4,Ph.bind(null,r,e),t)},useLayoutEffect:function(e,r){return Hn(4194308,4,e,r)},useInsertionEffect:function(e,r){return Hn(4,2,e,r)},useMemo:function(e,r){var t=Cr();return r=r===void 0?null:r,e=e(),t.memoizedState=[e,r],e},useReducer:function(e,r,t){var n=Cr();return r=t!==void 0?t(r):r,n.memoizedState=n.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},n.queue=e,e=e.dispatch=k0.bind(null,me,e),[n.memoizedState,e]},useRef:function(e){var r=Cr();return e={current:e},r.memoizedState=e},useState:Gc,useDebugValue:Ri,useDeferredValue:function(e){return Cr().memoizedState=e},useTransition:function(){var e=Gc(!1),r=e[0];return e=C0.bind(null,e[1]),Cr().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,t){var n=me,s=Cr();if(de){if(t===void 0)throw Error($(407));t=t()}else{if(t=r(),ke===null)throw Error($(349));Ct&30||jh(n,r,t)}s.memoizedState=t;var l={value:t,getSnapshot:r};return s.queue=l,Qc(Ch.bind(null,n,l,e),[e]),n.flags|=2048,rn(9,Nh.bind(null,n,l,t,r),void 0,null),t},useId:function(){var e=Cr(),r=ke.identifierPrefix;if(de){var t=Ir,n=Tr;t=(n&~(1<<32-gr(n)-1)).toString(32)+t,r=":"+r+"R"+t,t=Zo++,0<t&&(r+="H"+t.toString(32)),r+=":"}else t=N0++,r=":"+r+"r"+t.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},_0={readContext:ur,useCallback:Lh,useContext:ur,useEffect:_i,useImperativeHandle:Ah,useInsertionEffect:_h,useLayoutEffect:Rh,useMemo:Th,useReducer:Cl,useRef:Eh,useState:function(){return Cl(en)},useDebugValue:Ri,useDeferredValue:function(e){var r=hr();return Ih(r,je.memoizedState,e)},useTransition:function(){var e=Cl(en)[0],r=hr().memoizedState;return[e,r]},useMutableSource:bh,useSyncExternalStore:wh,useId:Oh,unstable_isNewReconciler:!1},R0={readContext:ur,useCallback:Lh,useContext:ur,useEffect:_i,useImperativeHandle:Ah,useInsertionEffect:_h,useLayoutEffect:Rh,useMemo:Th,useReducer:kl,useRef:Eh,useState:function(){return kl(en)},useDebugValue:Ri,useDeferredValue:function(e){var r=hr();return je===null?r.memoizedState=e:Ih(r,je.memoizedState,e)},useTransition:function(){var e=kl(en)[0],r=hr().memoizedState;return[e,r]},useMutableSource:bh,useSyncExternalStore:wh,useId:Oh,unstable_isNewReconciler:!1};function fr(e,r){if(e&&e.defaultProps){r=fe({},r),e=e.defaultProps;for(var t in e)r[t]===void 0&&(r[t]=e[t]);return r}return r}function pa(e,r,t,n){r=e.memoizedState,t=t(n,r),t=t==null?r:fe({},r,t),e.memoizedState=t,e.lanes===0&&(e.updateQueue.baseState=t)}var Ms={isMounted:function(e){return(e=e._reactInternals)?Rt(e)===e:!1},enqueueSetState:function(e,r,t){e=e._reactInternals;var n=Me(),s=rt(e),l=Or(n,s);l.payload=r,t!=null&&(l.callback=t),r=Zr(e,l,s),r!==null&&(yr(r,e,s,n),Vn(r,e,s))},enqueueReplaceState:function(e,r,t){e=e._reactInternals;var n=Me(),s=rt(e),l=Or(n,s);l.tag=1,l.payload=r,t!=null&&(l.callback=t),r=Zr(e,l,s),r!==null&&(yr(r,e,s,n),Vn(r,e,s))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var t=Me(),n=rt(e),s=Or(t,n);s.tag=2,r!=null&&(s.callback=r),r=Zr(e,s,n),r!==null&&(yr(r,e,n,t),Vn(r,e,n))}};function Kc(e,r,t,n,s,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,a):r.prototype&&r.prototype.isPureReactComponent?!Go(t,n)||!Go(s,l):!0}function Fh(e,r,t){var n=!1,s=at,l=r.contextType;return typeof l=="object"&&l!==null?l=ur(l):(s=We(r)?jt:Te.current,n=r.contextTypes,l=(n=n!=null)?Jt(e,s):at),r=new r(t,l),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Ms,e.stateNode=r,r._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),r}function Jc(e,r,t,n){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(t,n),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(t,n),r.state!==e&&Ms.enqueueReplaceState(r,r.state,null)}function va(e,r,t,n){var s=e.stateNode;s.props=t,s.state=e.memoizedState,s.refs={},wi(e);var l=r.contextType;typeof l=="object"&&l!==null?s.context=ur(l):(l=We(r)?jt:Te.current,s.context=Jt(e,l)),s.state=e.memoizedState,l=r.getDerivedStateFromProps,typeof l=="function"&&(pa(e,r,l,t),s.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(r=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),r!==s.state&&Ms.enqueueReplaceState(s,s.state,null),ys(e,t,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function eo(e,r){try{var t="",n=r;do t+=op(n),n=n.return;while(n);var s=t}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:r,stack:s,digest:null}}function Sl(e,r,t){return{value:e,source:null,stack:t??null,digest:r??null}}function xa(e,r){try{console.error(r.value)}catch(t){setTimeout(function(){throw t})}}var P0=typeof WeakMap=="function"?WeakMap:Map;function Bh(e,r,t){t=Or(-1,t),t.tag=3,t.payload={element:null};var n=r.value;return t.callback=function(){Cs||(Cs=!0,Ea=n),xa(e,r)},t}function Uh(e,r,t){t=Or(-1,t),t.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=r.value;t.payload=function(){return n(s)},t.callback=function(){xa(e,r)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(t.callback=function(){xa(e,r),typeof n!="function"&&(et===null?et=new Set([this]):et.add(this));var a=r.stack;this.componentDidCatch(r.value,{componentStack:a!==null?a:""})}),t}function Xc(e,r,t){var n=e.pingCache;if(n===null){n=e.pingCache=new P0;var s=new Set;n.set(r,s)}else s=n.get(r),s===void 0&&(s=new Set,n.set(r,s));s.has(t)||(s.add(t),e=W0.bind(null,e,r,t),r.then(e,e))}function Yc(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function Zc(e,r,t,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===r?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(r=Or(-1,1),r.tag=2,Zr(t,r,1))),t.lanes|=1),e)}var A0=Br.ReactCurrentOwner,$e=!1;function ze(e,r,t,n){r.child=e===null?vh(r,null,t,n):Yt(r,e.child,t,n)}function ed(e,r,t,n,s){t=t.render;var l=r.ref;return Gt(r,s),n=Si(e,r,t,n,l,s),t=Ei(),e!==null&&!$e?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~s,Fr(e,r,s)):(de&&t&&fi(r),r.flags|=1,ze(e,r,n,s),r.child)}function rd(e,r,t,n,s){if(e===null){var l=t.type;return typeof l=="function"&&!zi(l)&&l.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(r.tag=15,r.type=l,$h(e,r,l,n,s)):(e=Kn(t.type,null,n,r,r.mode,s),e.ref=r.ref,e.return=r,r.child=e)}if(l=e.child,!(e.lanes&s)){var a=l.memoizedProps;if(t=t.compare,t=t!==null?t:Go,t(a,n)&&e.ref===r.ref)return Fr(e,r,s)}return r.flags|=1,e=tt(l,n),e.ref=r.ref,e.return=r,r.child=e}function $h(e,r,t,n,s){if(e!==null){var l=e.memoizedProps;if(Go(l,n)&&e.ref===r.ref)if($e=!1,r.pendingProps=n=l,(e.lanes&s)!==0)e.flags&131072&&($e=!0);else return r.lanes=e.lanes,Fr(e,r,s)}return ga(e,r,t,n,s)}function Vh(e,r,t){var n=r.pendingProps,s=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae($t,Ye),Ye|=t;else{if(!(t&1073741824))return e=l!==null?l.baseLanes|t:t,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,ae($t,Ye),Ye|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:t,ae($t,Ye),Ye|=n}else l!==null?(n=l.baseLanes|t,r.memoizedState=null):n=t,ae($t,Ye),Ye|=n;return ze(e,r,s,t),r.child}function Wh(e,r){var t=r.ref;(e===null&&t!==null||e!==null&&e.ref!==t)&&(r.flags|=512,r.flags|=2097152)}function ga(e,r,t,n,s){var l=We(t)?jt:Te.current;return l=Jt(r,l),Gt(r,s),t=Si(e,r,t,n,l,s),n=Ei(),e!==null&&!$e?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~s,Fr(e,r,s)):(de&&n&&fi(r),r.flags|=1,ze(e,r,t,s),r.child)}function td(e,r,t,n,s){if(We(t)){var l=!0;fs(r)}else l=!1;if(Gt(r,s),r.stateNode===null)qn(e,r),Fh(r,t,n),va(r,t,n,s),n=!0;else if(e===null){var a=r.stateNode,c=r.memoizedProps;a.props=c;var i=a.context,d=t.contextType;typeof d=="object"&&d!==null?d=ur(d):(d=We(t)?jt:Te.current,d=Jt(r,d));var u=t.getDerivedStateFromProps,m=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==n||i!==d)&&Jc(r,a,n,d),Vr=!1;var f=r.memoizedState;a.state=f,ys(r,n,a,s),i=r.memoizedState,c!==n||f!==i||Ve.current||Vr?(typeof u=="function"&&(pa(r,t,u,n),i=r.memoizedState),(c=Vr||Kc(r,t,c,n,f,i,d))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(r.flags|=4194308)):(typeof a.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=n,r.memoizedState=i),a.props=n,a.state=i,a.context=d,n=c):(typeof a.componentDidMount=="function"&&(r.flags|=4194308),n=!1)}else{a=r.stateNode,gh(e,r),c=r.memoizedProps,d=r.type===r.elementType?c:fr(r.type,c),a.props=d,m=r.pendingProps,f=a.context,i=t.contextType,typeof i=="object"&&i!==null?i=ur(i):(i=We(t)?jt:Te.current,i=Jt(r,i));var j=t.getDerivedStateFromProps;(u=typeof j=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==m||f!==i)&&Jc(r,a,n,i),Vr=!1,f=r.memoizedState,a.state=f,ys(r,n,a,s);var w=r.memoizedState;c!==m||f!==w||Ve.current||Vr?(typeof j=="function"&&(pa(r,t,j,n),w=r.memoizedState),(d=Vr||Kc(r,t,d,n,f,w,i)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,w,i),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,w,i)),typeof a.componentDidUpdate=="function"&&(r.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(r.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(r.flags|=1024),r.memoizedProps=n,r.memoizedState=w),a.props=n,a.state=w,a.context=i,n=d):(typeof a.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(r.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(r.flags|=1024),n=!1)}return ya(e,r,t,n,l,s)}function ya(e,r,t,n,s,l){Wh(e,r);var a=(r.flags&128)!==0;if(!n&&!a)return s&&Uc(r,t,!1),Fr(e,r,l);n=r.stateNode,A0.current=r;var c=a&&typeof t.getDerivedStateFromError!="function"?null:n.render();return r.flags|=1,e!==null&&a?(r.child=Yt(r,e.child,null,l),r.child=Yt(r,null,c,l)):ze(e,r,c,l),r.memoizedState=n.state,s&&Uc(r,t,!0),r.child}function Hh(e){var r=e.stateNode;r.pendingContext?Bc(e,r.pendingContext,r.pendingContext!==r.context):r.context&&Bc(e,r.context,!1),ji(e,r.containerInfo)}function od(e,r,t,n,s){return Xt(),vi(s),r.flags|=256,ze(e,r,t,n),r.child}var ba={dehydrated:null,treeContext:null,retryLane:0};function wa(e){return{baseLanes:e,cachePool:null,transitions:null}}function qh(e,r,t){var n=r.pendingProps,s=he.current,l=!1,a=(r.flags&128)!==0,c;if((c=a)||(c=e!==null&&e.memoizedState===null?!1:(s&2)!==0),c?(l=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ae(he,s&1),e===null)return ma(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(r.mode&1?e.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(a=n.children,e=n.fallback,l?(n=r.mode,l=r.child,a={mode:"hidden",children:a},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=Us(a,n,0,null),e=bt(e,n,t,null),l.return=r,e.return=r,l.sibling=e,r.child=l,r.child.memoizedState=wa(t),r.memoizedState=ba,e):Pi(r,a));if(s=e.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return L0(e,r,a,n,c,s,t);if(l){l=n.fallback,a=r.mode,s=e.child,c=s.sibling;var i={mode:"hidden",children:n.children};return!(a&1)&&r.child!==s?(n=r.child,n.childLanes=0,n.pendingProps=i,r.deletions=null):(n=tt(s,i),n.subtreeFlags=s.subtreeFlags&14680064),c!==null?l=tt(c,l):(l=bt(l,a,t,null),l.flags|=2),l.return=r,n.return=r,n.sibling=l,r.child=n,n=l,l=r.child,a=e.child.memoizedState,a=a===null?wa(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~t,r.memoizedState=ba,n}return l=e.child,e=l.sibling,n=tt(l,{mode:"visible",children:n.children}),!(r.mode&1)&&(n.lanes=t),n.return=r,n.sibling=null,e!==null&&(t=r.deletions,t===null?(r.deletions=[e],r.flags|=16):t.push(e)),r.child=n,r.memoizedState=null,n}function Pi(e,r){return r=Us({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function _n(e,r,t,n){return n!==null&&vi(n),Yt(r,e.child,null,t),e=Pi(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function L0(e,r,t,n,s,l,a){if(t)return r.flags&256?(r.flags&=-257,n=Sl(Error($(422))),_n(e,r,a,n)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(l=n.fallback,s=r.mode,n=Us({mode:"visible",children:n.children},s,0,null),l=bt(l,s,a,null),l.flags|=2,n.return=r,l.return=r,n.sibling=l,r.child=n,r.mode&1&&Yt(r,e.child,null,a),r.child.memoizedState=wa(a),r.memoizedState=ba,l);if(!(r.mode&1))return _n(e,r,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var c=n.dgst;return n=c,l=Error($(419)),n=Sl(l,n,void 0),_n(e,r,a,n)}if(c=(a&e.childLanes)!==0,$e||c){if(n=ke,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,Mr(e,s),yr(n,e,s,-1))}return Di(),n=Sl(Error($(421))),_n(e,r,a,n)}return s.data==="$?"?(r.flags|=128,r.child=e.child,r=H0.bind(null,e),s._reactRetry=r,null):(e=l.treeContext,Ze=Yr(s.nextSibling),er=r,de=!0,xr=null,e!==null&&(lr[ar++]=Tr,lr[ar++]=Ir,lr[ar++]=Nt,Tr=e.id,Ir=e.overflow,Nt=r),r=Pi(r,n.children),r.flags|=4096,r)}function nd(e,r,t){e.lanes|=r;var n=e.alternate;n!==null&&(n.lanes|=r),fa(e.return,r,t)}function El(e,r,t,n,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:s}:(l.isBackwards=r,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=t,l.tailMode=s)}function Gh(e,r,t){var n=r.pendingProps,s=n.revealOrder,l=n.tail;if(ze(e,r,n.children,t),n=he.current,n&2)n=n&1|2,r.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nd(e,t,r);else if(e.tag===19)nd(e,t,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ae(he,n),!(r.mode&1))r.memoizedState=null;else switch(s){case"forwards":for(t=r.child,s=null;t!==null;)e=t.alternate,e!==null&&bs(e)===null&&(s=t),t=t.sibling;t=s,t===null?(s=r.child,r.child=null):(s=t.sibling,t.sibling=null),El(r,!1,s,t,l);break;case"backwards":for(t=null,s=r.child,r.child=null;s!==null;){if(e=s.alternate,e!==null&&bs(e)===null){r.child=s;break}e=s.sibling,s.sibling=t,t=s,s=e}El(r,!0,t,null,l);break;case"together":El(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function qn(e,r){!(r.mode&1)&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function Fr(e,r,t){if(e!==null&&(r.dependencies=e.dependencies),kt|=r.lanes,!(t&r.childLanes))return null;if(e!==null&&r.child!==e.child)throw Error($(153));if(r.child!==null){for(e=r.child,t=tt(e,e.pendingProps),r.child=t,t.return=r;e.sibling!==null;)e=e.sibling,t=t.sibling=tt(e,e.pendingProps),t.return=r;t.sibling=null}return r.child}function T0(e,r,t){switch(r.tag){case 3:Hh(r),Xt();break;case 5:yh(r);break;case 1:We(r.type)&&fs(r);break;case 4:ji(r,r.stateNode.containerInfo);break;case 10:var n=r.type._context,s=r.memoizedProps.value;ae(xs,n._currentValue),n._currentValue=s;break;case 13:if(n=r.memoizedState,n!==null)return n.dehydrated!==null?(ae(he,he.current&1),r.flags|=128,null):t&r.child.childLanes?qh(e,r,t):(ae(he,he.current&1),e=Fr(e,r,t),e!==null?e.sibling:null);ae(he,he.current&1);break;case 19:if(n=(t&r.childLanes)!==0,e.flags&128){if(n)return Gh(e,r,t);r.flags|=128}if(s=r.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ae(he,he.current),n)break;return null;case 22:case 23:return r.lanes=0,Vh(e,r,t)}return Fr(e,r,t)}var Qh,ja,Kh,Jh;Qh=function(e,r){for(var t=r.child;t!==null;){if(t.tag===5||t.tag===6)e.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};ja=function(){};Kh=function(e,r,t,n){var s=e.memoizedProps;if(s!==n){e=r.stateNode,xt(Er.current);var l=null;switch(t){case"input":s=Wl(e,s),n=Wl(e,n),l=[];break;case"select":s=fe({},s,{value:void 0}),n=fe({},n,{value:void 0}),l=[];break;case"textarea":s=Gl(e,s),n=Gl(e,n),l=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=hs)}Kl(t,n);var a;t=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Bo.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in n){var i=n[d];if(c=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&i!==c&&(i!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||i&&i.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in i)i.hasOwnProperty(a)&&c[a]!==i[a]&&(t||(t={}),t[a]=i[a])}else t||(l||(l=[]),l.push(d,t)),t=i;else d==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,c=c?c.__html:void 0,i!=null&&c!==i&&(l=l||[]).push(d,i)):d==="children"?typeof i!="string"&&typeof i!="number"||(l=l||[]).push(d,""+i):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Bo.hasOwnProperty(d)?(i!=null&&d==="onScroll"&&ie("scroll",e),l||c===i||(l=[])):(l=l||[]).push(d,i))}t&&(l=l||[]).push("style",t);var d=l;(r.updateQueue=d)&&(r.flags|=4)}};Jh=function(e,r,t,n){t!==n&&(r.flags|=4)};function bo(e,r){if(!de)switch(e.tailMode){case"hidden":r=e.tail;for(var t=null;r!==null;)r.alternate!==null&&(t=r),r=r.sibling;t===null?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Pe(e){var r=e.alternate!==null&&e.alternate.child===e.child,t=0,n=0;if(r)for(var s=e.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=t,r}function I0(e,r,t){var n=r.pendingProps;switch(pi(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(r),null;case 1:return We(r.type)&&ms(),Pe(r),null;case 3:return n=r.stateNode,Zt(),ce(Ve),ce(Te),Ci(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Sn(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,xr!==null&&(Pa(xr),xr=null))),ja(e,r),Pe(r),null;case 5:Ni(r);var s=xt(Yo.current);if(t=r.type,e!==null&&r.stateNode!=null)Kh(e,r,t,n,s),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!n){if(r.stateNode===null)throw Error($(166));return Pe(r),null}if(e=xt(Er.current),Sn(r)){n=r.stateNode,t=r.type;var l=r.memoizedProps;switch(n[kr]=r,n[Jo]=l,e=(r.mode&1)!==0,t){case"dialog":ie("cancel",n),ie("close",n);break;case"iframe":case"object":case"embed":ie("load",n);break;case"video":case"audio":for(s=0;s<Ro.length;s++)ie(Ro[s],n);break;case"source":ie("error",n);break;case"img":case"image":case"link":ie("error",n),ie("load",n);break;case"details":ie("toggle",n);break;case"input":mc(n,l),ie("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},ie("invalid",n);break;case"textarea":pc(n,l),ie("invalid",n)}Kl(t,l),s=null;for(var a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="children"?typeof c=="string"?n.textContent!==c&&(l.suppressHydrationWarning!==!0&&kn(n.textContent,c,e),s=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&kn(n.textContent,c,e),s=["children",""+c]):Bo.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&ie("scroll",n)}switch(t){case"input":xn(n),fc(n,l,!0);break;case"textarea":xn(n),vc(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=hs)}n=s,r.updateQueue=n,n!==null&&(r.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Cu(t)),e==="http://www.w3.org/1999/xhtml"?t==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(t,{is:n.is}):(e=a.createElement(t),t==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,t),e[kr]=r,e[Jo]=n,Qh(e,r,!1,!1),r.stateNode=e;e:{switch(a=Jl(t,n),t){case"dialog":ie("cancel",e),ie("close",e),s=n;break;case"iframe":case"object":case"embed":ie("load",e),s=n;break;case"video":case"audio":for(s=0;s<Ro.length;s++)ie(Ro[s],e);s=n;break;case"source":ie("error",e),s=n;break;case"img":case"image":case"link":ie("error",e),ie("load",e),s=n;break;case"details":ie("toggle",e),s=n;break;case"input":mc(e,n),s=Wl(e,n),ie("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=fe({},n,{value:void 0}),ie("invalid",e);break;case"textarea":pc(e,n),s=Gl(e,n),ie("invalid",e);break;default:s=n}Kl(t,s),c=s;for(l in c)if(c.hasOwnProperty(l)){var i=c[l];l==="style"?Eu(e,i):l==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,i!=null&&ku(e,i)):l==="children"?typeof i=="string"?(t!=="textarea"||i!=="")&&Uo(e,i):typeof i=="number"&&Uo(e,""+i):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Bo.hasOwnProperty(l)?i!=null&&l==="onScroll"&&ie("scroll",e):i!=null&&ei(e,l,i,a))}switch(t){case"input":xn(e),fc(e,n,!1);break;case"textarea":xn(e),vc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+lt(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?Vt(e,!!n.multiple,l,!1):n.defaultValue!=null&&Vt(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=hs)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Pe(r),null;case 6:if(e&&r.stateNode!=null)Jh(e,r,e.memoizedProps,n);else{if(typeof n!="string"&&r.stateNode===null)throw Error($(166));if(t=xt(Yo.current),xt(Er.current),Sn(r)){if(n=r.stateNode,t=r.memoizedProps,n[kr]=r,(l=n.nodeValue!==t)&&(e=er,e!==null))switch(e.tag){case 3:kn(n.nodeValue,t,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&kn(n.nodeValue,t,(e.mode&1)!==0)}l&&(r.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[kr]=r,r.stateNode=n}return Pe(r),null;case 13:if(ce(he),n=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(de&&Ze!==null&&r.mode&1&&!(r.flags&128))fh(),Xt(),r.flags|=98560,l=!1;else if(l=Sn(r),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error($(318));if(l=r.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error($(317));l[kr]=r}else Xt(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Pe(r),l=!1}else xr!==null&&(Pa(xr),xr=null),l=!0;if(!l)return r.flags&65536?r:null}return r.flags&128?(r.lanes=t,r):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(r.child.flags|=8192,r.mode&1&&(e===null||he.current&1?Ne===0&&(Ne=3):Di())),r.updateQueue!==null&&(r.flags|=4),Pe(r),null);case 4:return Zt(),ja(e,r),e===null&&Qo(r.stateNode.containerInfo),Pe(r),null;case 10:return yi(r.type._context),Pe(r),null;case 17:return We(r.type)&&ms(),Pe(r),null;case 19:if(ce(he),l=r.memoizedState,l===null)return Pe(r),null;if(n=(r.flags&128)!==0,a=l.rendering,a===null)if(n)bo(l,!1);else{if(Ne!==0||e!==null&&e.flags&128)for(e=r.child;e!==null;){if(a=bs(e),a!==null){for(r.flags|=128,bo(l,!1),n=a.updateQueue,n!==null&&(r.updateQueue=n,r.flags|=4),r.subtreeFlags=0,n=t,t=r.child;t!==null;)l=t,e=n,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return ae(he,he.current&1|2),r.child}e=e.sibling}l.tail!==null&&ve()>ro&&(r.flags|=128,n=!0,bo(l,!1),r.lanes=4194304)}else{if(!n)if(e=bs(a),e!==null){if(r.flags|=128,n=!0,t=e.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),bo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!de)return Pe(r),null}else 2*ve()-l.renderingStartTime>ro&&t!==1073741824&&(r.flags|=128,n=!0,bo(l,!1),r.lanes=4194304);l.isBackwards?(a.sibling=r.child,r.child=a):(t=l.last,t!==null?t.sibling=a:r.child=a,l.last=a)}return l.tail!==null?(r=l.tail,l.rendering=r,l.tail=r.sibling,l.renderingStartTime=ve(),r.sibling=null,t=he.current,ae(he,n?t&1|2:t&1),r):(Pe(r),null);case 22:case 23:return Oi(),n=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(r.flags|=8192),n&&r.mode&1?Ye&1073741824&&(Pe(r),r.subtreeFlags&6&&(r.flags|=8192)):Pe(r),null;case 24:return null;case 25:return null}throw Error($(156,r.tag))}function O0(e,r){switch(pi(r),r.tag){case 1:return We(r.type)&&ms(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return Zt(),ce(Ve),ce(Te),Ci(),e=r.flags,e&65536&&!(e&128)?(r.flags=e&-65537|128,r):null;case 5:return Ni(r),null;case 13:if(ce(he),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error($(340));Xt()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return ce(he),null;case 4:return Zt(),null;case 10:return yi(r.type._context),null;case 22:case 23:return Oi(),null;case 24:return null;default:return null}}var Rn=!1,Ae=!1,D0=typeof WeakSet=="function"?WeakSet:Set,K=null;function Ut(e,r){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){pe(e,r,n)}else t.current=null}function Na(e,r,t){try{t()}catch(n){pe(e,r,n)}}var sd=!1;function z0(e,r){if(la=cs,e=rh(),mi(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{t=(t=e.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var s=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{t.nodeType,l.nodeType}catch{t=null;break e}var a=0,c=-1,i=-1,d=0,u=0,m=e,f=null;r:for(;;){for(var j;m!==t||s!==0&&m.nodeType!==3||(c=a+s),m!==l||n!==0&&m.nodeType!==3||(i=a+n),m.nodeType===3&&(a+=m.nodeValue.length),(j=m.firstChild)!==null;)f=m,m=j;for(;;){if(m===e)break r;if(f===t&&++d===s&&(c=a),f===l&&++u===n&&(i=a),(j=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=j}t=c===-1||i===-1?null:{start:c,end:i}}else t=null}t=t||{start:0,end:0}}else t=null;for(aa={focusedElem:e,selectionRange:t},cs=!1,K=r;K!==null;)if(r=K,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,K=e;else for(;K!==null;){r=K;try{var w=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var h=w.memoizedProps,y=w.memoizedState,g=r.stateNode,p=g.getSnapshotBeforeUpdate(r.elementType===r.type?h:fr(r.type,h),y);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var x=r.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(k){pe(r,r.return,k)}if(e=r.sibling,e!==null){e.return=r.return,K=e;break}K=r.return}return w=sd,sd=!1,w}function zo(e,r,t){var n=r.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&Na(r,t,l)}s=s.next}while(s!==n)}}function Fs(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var t=r=r.next;do{if((t.tag&e)===e){var n=t.create;t.destroy=n()}t=t.next}while(t!==r)}}function Ca(e){var r=e.ref;if(r!==null){var t=e.stateNode;switch(e.tag){case 5:e=t;break;default:e=t}typeof r=="function"?r(e):r.current=e}}function Xh(e){var r=e.alternate;r!==null&&(e.alternate=null,Xh(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[kr],delete r[Jo],delete r[da],delete r[y0],delete r[b0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Yh(e){return e.tag===5||e.tag===3||e.tag===4}function ld(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Yh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ka(e,r,t){var n=e.tag;if(n===5||n===6)e=e.stateNode,r?t.nodeType===8?t.parentNode.insertBefore(e,r):t.insertBefore(e,r):(t.nodeType===8?(r=t.parentNode,r.insertBefore(e,t)):(r=t,r.appendChild(e)),t=t._reactRootContainer,t!=null||r.onclick!==null||(r.onclick=hs));else if(n!==4&&(e=e.child,e!==null))for(ka(e,r,t),e=e.sibling;e!==null;)ka(e,r,t),e=e.sibling}function Sa(e,r,t){var n=e.tag;if(n===5||n===6)e=e.stateNode,r?t.insertBefore(e,r):t.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Sa(e,r,t),e=e.sibling;e!==null;)Sa(e,r,t),e=e.sibling}var Se=null,pr=!1;function Ur(e,r,t){for(t=t.child;t!==null;)Zh(e,r,t),t=t.sibling}function Zh(e,r,t){if(Sr&&typeof Sr.onCommitFiberUnmount=="function")try{Sr.onCommitFiberUnmount(As,t)}catch{}switch(t.tag){case 5:Ae||Ut(t,r);case 6:var n=Se,s=pr;Se=null,Ur(e,r,t),Se=n,pr=s,Se!==null&&(pr?(e=Se,t=t.stateNode,e.nodeType===8?e.parentNode.removeChild(t):e.removeChild(t)):Se.removeChild(t.stateNode));break;case 18:Se!==null&&(pr?(e=Se,t=t.stateNode,e.nodeType===8?bl(e.parentNode,t):e.nodeType===1&&bl(e,t),Ho(e)):bl(Se,t.stateNode));break;case 4:n=Se,s=pr,Se=t.stateNode.containerInfo,pr=!0,Ur(e,r,t),Se=n,pr=s;break;case 0:case 11:case 14:case 15:if(!Ae&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var l=s,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&Na(t,r,a),s=s.next}while(s!==n)}Ur(e,r,t);break;case 1:if(!Ae&&(Ut(t,r),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(c){pe(t,r,c)}Ur(e,r,t);break;case 21:Ur(e,r,t);break;case 22:t.mode&1?(Ae=(n=Ae)||t.memoizedState!==null,Ur(e,r,t),Ae=n):Ur(e,r,t);break;default:Ur(e,r,t)}}function ad(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var t=e.stateNode;t===null&&(t=e.stateNode=new D0),r.forEach(function(n){var s=q0.bind(null,e,n);t.has(n)||(t.add(n),n.then(s,s))})}}function mr(e,r){var t=r.deletions;if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];try{var l=e,a=r,c=a;e:for(;c!==null;){switch(c.tag){case 5:Se=c.stateNode,pr=!1;break e;case 3:Se=c.stateNode.containerInfo,pr=!0;break e;case 4:Se=c.stateNode.containerInfo,pr=!0;break e}c=c.return}if(Se===null)throw Error($(160));Zh(l,a,s),Se=null,pr=!1;var i=s.alternate;i!==null&&(i.return=null),s.return=null}catch(d){pe(s,r,d)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)em(r,e),r=r.sibling}function em(e,r){var t=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mr(r,e),jr(e),n&4){try{zo(3,e,e.return),Fs(3,e)}catch(h){pe(e,e.return,h)}try{zo(5,e,e.return)}catch(h){pe(e,e.return,h)}}break;case 1:mr(r,e),jr(e),n&512&&t!==null&&Ut(t,t.return);break;case 5:if(mr(r,e),jr(e),n&512&&t!==null&&Ut(t,t.return),e.flags&32){var s=e.stateNode;try{Uo(s,"")}catch(h){pe(e,e.return,h)}}if(n&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,a=t!==null?t.memoizedProps:l,c=e.type,i=e.updateQueue;if(e.updateQueue=null,i!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&ju(s,l),Jl(c,a);var d=Jl(c,l);for(a=0;a<i.length;a+=2){var u=i[a],m=i[a+1];u==="style"?Eu(s,m):u==="dangerouslySetInnerHTML"?ku(s,m):u==="children"?Uo(s,m):ei(s,u,m,d)}switch(c){case"input":Hl(s,l);break;case"textarea":Nu(s,l);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var j=l.value;j!=null?Vt(s,!!l.multiple,j,!1):f!==!!l.multiple&&(l.defaultValue!=null?Vt(s,!!l.multiple,l.defaultValue,!0):Vt(s,!!l.multiple,l.multiple?[]:"",!1))}s[Jo]=l}catch(h){pe(e,e.return,h)}}break;case 6:if(mr(r,e),jr(e),n&4){if(e.stateNode===null)throw Error($(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(h){pe(e,e.return,h)}}break;case 3:if(mr(r,e),jr(e),n&4&&t!==null&&t.memoizedState.isDehydrated)try{Ho(r.containerInfo)}catch(h){pe(e,e.return,h)}break;case 4:mr(r,e),jr(e);break;case 13:mr(r,e),jr(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(Ti=ve())),n&4&&ad(e);break;case 22:if(u=t!==null&&t.memoizedState!==null,e.mode&1?(Ae=(d=Ae)||u,mr(r,e),Ae=d):mr(r,e),jr(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(K=e,u=e.child;u!==null;){for(m=K=u;K!==null;){switch(f=K,j=f.child,f.tag){case 0:case 11:case 14:case 15:zo(4,f,f.return);break;case 1:Ut(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){n=f,t=f.return;try{r=n,w.props=r.memoizedProps,w.state=r.memoizedState,w.componentWillUnmount()}catch(h){pe(n,t,h)}}break;case 5:Ut(f,f.return);break;case 22:if(f.memoizedState!==null){cd(m);continue}}j!==null?(j.return=f,K=j):cd(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{s=m.stateNode,d?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=m.stateNode,i=m.memoizedProps.style,a=i!=null&&i.hasOwnProperty("display")?i.display:null,c.style.display=Su("display",a))}catch(h){pe(e,e.return,h)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(h){pe(e,e.return,h)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:mr(r,e),jr(e),n&4&&ad(e);break;case 21:break;default:mr(r,e),jr(e)}}function jr(e){var r=e.flags;if(r&2){try{e:{for(var t=e.return;t!==null;){if(Yh(t)){var n=t;break e}t=t.return}throw Error($(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Uo(s,""),n.flags&=-33);var l=ld(e);Sa(e,l,s);break;case 3:case 4:var a=n.stateNode.containerInfo,c=ld(e);ka(e,c,a);break;default:throw Error($(161))}}catch(i){pe(e,e.return,i)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function M0(e,r,t){K=e,rm(e)}function rm(e,r,t){for(var n=(e.mode&1)!==0;K!==null;){var s=K,l=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Rn;if(!a){var c=s.alternate,i=c!==null&&c.memoizedState!==null||Ae;c=Rn;var d=Ae;if(Rn=a,(Ae=i)&&!d)for(K=s;K!==null;)a=K,i=a.child,a.tag===22&&a.memoizedState!==null?dd(s):i!==null?(i.return=a,K=i):dd(s);for(;l!==null;)K=l,rm(l),l=l.sibling;K=s,Rn=c,Ae=d}id(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,K=l):id(e)}}function id(e){for(;K!==null;){var r=K;if(r.flags&8772){var t=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:Ae||Fs(5,r);break;case 1:var n=r.stateNode;if(r.flags&4&&!Ae)if(t===null)n.componentDidMount();else{var s=r.elementType===r.type?t.memoizedProps:fr(r.type,t.memoizedProps);n.componentDidUpdate(s,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=r.updateQueue;l!==null&&qc(r,l,n);break;case 3:var a=r.updateQueue;if(a!==null){if(t=null,r.child!==null)switch(r.child.tag){case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}qc(r,a,t)}break;case 5:var c=r.stateNode;if(t===null&&r.flags&4){t=c;var i=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":i.autoFocus&&t.focus();break;case"img":i.src&&(t.src=i.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var d=r.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Ho(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Ae||r.flags&512&&Ca(r)}catch(f){pe(r,r.return,f)}}if(r===e){K=null;break}if(t=r.sibling,t!==null){t.return=r.return,K=t;break}K=r.return}}function cd(e){for(;K!==null;){var r=K;if(r===e){K=null;break}var t=r.sibling;if(t!==null){t.return=r.return,K=t;break}K=r.return}}function dd(e){for(;K!==null;){var r=K;try{switch(r.tag){case 0:case 11:case 15:var t=r.return;try{Fs(4,r)}catch(i){pe(r,t,i)}break;case 1:var n=r.stateNode;if(typeof n.componentDidMount=="function"){var s=r.return;try{n.componentDidMount()}catch(i){pe(r,s,i)}}var l=r.return;try{Ca(r)}catch(i){pe(r,l,i)}break;case 5:var a=r.return;try{Ca(r)}catch(i){pe(r,a,i)}}}catch(i){pe(r,r.return,i)}if(r===e){K=null;break}var c=r.sibling;if(c!==null){c.return=r.return,K=c;break}K=r.return}}var F0=Math.ceil,Ns=Br.ReactCurrentDispatcher,Ai=Br.ReactCurrentOwner,dr=Br.ReactCurrentBatchConfig,oe=0,ke=null,be=null,Ee=0,Ye=0,$t=ct(0),Ne=0,tn=null,kt=0,Bs=0,Li=0,Mo=null,Ue=null,Ti=0,ro=1/0,Ar=null,Cs=!1,Ea=null,et=null,Pn=!1,Gr=null,ks=0,Fo=0,_a=null,Gn=-1,Qn=0;function Me(){return oe&6?ve():Gn!==-1?Gn:Gn=ve()}function rt(e){return e.mode&1?oe&2&&Ee!==0?Ee&-Ee:j0.transition!==null?(Qn===0&&(Qn=Fu()),Qn):(e=se,e!==0||(e=window.event,e=e===void 0?16:qu(e.type)),e):1}function yr(e,r,t,n){if(50<Fo)throw Fo=0,_a=null,Error($(185));ln(e,t,n),(!(oe&2)||e!==ke)&&(e===ke&&(!(oe&2)&&(Bs|=t),Ne===4&&Hr(e,Ee)),He(e,n),t===1&&oe===0&&!(r.mode&1)&&(ro=ve()+500,Ds&&dt()))}function He(e,r){var t=e.callbackNode;jp(e,r);var n=is(e,e===ke?Ee:0);if(n===0)t!==null&&yc(t),e.callbackNode=null,e.callbackPriority=0;else if(r=n&-n,e.callbackPriority!==r){if(t!=null&&yc(t),r===1)e.tag===0?w0(ud.bind(null,e)):uh(ud.bind(null,e)),x0(function(){!(oe&6)&&dt()}),t=null;else{switch(Bu(n)){case 1:t=si;break;case 4:t=zu;break;case 16:t=as;break;case 536870912:t=Mu;break;default:t=as}t=cm(t,tm.bind(null,e))}e.callbackPriority=r,e.callbackNode=t}}function tm(e,r){if(Gn=-1,Qn=0,oe&6)throw Error($(327));var t=e.callbackNode;if(Qt()&&e.callbackNode!==t)return null;var n=is(e,e===ke?Ee:0);if(n===0)return null;if(n&30||n&e.expiredLanes||r)r=Ss(e,n);else{r=n;var s=oe;oe|=2;var l=nm();(ke!==e||Ee!==r)&&(Ar=null,ro=ve()+500,yt(e,r));do try{$0();break}catch(c){om(e,c)}while(!0);gi(),Ns.current=l,oe=s,be!==null?r=0:(ke=null,Ee=0,r=Ne)}if(r!==0){if(r===2&&(s=ra(e),s!==0&&(n=s,r=Ra(e,s))),r===1)throw t=tn,yt(e,0),Hr(e,n),He(e,ve()),t;if(r===6)Hr(e,n);else{if(s=e.current.alternate,!(n&30)&&!B0(s)&&(r=Ss(e,n),r===2&&(l=ra(e),l!==0&&(n=l,r=Ra(e,l))),r===1))throw t=tn,yt(e,0),Hr(e,n),He(e,ve()),t;switch(e.finishedWork=s,e.finishedLanes=n,r){case 0:case 1:throw Error($(345));case 2:ft(e,Ue,Ar);break;case 3:if(Hr(e,n),(n&130023424)===n&&(r=Ti+500-ve(),10<r)){if(is(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Me(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ca(ft.bind(null,e,Ue,Ar),r);break}ft(e,Ue,Ar);break;case 4:if(Hr(e,n),(n&4194240)===n)break;for(r=e.eventTimes,s=-1;0<n;){var a=31-gr(n);l=1<<a,a=r[a],a>s&&(s=a),n&=~l}if(n=s,n=ve()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*F0(n/1960))-n,10<n){e.timeoutHandle=ca(ft.bind(null,e,Ue,Ar),n);break}ft(e,Ue,Ar);break;case 5:ft(e,Ue,Ar);break;default:throw Error($(329))}}}return He(e,ve()),e.callbackNode===t?tm.bind(null,e):null}function Ra(e,r){var t=Mo;return e.current.memoizedState.isDehydrated&&(yt(e,r).flags|=256),e=Ss(e,r),e!==2&&(r=Ue,Ue=t,r!==null&&Pa(r)),e}function Pa(e){Ue===null?Ue=e:Ue.push.apply(Ue,e)}function B0(e){for(var r=e;;){if(r.flags&16384){var t=r.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var s=t[n],l=s.getSnapshot;s=s.value;try{if(!br(l(),s))return!1}catch{return!1}}}if(t=r.child,r.subtreeFlags&16384&&t!==null)t.return=r,r=t;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Hr(e,r){for(r&=~Li,r&=~Bs,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var t=31-gr(r),n=1<<t;e[t]=-1,r&=~n}}function ud(e){if(oe&6)throw Error($(327));Qt();var r=is(e,0);if(!(r&1))return He(e,ve()),null;var t=Ss(e,r);if(e.tag!==0&&t===2){var n=ra(e);n!==0&&(r=n,t=Ra(e,n))}if(t===1)throw t=tn,yt(e,0),Hr(e,r),He(e,ve()),t;if(t===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,ft(e,Ue,Ar),He(e,ve()),null}function Ii(e,r){var t=oe;oe|=1;try{return e(r)}finally{oe=t,oe===0&&(ro=ve()+500,Ds&&dt())}}function St(e){Gr!==null&&Gr.tag===0&&!(oe&6)&&Qt();var r=oe;oe|=1;var t=dr.transition,n=se;try{if(dr.transition=null,se=1,e)return e()}finally{se=n,dr.transition=t,oe=r,!(oe&6)&&dt()}}function Oi(){Ye=$t.current,ce($t)}function yt(e,r){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(t!==-1&&(e.timeoutHandle=-1,v0(t)),be!==null)for(t=be.return;t!==null;){var n=t;switch(pi(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ms();break;case 3:Zt(),ce(Ve),ce(Te),Ci();break;case 5:Ni(n);break;case 4:Zt();break;case 13:ce(he);break;case 19:ce(he);break;case 10:yi(n.type._context);break;case 22:case 23:Oi()}t=t.return}if(ke=e,be=e=tt(e.current,null),Ee=Ye=r,Ne=0,tn=null,Li=Bs=kt=0,Ue=Mo=null,vt!==null){for(r=0;r<vt.length;r++)if(t=vt[r],n=t.interleaved,n!==null){t.interleaved=null;var s=n.next,l=t.pending;if(l!==null){var a=l.next;l.next=s,n.next=a}t.pending=n}vt=null}return e}function om(e,r){do{var t=be;try{if(gi(),Wn.current=js,ws){for(var n=me.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ws=!1}if(Ct=0,Ce=je=me=null,Do=!1,Zo=0,Ai.current=null,t===null||t.return===null){Ne=1,tn=r,be=null;break}e:{var l=e,a=t.return,c=t,i=r;if(r=Ee,c.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){var d=i,u=c,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var j=Yc(a);if(j!==null){j.flags&=-257,Zc(j,a,c,l,r),j.mode&1&&Xc(l,d,r),r=j,i=d;var w=r.updateQueue;if(w===null){var h=new Set;h.add(i),r.updateQueue=h}else w.add(i);break e}else{if(!(r&1)){Xc(l,d,r),Di();break e}i=Error($(426))}}else if(de&&c.mode&1){var y=Yc(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Zc(y,a,c,l,r),vi(eo(i,c));break e}}l=i=eo(i,c),Ne!==4&&(Ne=2),Mo===null?Mo=[l]:Mo.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,r&=-r,l.lanes|=r;var g=Bh(l,i,r);Hc(l,g);break e;case 1:c=i;var p=l.type,x=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(et===null||!et.has(x)))){l.flags|=65536,r&=-r,l.lanes|=r;var k=Uh(l,c,r);Hc(l,k);break e}}l=l.return}while(l!==null)}lm(t)}catch(C){r=C,be===t&&t!==null&&(be=t=t.return);continue}break}while(!0)}function nm(){var e=Ns.current;return Ns.current=js,e===null?js:e}function Di(){(Ne===0||Ne===3||Ne===2)&&(Ne=4),ke===null||!(kt&268435455)&&!(Bs&268435455)||Hr(ke,Ee)}function Ss(e,r){var t=oe;oe|=2;var n=nm();(ke!==e||Ee!==r)&&(Ar=null,yt(e,r));do try{U0();break}catch(s){om(e,s)}while(!0);if(gi(),oe=t,Ns.current=n,be!==null)throw Error($(261));return ke=null,Ee=0,Ne}function U0(){for(;be!==null;)sm(be)}function $0(){for(;be!==null&&!mp();)sm(be)}function sm(e){var r=im(e.alternate,e,Ye);e.memoizedProps=e.pendingProps,r===null?lm(e):be=r,Ai.current=null}function lm(e){var r=e;do{var t=r.alternate;if(e=r.return,r.flags&32768){if(t=O0(t,r),t!==null){t.flags&=32767,be=t;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ne=6,be=null;return}}else if(t=I0(t,r,Ye),t!==null){be=t;return}if(r=r.sibling,r!==null){be=r;return}be=r=e}while(r!==null);Ne===0&&(Ne=5)}function ft(e,r,t){var n=se,s=dr.transition;try{dr.transition=null,se=1,V0(e,r,t,n)}finally{dr.transition=s,se=n}return null}function V0(e,r,t,n){do Qt();while(Gr!==null);if(oe&6)throw Error($(327));t=e.finishedWork;var s=e.finishedLanes;if(t===null)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var l=t.lanes|t.childLanes;if(Np(e,l),e===ke&&(be=ke=null,Ee=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Pn||(Pn=!0,cm(as,function(){return Qt(),null})),l=(t.flags&15990)!==0,t.subtreeFlags&15990||l){l=dr.transition,dr.transition=null;var a=se;se=1;var c=oe;oe|=4,Ai.current=null,z0(e,t),em(t,e),c0(aa),cs=!!la,aa=la=null,e.current=t,M0(t),fp(),oe=c,se=a,dr.transition=l}else e.current=t;if(Pn&&(Pn=!1,Gr=e,ks=s),l=e.pendingLanes,l===0&&(et=null),xp(t.stateNode),He(e,ve()),r!==null)for(n=e.onRecoverableError,t=0;t<r.length;t++)s=r[t],n(s.value,{componentStack:s.stack,digest:s.digest});if(Cs)throw Cs=!1,e=Ea,Ea=null,e;return ks&1&&e.tag!==0&&Qt(),l=e.pendingLanes,l&1?e===_a?Fo++:(Fo=0,_a=e):Fo=0,dt(),null}function Qt(){if(Gr!==null){var e=Bu(ks),r=dr.transition,t=se;try{if(dr.transition=null,se=16>e?16:e,Gr===null)var n=!1;else{if(e=Gr,Gr=null,ks=0,oe&6)throw Error($(331));var s=oe;for(oe|=4,K=e.current;K!==null;){var l=K,a=l.child;if(K.flags&16){var c=l.deletions;if(c!==null){for(var i=0;i<c.length;i++){var d=c[i];for(K=d;K!==null;){var u=K;switch(u.tag){case 0:case 11:case 15:zo(8,u,l)}var m=u.child;if(m!==null)m.return=u,K=m;else for(;K!==null;){u=K;var f=u.sibling,j=u.return;if(Xh(u),u===d){K=null;break}if(f!==null){f.return=j,K=f;break}K=j}}}var w=l.alternate;if(w!==null){var h=w.child;if(h!==null){w.child=null;do{var y=h.sibling;h.sibling=null,h=y}while(h!==null)}}K=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,K=a;else e:for(;K!==null;){if(l=K,l.flags&2048)switch(l.tag){case 0:case 11:case 15:zo(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,K=g;break e}K=l.return}}var p=e.current;for(K=p;K!==null;){a=K;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,K=x;else e:for(a=p;K!==null;){if(c=K,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Fs(9,c)}}catch(C){pe(c,c.return,C)}if(c===a){K=null;break e}var k=c.sibling;if(k!==null){k.return=c.return,K=k;break e}K=c.return}}if(oe=s,dt(),Sr&&typeof Sr.onPostCommitFiberRoot=="function")try{Sr.onPostCommitFiberRoot(As,e)}catch{}n=!0}return n}finally{se=t,dr.transition=r}}return!1}function hd(e,r,t){r=eo(t,r),r=Bh(e,r,1),e=Zr(e,r,1),r=Me(),e!==null&&(ln(e,1,r),He(e,r))}function pe(e,r,t){if(e.tag===3)hd(e,e,t);else for(;r!==null;){if(r.tag===3){hd(r,e,t);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(et===null||!et.has(n))){e=eo(t,e),e=Uh(r,e,1),r=Zr(r,e,1),e=Me(),r!==null&&(ln(r,1,e),He(r,e));break}}r=r.return}}function W0(e,r,t){var n=e.pingCache;n!==null&&n.delete(r),r=Me(),e.pingedLanes|=e.suspendedLanes&t,ke===e&&(Ee&t)===t&&(Ne===4||Ne===3&&(Ee&130023424)===Ee&&500>ve()-Ti?yt(e,0):Li|=t),He(e,r)}function am(e,r){r===0&&(e.mode&1?(r=bn,bn<<=1,!(bn&130023424)&&(bn=4194304)):r=1);var t=Me();e=Mr(e,r),e!==null&&(ln(e,r,t),He(e,t))}function H0(e){var r=e.memoizedState,t=0;r!==null&&(t=r.retryLane),am(e,t)}function q0(e,r){var t=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(t=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error($(314))}n!==null&&n.delete(r),am(e,t)}var im;im=function(e,r,t){if(e!==null)if(e.memoizedProps!==r.pendingProps||Ve.current)$e=!0;else{if(!(e.lanes&t)&&!(r.flags&128))return $e=!1,T0(e,r,t);$e=!!(e.flags&131072)}else $e=!1,de&&r.flags&1048576&&hh(r,vs,r.index);switch(r.lanes=0,r.tag){case 2:var n=r.type;qn(e,r),e=r.pendingProps;var s=Jt(r,Te.current);Gt(r,t),s=Si(null,r,n,e,s,t);var l=Ei();return r.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,We(n)?(l=!0,fs(r)):l=!1,r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wi(r),s.updater=Ms,r.stateNode=s,s._reactInternals=r,va(r,n,e,t),r=ya(null,r,n,!0,l,t)):(r.tag=0,de&&l&&fi(r),ze(null,r,s,t),r=r.child),r;case 16:n=r.elementType;e:{switch(qn(e,r),e=r.pendingProps,s=n._init,n=s(n._payload),r.type=n,s=r.tag=Q0(n),e=fr(n,e),s){case 0:r=ga(null,r,n,e,t);break e;case 1:r=td(null,r,n,e,t);break e;case 11:r=ed(null,r,n,e,t);break e;case 14:r=rd(null,r,n,fr(n.type,e),t);break e}throw Error($(306,n,""))}return r;case 0:return n=r.type,s=r.pendingProps,s=r.elementType===n?s:fr(n,s),ga(e,r,n,s,t);case 1:return n=r.type,s=r.pendingProps,s=r.elementType===n?s:fr(n,s),td(e,r,n,s,t);case 3:e:{if(Hh(r),e===null)throw Error($(387));n=r.pendingProps,l=r.memoizedState,s=l.element,gh(e,r),ys(r,n,null,t);var a=r.memoizedState;if(n=a.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},r.updateQueue.baseState=l,r.memoizedState=l,r.flags&256){s=eo(Error($(423)),r),r=od(e,r,n,t,s);break e}else if(n!==s){s=eo(Error($(424)),r),r=od(e,r,n,t,s);break e}else for(Ze=Yr(r.stateNode.containerInfo.firstChild),er=r,de=!0,xr=null,t=vh(r,null,n,t),r.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Xt(),n===s){r=Fr(e,r,t);break e}ze(e,r,n,t)}r=r.child}return r;case 5:return yh(r),e===null&&ma(r),n=r.type,s=r.pendingProps,l=e!==null?e.memoizedProps:null,a=s.children,ia(n,s)?a=null:l!==null&&ia(n,l)&&(r.flags|=32),Wh(e,r),ze(e,r,a,t),r.child;case 6:return e===null&&ma(r),null;case 13:return qh(e,r,t);case 4:return ji(r,r.stateNode.containerInfo),n=r.pendingProps,e===null?r.child=Yt(r,null,n,t):ze(e,r,n,t),r.child;case 11:return n=r.type,s=r.pendingProps,s=r.elementType===n?s:fr(n,s),ed(e,r,n,s,t);case 7:return ze(e,r,r.pendingProps,t),r.child;case 8:return ze(e,r,r.pendingProps.children,t),r.child;case 12:return ze(e,r,r.pendingProps.children,t),r.child;case 10:e:{if(n=r.type._context,s=r.pendingProps,l=r.memoizedProps,a=s.value,ae(xs,n._currentValue),n._currentValue=a,l!==null)if(br(l.value,a)){if(l.children===s.children&&!Ve.current){r=Fr(e,r,t);break e}}else for(l=r.child,l!==null&&(l.return=r);l!==null;){var c=l.dependencies;if(c!==null){a=l.child;for(var i=c.firstContext;i!==null;){if(i.context===n){if(l.tag===1){i=Or(-1,t&-t),i.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?i.next=i:(i.next=u.next,u.next=i),d.pending=i}}l.lanes|=t,i=l.alternate,i!==null&&(i.lanes|=t),fa(l.return,t,r),c.lanes|=t;break}i=i.next}}else if(l.tag===10)a=l.type===r.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error($(341));a.lanes|=t,c=a.alternate,c!==null&&(c.lanes|=t),fa(a,t,r),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===r){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}ze(e,r,s.children,t),r=r.child}return r;case 9:return s=r.type,n=r.pendingProps.children,Gt(r,t),s=ur(s),n=n(s),r.flags|=1,ze(e,r,n,t),r.child;case 14:return n=r.type,s=fr(n,r.pendingProps),s=fr(n.type,s),rd(e,r,n,s,t);case 15:return $h(e,r,r.type,r.pendingProps,t);case 17:return n=r.type,s=r.pendingProps,s=r.elementType===n?s:fr(n,s),qn(e,r),r.tag=1,We(n)?(e=!0,fs(r)):e=!1,Gt(r,t),Fh(r,n,s),va(r,n,s,t),ya(null,r,n,!0,e,t);case 19:return Gh(e,r,t);case 22:return Vh(e,r,t)}throw Error($(156,r.tag))};function cm(e,r){return Du(e,r)}function G0(e,r,t,n){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(e,r,t,n){return new G0(e,r,t,n)}function zi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Q0(e){if(typeof e=="function")return zi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ti)return 11;if(e===oi)return 14}return 2}function tt(e,r){var t=e.alternate;return t===null?(t=cr(e.tag,r,e.key,e.mode),t.elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=r,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=e.flags&14680064,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,r=e.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function Kn(e,r,t,n,s,l){var a=2;if(n=e,typeof e=="function")zi(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Lt:return bt(t.children,s,l,r);case ri:a=8,s|=8;break;case Bl:return e=cr(12,t,r,s|2),e.elementType=Bl,e.lanes=l,e;case Ul:return e=cr(13,t,r,s),e.elementType=Ul,e.lanes=l,e;case $l:return e=cr(19,t,r,s),e.elementType=$l,e.lanes=l,e;case yu:return Us(t,s,l,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xu:a=10;break e;case gu:a=9;break e;case ti:a=11;break e;case oi:a=14;break e;case $r:a=16,n=null;break e}throw Error($(130,e==null?e:typeof e,""))}return r=cr(a,t,r,s),r.elementType=e,r.type=n,r.lanes=l,r}function bt(e,r,t,n){return e=cr(7,e,n,r),e.lanes=t,e}function Us(e,r,t,n){return e=cr(22,e,n,r),e.elementType=yu,e.lanes=t,e.stateNode={isHidden:!1},e}function _l(e,r,t){return e=cr(6,e,null,r),e.lanes=t,e}function Rl(e,r,t){return r=cr(4,e.children!==null?e.children:[],e.key,r),r.lanes=t,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function K0(e,r,t,n,s){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cl(0),this.expirationTimes=cl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cl(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Mi(e,r,t,n,s,l,a,c,i){return e=new K0(e,r,t,c,i),r===1?(r=1,l===!0&&(r|=8)):r=0,l=cr(3,null,null,r),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},wi(l),e}function J0(e,r,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:At,key:n==null?null:""+n,children:e,containerInfo:r,implementation:t}}function dm(e){if(!e)return at;e=e._reactInternals;e:{if(Rt(e)!==e||e.tag!==1)throw Error($(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(We(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error($(171))}if(e.tag===1){var t=e.type;if(We(t))return dh(e,t,r)}return r}function um(e,r,t,n,s,l,a,c,i){return e=Mi(t,n,!0,e,s,l,a,c,i),e.context=dm(null),t=e.current,n=Me(),s=rt(t),l=Or(n,s),l.callback=r??null,Zr(t,l,s),e.current.lanes=s,ln(e,s,n),He(e,n),e}function $s(e,r,t,n){var s=r.current,l=Me(),a=rt(s);return t=dm(t),r.context===null?r.context=t:r.pendingContext=t,r=Or(l,a),r.payload={element:e},n=n===void 0?null:n,n!==null&&(r.callback=n),e=Zr(s,r,a),e!==null&&(yr(e,s,a,l),Vn(e,s,a)),a}function Es(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function md(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var t=e.retryLane;e.retryLane=t!==0&&t<r?t:r}}function Fi(e,r){md(e,r),(e=e.alternate)&&md(e,r)}function X0(){return null}var hm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Bi(e){this._internalRoot=e}Vs.prototype.render=Bi.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error($(409));$s(e,r,null,null)};Vs.prototype.unmount=Bi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;St(function(){$s(null,e,null,null)}),r[zr]=null}};function Vs(e){this._internalRoot=e}Vs.prototype.unstable_scheduleHydration=function(e){if(e){var r=Vu();e={blockedOn:null,target:e,priority:r};for(var t=0;t<Wr.length&&r!==0&&r<Wr[t].priority;t++);Wr.splice(t,0,e),t===0&&Hu(e)}};function Ui(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ws(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fd(){}function Y0(e,r,t,n,s){if(s){if(typeof n=="function"){var l=n;n=function(){var d=Es(a);l.call(d)}}var a=um(r,n,e,0,null,!1,!1,"",fd);return e._reactRootContainer=a,e[zr]=a.current,Qo(e.nodeType===8?e.parentNode:e),St(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var c=n;n=function(){var d=Es(i);c.call(d)}}var i=Mi(e,0,!1,null,null,!1,!1,"",fd);return e._reactRootContainer=i,e[zr]=i.current,Qo(e.nodeType===8?e.parentNode:e),St(function(){$s(r,i,t,n)}),i}function Hs(e,r,t,n,s){var l=t._reactRootContainer;if(l){var a=l;if(typeof s=="function"){var c=s;s=function(){var i=Es(a);c.call(i)}}$s(r,a,e,s)}else a=Y0(t,r,e,s,n);return Es(a)}Uu=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var t=_o(r.pendingLanes);t!==0&&(li(r,t|1),He(r,ve()),!(oe&6)&&(ro=ve()+500,dt()))}break;case 13:St(function(){var n=Mr(e,1);if(n!==null){var s=Me();yr(n,e,1,s)}}),Fi(e,1)}};ai=function(e){if(e.tag===13){var r=Mr(e,134217728);if(r!==null){var t=Me();yr(r,e,134217728,t)}Fi(e,134217728)}};$u=function(e){if(e.tag===13){var r=rt(e),t=Mr(e,r);if(t!==null){var n=Me();yr(t,e,r,n)}Fi(e,r)}};Vu=function(){return se};Wu=function(e,r){var t=se;try{return se=e,r()}finally{se=t}};Yl=function(e,r,t){switch(r){case"input":if(Hl(e,t),r=t.name,t.type==="radio"&&r!=null){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<t.length;r++){var n=t[r];if(n!==e&&n.form===e.form){var s=Os(n);if(!s)throw Error($(90));wu(n),Hl(n,s)}}}break;case"textarea":Nu(e,t);break;case"select":r=t.value,r!=null&&Vt(e,!!t.multiple,r,!1)}};Pu=Ii;Au=St;var Z0={usingClientEntryPoint:!1,Events:[cn,Dt,Os,_u,Ru,Ii]},wo={findFiberByHostInstance:pt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ev={bundleType:wo.bundleType,version:wo.version,rendererPackageName:wo.rendererPackageName,rendererConfig:wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Br.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Iu(e),e===null?null:e.stateNode},findFiberByHostInstance:wo.findFiberByHostInstance||X0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var An=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!An.isDisabled&&An.supportsFiber)try{As=An.inject(ev),Sr=An}catch{}}tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z0;tr.createPortal=function(e,r){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ui(r))throw Error($(200));return J0(e,r,null,t)};tr.createRoot=function(e,r){if(!Ui(e))throw Error($(299));var t=!1,n="",s=hm;return r!=null&&(r.unstable_strictMode===!0&&(t=!0),r.identifierPrefix!==void 0&&(n=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),r=Mi(e,1,!1,null,null,t,!1,n,s),e[zr]=r.current,Qo(e.nodeType===8?e.parentNode:e),new Bi(r)};tr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=Iu(r),e=e===null?null:e.stateNode,e};tr.flushSync=function(e){return St(e)};tr.hydrate=function(e,r,t){if(!Ws(r))throw Error($(200));return Hs(null,e,r,!0,t)};tr.hydrateRoot=function(e,r,t){if(!Ui(e))throw Error($(405));var n=t!=null&&t.hydratedSources||null,s=!1,l="",a=hm;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),r=um(r,null,e,1,t??null,s,!1,l,a),e[zr]=r.current,Qo(e),n)for(e=0;e<n.length;e++)t=n[e],s=t._getVersion,s=s(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,s]:r.mutableSourceEagerHydrationData.push(t,s);return new Vs(r)};tr.render=function(e,r,t){if(!Ws(r))throw Error($(200));return Hs(null,e,r,!1,t)};tr.unmountComponentAtNode=function(e){if(!Ws(e))throw Error($(40));return e._reactRootContainer?(St(function(){Hs(null,null,e,!1,function(){e._reactRootContainer=null,e[zr]=null})}),!0):!1};tr.unstable_batchedUpdates=Ii;tr.unstable_renderSubtreeIntoContainer=function(e,r,t,n){if(!Ws(t))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return Hs(e,r,t,!1,n)};tr.version="18.3.1-next-f1338f8080-20240426";function mm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mm)}catch(e){console.error(e)}}mm(),mu.exports=tr;var rv=mu.exports,pd=rv;Ml.createRoot=pd.createRoot,Ml.hydrateRoot=pd.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function on(){return on=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},on.apply(this,arguments)}var Qr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qr||(Qr={}));const vd="popstate";function tv(e){e===void 0&&(e={});function r(n,s){let{pathname:l,search:a,hash:c}=n.location;return Aa("",{pathname:l,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:_s(s)}return nv(r,t,null,e)}function xe(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function $i(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function ov(){return Math.random().toString(36).substr(2,8)}function xd(e,r){return{usr:e.state,key:e.key,idx:r}}function Aa(e,r,t,n){return t===void 0&&(t=null),on({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof r=="string"?io(r):r,{state:t,key:r&&r.key||n||ov()})}function _s(e){let{pathname:r="/",search:t="",hash:n=""}=e;return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function io(e){let r={};if(e){let t=e.indexOf("#");t>=0&&(r.hash=e.substr(t),e=e.substr(0,t));let n=e.indexOf("?");n>=0&&(r.search=e.substr(n),e=e.substr(0,n)),e&&(r.pathname=e)}return r}function nv(e,r,t,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:l=!1}=n,a=s.history,c=Qr.Pop,i=null,d=u();d==null&&(d=0,a.replaceState(on({},a.state,{idx:d}),""));function u(){return(a.state||{idx:null}).idx}function m(){c=Qr.Pop;let y=u(),g=y==null?null:y-d;d=y,i&&i({action:c,location:h.location,delta:g})}function f(y,g){c=Qr.Push;let p=Aa(h.location,y,g);d=u()+1;let x=xd(p,d),k=h.createHref(p);try{a.pushState(x,"",k)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(k)}l&&i&&i({action:c,location:h.location,delta:1})}function j(y,g){c=Qr.Replace;let p=Aa(h.location,y,g);d=u();let x=xd(p,d),k=h.createHref(p);a.replaceState(x,"",k),l&&i&&i({action:c,location:h.location,delta:0})}function w(y){let g=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof y=="string"?y:_s(y);return p=p.replace(/ $/,"%20"),xe(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let h={get action(){return c},get location(){return e(s,a)},listen(y){if(i)throw new Error("A history only accepts one active listener");return s.addEventListener(vd,m),i=y,()=>{s.removeEventListener(vd,m),i=null}},createHref(y){return r(s,y)},createURL:w,encodeLocation(y){let g=w(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:j,go(y){return a.go(y)}};return h}var gd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(gd||(gd={}));function sv(e,r,t){return t===void 0&&(t="/"),lv(e,r,t)}function lv(e,r,t,n){let s=typeof r=="string"?io(r):r,l=Vi(s.pathname||"/",t);if(l==null)return null;let a=fm(e);av(a);let c=null;for(let i=0;c==null&&i<a.length;++i){let d=yv(l);c=vv(a[i],d)}return c}function fm(e,r,t,n){r===void 0&&(r=[]),t===void 0&&(t=[]),n===void 0&&(n="");let s=(l,a,c)=>{let i={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:a,route:l};i.relativePath.startsWith("/")&&(xe(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),i.relativePath=i.relativePath.slice(n.length));let d=ot([n,i.relativePath]),u=t.concat(i);l.children&&l.children.length>0&&(xe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),fm(l.children,r,u,d)),!(l.path==null&&!l.index)&&r.push({path:d,score:fv(d,l.index),routesMeta:u})};return e.forEach((l,a)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))s(l,a);else for(let i of pm(l.path))s(l,a,i)}),r}function pm(e){let r=e.split("/");if(r.length===0)return[];let[t,...n]=r,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(n.length===0)return s?[l,""]:[l];let a=pm(n.join("/")),c=[];return c.push(...a.map(i=>i===""?l:[l,i].join("/"))),s&&c.push(...a),c.map(i=>e.startsWith("/")&&i===""?"/":i)}function av(e){e.sort((r,t)=>r.score!==t.score?t.score-r.score:pv(r.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const iv=/^:[\w-]+$/,cv=3,dv=2,uv=1,hv=10,mv=-2,yd=e=>e==="*";function fv(e,r){let t=e.split("/"),n=t.length;return t.some(yd)&&(n+=mv),r&&(n+=dv),t.filter(s=>!yd(s)).reduce((s,l)=>s+(iv.test(l)?cv:l===""?uv:hv),n)}function pv(e,r){return e.length===r.length&&e.slice(0,-1).every((n,s)=>n===r[s])?e[e.length-1]-r[r.length-1]:0}function vv(e,r,t){let{routesMeta:n}=e,s={},l="/",a=[];for(let c=0;c<n.length;++c){let i=n[c],d=c===n.length-1,u=l==="/"?r:r.slice(l.length)||"/",m=xv({path:i.relativePath,caseSensitive:i.caseSensitive,end:d},u),f=i.route;if(!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:ot([l,m.pathname]),pathnameBase:Cv(ot([l,m.pathnameBase])),route:f}),m.pathnameBase!=="/"&&(l=ot([l,m.pathnameBase]))}return a}function xv(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[t,n]=gv(e.path,e.caseSensitive,e.end),s=r.match(t);if(!s)return null;let l=s[0],a=l.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:n.reduce((d,u,m)=>{let{paramName:f,isOptional:j}=u;if(f==="*"){let h=c[m]||"";a=l.slice(0,l.length-h.length).replace(/(.)\/+$/,"$1")}const w=c[m];return j&&!w?d[f]=void 0:d[f]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:a,pattern:e}}function gv(e,r,t){r===void 0&&(r=!1),t===void 0&&(t=!0),$i(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,i)=>(n.push({paramName:c,isOptional:i!=null}),i?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,r?void 0:"i"),n]}function yv(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return $i(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),e}}function Vi(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let t=r.endsWith("/")?r.length-1:r.length,n=e.charAt(t);return n&&n!=="/"?null:e.slice(t)||"/"}const bv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wv=e=>bv.test(e);function jv(e,r){r===void 0&&(r="/");let{pathname:t,search:n="",hash:s=""}=typeof e=="string"?io(e):e,l;if(t)if(wv(t))l=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),$i(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?l=bd(t.substring(1),"/"):l=bd(t,r)}else l=r;return{pathname:l,search:kv(n),hash:Sv(s)}}function bd(e,r){let t=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Pl(e,r,t,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Nv(e){return e.filter((r,t)=>t===0||r.route.path&&r.route.path.length>0)}function Wi(e,r){let t=Nv(e);return r?t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function Hi(e,r,t,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=io(e):(s=on({},e),xe(!s.pathname||!s.pathname.includes("?"),Pl("?","pathname","search",s)),xe(!s.pathname||!s.pathname.includes("#"),Pl("#","pathname","hash",s)),xe(!s.search||!s.search.includes("#"),Pl("#","search","hash",s)));let l=e===""||s.pathname==="",a=l?"/":s.pathname,c;if(a==null)c=t;else{let m=r.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),m-=1;s.pathname=f.join("/")}c=m>=0?r[m]:"/"}let i=jv(s,c),d=a&&a!=="/"&&a.endsWith("/"),u=(l||a===".")&&t.endsWith("/");return!i.pathname.endsWith("/")&&(d||u)&&(i.pathname+="/"),i}const ot=e=>e.join("/").replace(/\/\/+/g,"/"),Cv=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),kv=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Sv=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Ev(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const vm=["post","put","patch","delete"];new Set(vm);const _v=["get",...vm];new Set(_v);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nn(){return nn=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},nn.apply(this,arguments)}const qi=b.createContext(null),Rv=b.createContext(null),ut=b.createContext(null),qs=b.createContext(null),Pr=b.createContext({outlet:null,matches:[],isDataRoute:!1}),xm=b.createContext(null);function Pv(e,r){let{relative:t}=r===void 0?{}:r;co()||xe(!1);let{basename:n,navigator:s}=b.useContext(ut),{hash:l,pathname:a,search:c}=ym(e,{relative:t}),i=a;return n!=="/"&&(i=a==="/"?n:ot([n,a])),s.createHref({pathname:i,search:c,hash:l})}function co(){return b.useContext(qs)!=null}function ht(){return co()||xe(!1),b.useContext(qs).location}function gm(e){b.useContext(ut).static||b.useLayoutEffect(e)}function ue(){let{isDataRoute:e}=b.useContext(Pr);return e?Hv():Av()}function Av(){co()||xe(!1);let e=b.useContext(qi),{basename:r,future:t,navigator:n}=b.useContext(ut),{matches:s}=b.useContext(Pr),{pathname:l}=ht(),a=JSON.stringify(Wi(s,t.v7_relativeSplatPath)),c=b.useRef(!1);return gm(()=>{c.current=!0}),b.useCallback(function(d,u){if(u===void 0&&(u={}),!c.current)return;if(typeof d=="number"){n.go(d);return}let m=Hi(d,JSON.parse(a),l,u.relative==="path");e==null&&r!=="/"&&(m.pathname=m.pathname==="/"?r:ot([r,m.pathname])),(u.replace?n.replace:n.push)(m,u.state,u)},[r,n,a,l,e])}const Lv=b.createContext(null);function Tv(e){let r=b.useContext(Pr).outlet;return r&&b.createElement(Lv.Provider,{value:e},r)}function Gi(){let{matches:e}=b.useContext(Pr),r=e[e.length-1];return r?r.params:{}}function ym(e,r){let{relative:t}=r===void 0?{}:r,{future:n}=b.useContext(ut),{matches:s}=b.useContext(Pr),{pathname:l}=ht(),a=JSON.stringify(Wi(s,n.v7_relativeSplatPath));return b.useMemo(()=>Hi(e,JSON.parse(a),l,t==="path"),[e,a,l,t])}function Iv(e,r){return Ov(e,r)}function Ov(e,r,t,n){co()||xe(!1);let{navigator:s}=b.useContext(ut),{matches:l}=b.useContext(Pr),a=l[l.length-1],c=a?a.params:{};a&&a.pathname;let i=a?a.pathnameBase:"/";a&&a.route;let d=ht(),u;if(r){var m;let y=typeof r=="string"?io(r):r;i==="/"||(m=y.pathname)!=null&&m.startsWith(i)||xe(!1),u=y}else u=d;let f=u.pathname||"/",j=f;if(i!=="/"){let y=i.replace(/^\//,"").split("/");j="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let w=sv(e,{pathname:j}),h=Bv(w&&w.map(y=>Object.assign({},y,{params:Object.assign({},c,y.params),pathname:ot([i,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?i:ot([i,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),l,t,n);return r&&h?b.createElement(qs.Provider,{value:{location:nn({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Qr.Pop}},h):h}function Dv(){let e=Wv(),r=Ev(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},r),t?b.createElement("pre",{style:s},t):null,null)}const zv=b.createElement(Dv,null);class Mv extends b.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,t){return t.location!==r.location||t.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:t.error,location:t.location,revalidation:r.revalidation||t.revalidation}}componentDidCatch(r,t){console.error("React Router caught the following error during render",r,t)}render(){return this.state.error!==void 0?b.createElement(Pr.Provider,{value:this.props.routeContext},b.createElement(xm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Fv(e){let{routeContext:r,match:t,children:n}=e,s=b.useContext(qi);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(Pr.Provider,{value:r},n)}function Bv(e,r,t,n){var s;if(r===void 0&&(r=[]),t===void 0&&(t=null),n===void 0&&(n=null),e==null){var l;if(!t)return null;if(t.errors)e=t.matches;else if((l=n)!=null&&l.v7_partialHydration&&r.length===0&&!t.initialized&&t.matches.length>0)e=t.matches;else return null}let a=e,c=(s=t)==null?void 0:s.errors;if(c!=null){let u=a.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);u>=0||xe(!1),a=a.slice(0,Math.min(a.length,u+1))}let i=!1,d=-1;if(t&&n&&n.v7_partialHydration)for(let u=0;u<a.length;u++){let m=a[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:f,errors:j}=t,w=m.route.loader&&f[m.route.id]===void 0&&(!j||j[m.route.id]===void 0);if(m.route.lazy||w){i=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((u,m,f)=>{let j,w=!1,h=null,y=null;t&&(j=c&&m.route.id?c[m.route.id]:void 0,h=m.route.errorElement||zv,i&&(d<0&&f===0?(qv("route-fallback"),w=!0,y=null):d===f&&(w=!0,y=m.route.hydrateFallbackElement||null)));let g=r.concat(a.slice(0,f+1)),p=()=>{let x;return j?x=h:w?x=y:m.route.Component?x=b.createElement(m.route.Component,null):m.route.element?x=m.route.element:x=u,b.createElement(Fv,{match:m,routeContext:{outlet:u,matches:g,isDataRoute:t!=null},children:x})};return t&&(m.route.ErrorBoundary||m.route.errorElement||f===0)?b.createElement(Mv,{location:t.location,revalidation:t.revalidation,component:h,error:j,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var bm=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(bm||{}),wm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(wm||{});function Uv(e){let r=b.useContext(qi);return r||xe(!1),r}function $v(e){let r=b.useContext(Rv);return r||xe(!1),r}function Vv(e){let r=b.useContext(Pr);return r||xe(!1),r}function jm(e){let r=Vv(),t=r.matches[r.matches.length-1];return t.route.id||xe(!1),t.route.id}function Wv(){var e;let r=b.useContext(xm),t=$v(),n=jm();return r!==void 0?r:(e=t.errors)==null?void 0:e[n]}function Hv(){let{router:e}=Uv(bm.UseNavigateStable),r=jm(wm.UseNavigateStable),t=b.useRef(!1);return gm(()=>{t.current=!0}),b.useCallback(function(s,l){l===void 0&&(l={}),t.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,nn({fromRouteId:r},l)))},[e,r])}const wd={};function qv(e,r,t){wd[e]||(wd[e]=!0)}function Gv(e,r){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function nt(e){let{to:r,replace:t,state:n,relative:s}=e;co()||xe(!1);let{future:l,static:a}=b.useContext(ut),{matches:c}=b.useContext(Pr),{pathname:i}=ht(),d=ue(),u=Hi(r,Wi(c,l.v7_relativeSplatPath),i,s==="path"),m=JSON.stringify(u);return b.useEffect(()=>d(JSON.parse(m),{replace:t,state:n,relative:s}),[d,m,s,t,n]),null}function Qv(e){return Tv(e.context)}function te(e){xe(!1)}function Kv(e){let{basename:r="/",children:t=null,location:n,navigationType:s=Qr.Pop,navigator:l,static:a=!1,future:c}=e;co()&&xe(!1);let i=r.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:i,navigator:l,static:a,future:nn({v7_relativeSplatPath:!1},c)}),[i,c,l,a]);typeof n=="string"&&(n=io(n));let{pathname:u="/",search:m="",hash:f="",state:j=null,key:w="default"}=n,h=b.useMemo(()=>{let y=Vi(u,i);return y==null?null:{location:{pathname:y,search:m,hash:f,state:j,key:w},navigationType:s}},[i,u,m,f,j,w,s]);return h==null?null:b.createElement(ut.Provider,{value:d},b.createElement(qs.Provider,{children:t,value:h}))}function Jv(e){let{children:r,location:t}=e;return Iv(La(r),t)}new Promise(()=>{});function La(e,r){r===void 0&&(r=[]);let t=[];return b.Children.forEach(e,(n,s)=>{if(!b.isValidElement(n))return;let l=[...r,s];if(n.type===b.Fragment){t.push.apply(t,La(n.props.children,l));return}n.type!==te&&xe(!1),!n.props.index||!n.props.children||xe(!1);let a={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=La(n.props.children,l)),t.push(a)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ta(){return Ta=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ta.apply(this,arguments)}function Xv(e,r){if(e==null)return{};var t={},n=Object.keys(e),s,l;for(l=0;l<n.length;l++)s=n[l],!(r.indexOf(s)>=0)&&(t[s]=e[s]);return t}function Yv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Zv(e,r){return e.button===0&&(!r||r==="_self")&&!Yv(e)}function Ia(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((r,t)=>{let n=e[t];return r.concat(Array.isArray(n)?n.map(s=>[t,s]):[[t,n]])},[]))}function ex(e,r){let t=Ia(e);return r&&r.forEach((n,s)=>{t.has(s)||r.getAll(s).forEach(l=>{t.append(s,l)})}),t}const rx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],tx="6";try{window.__reactRouterVersion=tx}catch{}const ox="startTransition",jd=Wf[ox];function nx(e){let{basename:r,children:t,future:n,window:s}=e,l=b.useRef();l.current==null&&(l.current=tv({window:s,v5Compat:!0}));let a=l.current,[c,i]=b.useState({action:a.action,location:a.location}),{v7_startTransition:d}=n||{},u=b.useCallback(m=>{d&&jd?jd(()=>i(m)):i(m)},[i,d]);return b.useLayoutEffect(()=>a.listen(u),[a,u]),b.useEffect(()=>Gv(n),[n]),b.createElement(Kv,{basename:r,children:t,location:c.location,navigationType:c.action,navigator:a,future:n})}const sx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,J=b.forwardRef(function(r,t){let{onClick:n,relative:s,reloadDocument:l,replace:a,state:c,target:i,to:d,preventScrollReset:u,viewTransition:m}=r,f=Xv(r,rx),{basename:j}=b.useContext(ut),w,h=!1;if(typeof d=="string"&&lx.test(d)&&(w=d,sx))try{let x=new URL(window.location.href),k=d.startsWith("//")?new URL(x.protocol+d):new URL(d),C=Vi(k.pathname,j);k.origin===x.origin&&C!=null?d=C+k.search+k.hash:h=!0}catch{}let y=Pv(d,{relative:s}),g=ax(d,{replace:a,state:c,target:i,preventScrollReset:u,relative:s,viewTransition:m});function p(x){n&&n(x),x.defaultPrevented||g(x)}return b.createElement("a",Ta({},f,{href:w||y,onClick:h||l?n:p,ref:t,target:i}))});var Nd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Nd||(Nd={}));var Cd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Cd||(Cd={}));function ax(e,r){let{target:t,replace:n,state:s,preventScrollReset:l,relative:a,viewTransition:c}=r===void 0?{}:r,i=ue(),d=ht(),u=ym(e,{relative:a});return b.useCallback(m=>{if(Zv(m,t)){m.preventDefault();let f=n!==void 0?n:_s(d)===_s(u);i(e,{replace:f,state:s,preventScrollReset:l,relative:a,viewTransition:c})}},[d,i,u,n,s,t,e,l,a,c])}function Qi(e){let r=b.useRef(Ia(e)),t=b.useRef(!1),n=ht(),s=b.useMemo(()=>ex(n.search,t.current?null:r.current),[n.search]),l=ue(),a=b.useCallback((c,i)=>{const d=Ia(typeof c=="function"?c(s):c);t.current=!0,l("?"+d,i)},[l,s]);return[s,a]}function Nm(e,r){return function(){return e.apply(r,arguments)}}const{toString:ix}=Object.prototype,{getPrototypeOf:Ki}=Object,{iterator:Gs,toStringTag:Cm}=Symbol,Qs=(e=>r=>{const t=ix.call(r);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),wr=e=>(e=e.toLowerCase(),r=>Qs(r)===e),Ks=e=>r=>typeof r===e,{isArray:uo}=Array,to=Ks("undefined");function un(e){return e!==null&&!to(e)&&e.constructor!==null&&!to(e.constructor)&&qe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const km=wr("ArrayBuffer");function cx(e){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(e):r=e&&e.buffer&&km(e.buffer),r}const dx=Ks("string"),qe=Ks("function"),Sm=Ks("number"),hn=e=>e!==null&&typeof e=="object",ux=e=>e===!0||e===!1,Jn=e=>{if(Qs(e)!=="object")return!1;const r=Ki(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Cm in e)&&!(Gs in e)},hx=e=>{if(!hn(e)||un(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},mx=wr("Date"),fx=wr("File"),px=wr("Blob"),vx=wr("FileList"),xx=e=>hn(e)&&qe(e.pipe),gx=e=>{let r;return e&&(typeof FormData=="function"&&e instanceof FormData||qe(e.append)&&((r=Qs(e))==="formdata"||r==="object"&&qe(e.toString)&&e.toString()==="[object FormData]"))},yx=wr("URLSearchParams"),[bx,wx,jx,Nx]=["ReadableStream","Request","Response","Headers"].map(wr),Cx=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function mn(e,r,{allOwnKeys:t=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),uo(e))for(n=0,s=e.length;n<s;n++)r.call(null,e[n],n,e);else{if(un(e))return;const l=t?Object.getOwnPropertyNames(e):Object.keys(e),a=l.length;let c;for(n=0;n<a;n++)c=l[n],r.call(null,e[c],c,e)}}function Em(e,r){if(un(e))return null;r=r.toLowerCase();const t=Object.keys(e);let n=t.length,s;for(;n-- >0;)if(s=t[n],r===s.toLowerCase())return s;return null}const gt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_m=e=>!to(e)&&e!==gt;function Oa(){const{caseless:e,skipUndefined:r}=_m(this)&&this||{},t={},n=(s,l)=>{const a=e&&Em(t,l)||l;Jn(t[a])&&Jn(s)?t[a]=Oa(t[a],s):Jn(s)?t[a]=Oa({},s):uo(s)?t[a]=s.slice():(!r||!to(s))&&(t[a]=s)};for(let s=0,l=arguments.length;s<l;s++)arguments[s]&&mn(arguments[s],n);return t}const kx=(e,r,t,{allOwnKeys:n}={})=>(mn(r,(s,l)=>{t&&qe(s)?e[l]=Nm(s,t):e[l]=s},{allOwnKeys:n}),e),Sx=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Ex=(e,r,t,n)=>{e.prototype=Object.create(r.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:r.prototype}),t&&Object.assign(e.prototype,t)},_x=(e,r,t,n)=>{let s,l,a;const c={};if(r=r||{},e==null)return r;do{for(s=Object.getOwnPropertyNames(e),l=s.length;l-- >0;)a=s[l],(!n||n(a,e,r))&&!c[a]&&(r[a]=e[a],c[a]=!0);e=t!==!1&&Ki(e)}while(e&&(!t||t(e,r))&&e!==Object.prototype);return r},Rx=(e,r,t)=>{e=String(e),(t===void 0||t>e.length)&&(t=e.length),t-=r.length;const n=e.indexOf(r,t);return n!==-1&&n===t},Px=e=>{if(!e)return null;if(uo(e))return e;let r=e.length;if(!Sm(r))return null;const t=new Array(r);for(;r-- >0;)t[r]=e[r];return t},Ax=(e=>r=>e&&r instanceof e)(typeof Uint8Array<"u"&&Ki(Uint8Array)),Lx=(e,r)=>{const n=(e&&e[Gs]).call(e);let s;for(;(s=n.next())&&!s.done;){const l=s.value;r.call(e,l[0],l[1])}},Tx=(e,r)=>{let t;const n=[];for(;(t=e.exec(r))!==null;)n.push(t);return n},Ix=wr("HTMLFormElement"),Ox=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,s){return n.toUpperCase()+s}),kd=(({hasOwnProperty:e})=>(r,t)=>e.call(r,t))(Object.prototype),Dx=wr("RegExp"),Rm=(e,r)=>{const t=Object.getOwnPropertyDescriptors(e),n={};mn(t,(s,l)=>{let a;(a=r(s,l,e))!==!1&&(n[l]=a||s)}),Object.defineProperties(e,n)},zx=e=>{Rm(e,(r,t)=>{if(qe(e)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=e[t];if(qe(n)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Mx=(e,r)=>{const t={},n=s=>{s.forEach(l=>{t[l]=!0})};return uo(e)?n(e):n(String(e).split(r)),t},Fx=()=>{},Bx=(e,r)=>e!=null&&Number.isFinite(e=+e)?e:r;function Ux(e){return!!(e&&qe(e.append)&&e[Cm]==="FormData"&&e[Gs])}const $x=e=>{const r=new Array(10),t=(n,s)=>{if(hn(n)){if(r.indexOf(n)>=0)return;if(un(n))return n;if(!("toJSON"in n)){r[s]=n;const l=uo(n)?[]:{};return mn(n,(a,c)=>{const i=t(a,s+1);!to(i)&&(l[c]=i)}),r[s]=void 0,l}}return n};return t(e,0)},Vx=wr("AsyncFunction"),Wx=e=>e&&(hn(e)||qe(e))&&qe(e.then)&&qe(e.catch),Pm=((e,r)=>e?setImmediate:r?((t,n)=>(gt.addEventListener("message",({source:s,data:l})=>{s===gt&&l===t&&n.length&&n.shift()()},!1),s=>{n.push(s),gt.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",qe(gt.postMessage)),Hx=typeof queueMicrotask<"u"?queueMicrotask.bind(gt):typeof process<"u"&&process.nextTick||Pm,qx=e=>e!=null&&qe(e[Gs]),T={isArray:uo,isArrayBuffer:km,isBuffer:un,isFormData:gx,isArrayBufferView:cx,isString:dx,isNumber:Sm,isBoolean:ux,isObject:hn,isPlainObject:Jn,isEmptyObject:hx,isReadableStream:bx,isRequest:wx,isResponse:jx,isHeaders:Nx,isUndefined:to,isDate:mx,isFile:fx,isBlob:px,isRegExp:Dx,isFunction:qe,isStream:xx,isURLSearchParams:yx,isTypedArray:Ax,isFileList:vx,forEach:mn,merge:Oa,extend:kx,trim:Cx,stripBOM:Sx,inherits:Ex,toFlatObject:_x,kindOf:Qs,kindOfTest:wr,endsWith:Rx,toArray:Px,forEachEntry:Lx,matchAll:Tx,isHTMLForm:Ix,hasOwnProperty:kd,hasOwnProp:kd,reduceDescriptors:Rm,freezeMethods:zx,toObjectSet:Mx,toCamelCase:Ox,noop:Fx,toFiniteNumber:Bx,findKey:Em,global:gt,isContextDefined:_m,isSpecCompliantForm:Ux,toJSONObject:$x,isAsyncFn:Vx,isThenable:Wx,setImmediate:Pm,asap:Hx,isIterable:qx};function Y(e,r,t,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",r&&(this.code=r),t&&(this.config=t),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}T.inherits(Y,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:T.toJSONObject(this.config),code:this.code,status:this.status}}});const Am=Y.prototype,Lm={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Lm[e]={value:e}});Object.defineProperties(Y,Lm);Object.defineProperty(Am,"isAxiosError",{value:!0});Y.from=(e,r,t,n,s,l)=>{const a=Object.create(Am);T.toFlatObject(e,a,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const c=e&&e.message?e.message:"Error",i=r==null&&e?e.code:r;return Y.call(a,c,i,t,n,s),e&&a.cause==null&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",l&&Object.assign(a,l),a};const Gx=null;function Da(e){return T.isPlainObject(e)||T.isArray(e)}function Tm(e){return T.endsWith(e,"[]")?e.slice(0,-2):e}function Sd(e,r,t){return e?e.concat(r).map(function(s,l){return s=Tm(s),!t&&l?"["+s+"]":s}).join(t?".":""):r}function Qx(e){return T.isArray(e)&&!e.some(Da)}const Kx=T.toFlatObject(T,{},null,function(r){return/^is[A-Z]/.test(r)});function Js(e,r,t){if(!T.isObject(e))throw new TypeError("target must be an object");r=r||new FormData,t=T.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,y){return!T.isUndefined(y[h])});const n=t.metaTokens,s=t.visitor||u,l=t.dots,a=t.indexes,i=(t.Blob||typeof Blob<"u"&&Blob)&&T.isSpecCompliantForm(r);if(!T.isFunction(s))throw new TypeError("visitor must be a function");function d(w){if(w===null)return"";if(T.isDate(w))return w.toISOString();if(T.isBoolean(w))return w.toString();if(!i&&T.isBlob(w))throw new Y("Blob is not supported. Use a Buffer instead.");return T.isArrayBuffer(w)||T.isTypedArray(w)?i&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function u(w,h,y){let g=w;if(w&&!y&&typeof w=="object"){if(T.endsWith(h,"{}"))h=n?h:h.slice(0,-2),w=JSON.stringify(w);else if(T.isArray(w)&&Qx(w)||(T.isFileList(w)||T.endsWith(h,"[]"))&&(g=T.toArray(w)))return h=Tm(h),g.forEach(function(x,k){!(T.isUndefined(x)||x===null)&&r.append(a===!0?Sd([h],k,l):a===null?h:h+"[]",d(x))}),!1}return Da(w)?!0:(r.append(Sd(y,h,l),d(w)),!1)}const m=[],f=Object.assign(Kx,{defaultVisitor:u,convertValue:d,isVisitable:Da});function j(w,h){if(!T.isUndefined(w)){if(m.indexOf(w)!==-1)throw Error("Circular reference detected in "+h.join("."));m.push(w),T.forEach(w,function(g,p){(!(T.isUndefined(g)||g===null)&&s.call(r,g,T.isString(p)?p.trim():p,h,f))===!0&&j(g,h?h.concat(p):[p])}),m.pop()}}if(!T.isObject(e))throw new TypeError("data must be an object");return j(e),r}function Ed(e){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return r[n]})}function Ji(e,r){this._pairs=[],e&&Js(e,this,r)}const Im=Ji.prototype;Im.append=function(r,t){this._pairs.push([r,t])};Im.toString=function(r){const t=r?function(n){return r.call(this,n,Ed)}:Ed;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function Jx(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Om(e,r,t){if(!r)return e;const n=t&&t.encode||Jx;T.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let l;if(s?l=s(r,t):l=T.isURLSearchParams(r)?r.toString():new Ji(r,t).toString(n),l){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class _d{constructor(){this.handlers=[]}use(r,t,n){return this.handlers.push({fulfilled:r,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){T.forEach(this.handlers,function(n){n!==null&&r(n)})}}const Dm={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xx=typeof URLSearchParams<"u"?URLSearchParams:Ji,Yx=typeof FormData<"u"?FormData:null,Zx=typeof Blob<"u"?Blob:null,eg={isBrowser:!0,classes:{URLSearchParams:Xx,FormData:Yx,Blob:Zx},protocols:["http","https","file","blob","url","data"]},Xi=typeof window<"u"&&typeof document<"u",za=typeof navigator=="object"&&navigator||void 0,rg=Xi&&(!za||["ReactNative","NativeScript","NS"].indexOf(za.product)<0),tg=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",og=Xi&&window.location.href||"http://localhost",ng=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Xi,hasStandardBrowserEnv:rg,hasStandardBrowserWebWorkerEnv:tg,navigator:za,origin:og},Symbol.toStringTag,{value:"Module"})),Le={...ng,...eg};function sg(e,r){return Js(e,new Le.classes.URLSearchParams,{visitor:function(t,n,s,l){return Le.isNode&&T.isBuffer(t)?(this.append(n,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...r})}function lg(e){return T.matchAll(/\w+|\[(\w*)]/g,e).map(r=>r[0]==="[]"?"":r[1]||r[0])}function ag(e){const r={},t=Object.keys(e);let n;const s=t.length;let l;for(n=0;n<s;n++)l=t[n],r[l]=e[l];return r}function zm(e){function r(t,n,s,l){let a=t[l++];if(a==="__proto__")return!0;const c=Number.isFinite(+a),i=l>=t.length;return a=!a&&T.isArray(s)?s.length:a,i?(T.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!c):((!s[a]||!T.isObject(s[a]))&&(s[a]=[]),r(t,n,s[a],l)&&T.isArray(s[a])&&(s[a]=ag(s[a])),!c)}if(T.isFormData(e)&&T.isFunction(e.entries)){const t={};return T.forEachEntry(e,(n,s)=>{r(lg(n),s,t,0)}),t}return null}function ig(e,r,t){if(T.isString(e))try{return(r||JSON.parse)(e),T.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(e)}const fn={transitional:Dm,adapter:["xhr","http","fetch"],transformRequest:[function(r,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,l=T.isObject(r);if(l&&T.isHTMLForm(r)&&(r=new FormData(r)),T.isFormData(r))return s?JSON.stringify(zm(r)):r;if(T.isArrayBuffer(r)||T.isBuffer(r)||T.isStream(r)||T.isFile(r)||T.isBlob(r)||T.isReadableStream(r))return r;if(T.isArrayBufferView(r))return r.buffer;if(T.isURLSearchParams(r))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let c;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return sg(r,this.formSerializer).toString();if((c=T.isFileList(r))||n.indexOf("multipart/form-data")>-1){const i=this.env&&this.env.FormData;return Js(c?{"files[]":r}:r,i&&new i,this.formSerializer)}}return l||s?(t.setContentType("application/json",!1),ig(r)):r}],transformResponse:[function(r){const t=this.transitional||fn.transitional,n=t&&t.forcedJSONParsing,s=this.responseType==="json";if(T.isResponse(r)||T.isReadableStream(r))return r;if(r&&T.isString(r)&&(n&&!this.responseType||s)){const a=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(r,this.parseReviver)}catch(c){if(a)throw c.name==="SyntaxError"?Y.from(c,Y.ERR_BAD_RESPONSE,this,null,this.response):c}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Le.classes.FormData,Blob:Le.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};T.forEach(["delete","get","head","post","put","patch"],e=>{fn.headers[e]={}});const cg=T.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dg=e=>{const r={};let t,n,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),t=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!t||r[t]&&cg[t])&&(t==="set-cookie"?r[t]?r[t].push(n):r[t]=[n]:r[t]=r[t]?r[t]+", "+n:n)}),r},Rd=Symbol("internals");function jo(e){return e&&String(e).trim().toLowerCase()}function Xn(e){return e===!1||e==null?e:T.isArray(e)?e.map(Xn):String(e)}function ug(e){const r=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(e);)r[n[1]]=n[2];return r}const hg=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Al(e,r,t,n,s){if(T.isFunction(n))return n.call(this,r,t);if(s&&(r=t),!!T.isString(r)){if(T.isString(n))return r.indexOf(n)!==-1;if(T.isRegExp(n))return n.test(r)}}function mg(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,t,n)=>t.toUpperCase()+n)}function fg(e,r){const t=T.toCamelCase(" "+r);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+t,{value:function(s,l,a){return this[n].call(this,r,s,l,a)},configurable:!0})})}let Ge=class{constructor(r){r&&this.set(r)}set(r,t,n){const s=this;function l(c,i,d){const u=jo(i);if(!u)throw new Error("header name must be a non-empty string");const m=T.findKey(s,u);(!m||s[m]===void 0||d===!0||d===void 0&&s[m]!==!1)&&(s[m||i]=Xn(c))}const a=(c,i)=>T.forEach(c,(d,u)=>l(d,u,i));if(T.isPlainObject(r)||r instanceof this.constructor)a(r,t);else if(T.isString(r)&&(r=r.trim())&&!hg(r))a(dg(r),t);else if(T.isObject(r)&&T.isIterable(r)){let c={},i,d;for(const u of r){if(!T.isArray(u))throw TypeError("Object iterator must return a key-value pair");c[d=u[0]]=(i=c[d])?T.isArray(i)?[...i,u[1]]:[i,u[1]]:u[1]}a(c,t)}else r!=null&&l(t,r,n);return this}get(r,t){if(r=jo(r),r){const n=T.findKey(this,r);if(n){const s=this[n];if(!t)return s;if(t===!0)return ug(s);if(T.isFunction(t))return t.call(this,s,n);if(T.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,t){if(r=jo(r),r){const n=T.findKey(this,r);return!!(n&&this[n]!==void 0&&(!t||Al(this,this[n],n,t)))}return!1}delete(r,t){const n=this;let s=!1;function l(a){if(a=jo(a),a){const c=T.findKey(n,a);c&&(!t||Al(n,n[c],c,t))&&(delete n[c],s=!0)}}return T.isArray(r)?r.forEach(l):l(r),s}clear(r){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const l=t[n];(!r||Al(this,this[l],l,r,!0))&&(delete this[l],s=!0)}return s}normalize(r){const t=this,n={};return T.forEach(this,(s,l)=>{const a=T.findKey(n,l);if(a){t[a]=Xn(s),delete t[l];return}const c=r?mg(l):String(l).trim();c!==l&&delete t[l],t[c]=Xn(s),n[c]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const t=Object.create(null);return T.forEach(this,(n,s)=>{n!=null&&n!==!1&&(t[s]=r&&T.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,t])=>r+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...t){const n=new this(r);return t.forEach(s=>n.set(s)),n}static accessor(r){const n=(this[Rd]=this[Rd]={accessors:{}}).accessors,s=this.prototype;function l(a){const c=jo(a);n[c]||(fg(s,a),n[c]=!0)}return T.isArray(r)?r.forEach(l):l(r),this}};Ge.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);T.reduceDescriptors(Ge.prototype,({value:e},r)=>{let t=r[0].toUpperCase()+r.slice(1);return{get:()=>e,set(n){this[t]=n}}});T.freezeMethods(Ge);function Ll(e,r){const t=this||fn,n=r||t,s=Ge.from(n.headers);let l=n.data;return T.forEach(e,function(c){l=c.call(t,l,s.normalize(),r?r.status:void 0)}),s.normalize(),l}function Mm(e){return!!(e&&e.__CANCEL__)}function ho(e,r,t){Y.call(this,e??"canceled",Y.ERR_CANCELED,r,t),this.name="CanceledError"}T.inherits(ho,Y,{__CANCEL__:!0});function Fm(e,r,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?e(t):r(new Y("Request failed with status code "+t.status,[Y.ERR_BAD_REQUEST,Y.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function pg(e){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}function vg(e,r){e=e||10;const t=new Array(e),n=new Array(e);let s=0,l=0,a;return r=r!==void 0?r:1e3,function(i){const d=Date.now(),u=n[l];a||(a=d),t[s]=i,n[s]=d;let m=l,f=0;for(;m!==s;)f+=t[m++],m=m%e;if(s=(s+1)%e,s===l&&(l=(l+1)%e),d-a<r)return;const j=u&&d-u;return j?Math.round(f*1e3/j):void 0}}function xg(e,r){let t=0,n=1e3/r,s,l;const a=(d,u=Date.now())=>{t=u,s=null,l&&(clearTimeout(l),l=null),e(...d)};return[(...d)=>{const u=Date.now(),m=u-t;m>=n?a(d,u):(s=d,l||(l=setTimeout(()=>{l=null,a(s)},n-m)))},()=>s&&a(s)]}const Rs=(e,r,t=3)=>{let n=0;const s=vg(50,250);return xg(l=>{const a=l.loaded,c=l.lengthComputable?l.total:void 0,i=a-n,d=s(i),u=a<=c;n=a;const m={loaded:a,total:c,progress:c?a/c:void 0,bytes:i,rate:d||void 0,estimated:d&&c&&u?(c-a)/d:void 0,event:l,lengthComputable:c!=null,[r?"download":"upload"]:!0};e(m)},t)},Pd=(e,r)=>{const t=e!=null;return[n=>r[0]({lengthComputable:t,total:e,loaded:n}),r[1]]},Ad=e=>(...r)=>T.asap(()=>e(...r)),gg=Le.hasStandardBrowserEnv?((e,r)=>t=>(t=new URL(t,Le.origin),e.protocol===t.protocol&&e.host===t.host&&(r||e.port===t.port)))(new URL(Le.origin),Le.navigator&&/(msie|trident)/i.test(Le.navigator.userAgent)):()=>!0,yg=Le.hasStandardBrowserEnv?{write(e,r,t,n,s,l,a){if(typeof document>"u")return;const c=[`${e}=${encodeURIComponent(r)}`];T.isNumber(t)&&c.push(`expires=${new Date(t).toUTCString()}`),T.isString(n)&&c.push(`path=${n}`),T.isString(s)&&c.push(`domain=${s}`),l===!0&&c.push("secure"),T.isString(a)&&c.push(`SameSite=${a}`),document.cookie=c.join("; ")},read(e){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function bg(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function wg(e,r){return r?e.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):e}function Bm(e,r,t){let n=!bg(r);return e&&(n||t==!1)?wg(e,r):r}const Ld=e=>e instanceof Ge?{...e}:e;function Et(e,r){r=r||{};const t={};function n(d,u,m,f){return T.isPlainObject(d)&&T.isPlainObject(u)?T.merge.call({caseless:f},d,u):T.isPlainObject(u)?T.merge({},u):T.isArray(u)?u.slice():u}function s(d,u,m,f){if(T.isUndefined(u)){if(!T.isUndefined(d))return n(void 0,d,m,f)}else return n(d,u,m,f)}function l(d,u){if(!T.isUndefined(u))return n(void 0,u)}function a(d,u){if(T.isUndefined(u)){if(!T.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function c(d,u,m){if(m in r)return n(d,u);if(m in e)return n(void 0,d)}const i={url:l,method:l,data:l,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(d,u,m)=>s(Ld(d),Ld(u),m,!0)};return T.forEach(Object.keys({...e,...r}),function(u){const m=i[u]||s,f=m(e[u],r[u],u);T.isUndefined(f)&&m!==c||(t[u]=f)}),t}const Um=e=>{const r=Et({},e);let{data:t,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:l,headers:a,auth:c}=r;if(r.headers=a=Ge.from(a),r.url=Om(Bm(r.baseURL,r.url,r.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),T.isFormData(t)){if(Le.hasStandardBrowserEnv||Le.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(T.isFunction(t.getHeaders)){const i=t.getHeaders(),d=["content-type","content-length"];Object.entries(i).forEach(([u,m])=>{d.includes(u.toLowerCase())&&a.set(u,m)})}}if(Le.hasStandardBrowserEnv&&(n&&T.isFunction(n)&&(n=n(r)),n||n!==!1&&gg(r.url))){const i=s&&l&&yg.read(l);i&&a.set(s,i)}return r},jg=typeof XMLHttpRequest<"u",Ng=jg&&function(e){return new Promise(function(t,n){const s=Um(e);let l=s.data;const a=Ge.from(s.headers).normalize();let{responseType:c,onUploadProgress:i,onDownloadProgress:d}=s,u,m,f,j,w;function h(){j&&j(),w&&w(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(s.method.toUpperCase(),s.url,!0),y.timeout=s.timeout;function g(){if(!y)return;const x=Ge.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),C={data:!c||c==="text"||c==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:x,config:e,request:y};Fm(function(P){t(P),h()},function(P){n(P),h()},C),y=null}"onloadend"in y?y.onloadend=g:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(g)},y.onabort=function(){y&&(n(new Y("Request aborted",Y.ECONNABORTED,e,y)),y=null)},y.onerror=function(k){const C=k&&k.message?k.message:"Network Error",E=new Y(C,Y.ERR_NETWORK,e,y);E.event=k||null,n(E),y=null},y.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const C=s.transitional||Dm;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),n(new Y(k,C.clarifyTimeoutError?Y.ETIMEDOUT:Y.ECONNABORTED,e,y)),y=null},l===void 0&&a.setContentType(null),"setRequestHeader"in y&&T.forEach(a.toJSON(),function(k,C){y.setRequestHeader(C,k)}),T.isUndefined(s.withCredentials)||(y.withCredentials=!!s.withCredentials),c&&c!=="json"&&(y.responseType=s.responseType),d&&([f,w]=Rs(d,!0),y.addEventListener("progress",f)),i&&y.upload&&([m,j]=Rs(i),y.upload.addEventListener("progress",m),y.upload.addEventListener("loadend",j)),(s.cancelToken||s.signal)&&(u=x=>{y&&(n(!x||x.type?new ho(null,e,y):x),y.abort(),y=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const p=pg(s.url);if(p&&Le.protocols.indexOf(p)===-1){n(new Y("Unsupported protocol "+p+":",Y.ERR_BAD_REQUEST,e));return}y.send(l||null)})},Cg=(e,r)=>{const{length:t}=e=e?e.filter(Boolean):[];if(r||t){let n=new AbortController,s;const l=function(d){if(!s){s=!0,c();const u=d instanceof Error?d:this.reason;n.abort(u instanceof Y?u:new ho(u instanceof Error?u.message:u))}};let a=r&&setTimeout(()=>{a=null,l(new Y(`timeout ${r} of ms exceeded`,Y.ETIMEDOUT))},r);const c=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(l):d.removeEventListener("abort",l)}),e=null)};e.forEach(d=>d.addEventListener("abort",l));const{signal:i}=n;return i.unsubscribe=()=>T.asap(c),i}},kg=function*(e,r){let t=e.byteLength;if(t<r){yield e;return}let n=0,s;for(;n<t;)s=n+r,yield e.slice(n,s),n=s},Sg=async function*(e,r){for await(const t of Eg(e))yield*kg(t,r)},Eg=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const r=e.getReader();try{for(;;){const{done:t,value:n}=await r.read();if(t)break;yield n}}finally{await r.cancel()}},Td=(e,r,t,n)=>{const s=Sg(e,r);let l=0,a,c=i=>{a||(a=!0,n&&n(i))};return new ReadableStream({async pull(i){try{const{done:d,value:u}=await s.next();if(d){c(),i.close();return}let m=u.byteLength;if(t){let f=l+=m;t(f)}i.enqueue(new Uint8Array(u))}catch(d){throw c(d),d}},cancel(i){return c(i),s.return()}},{highWaterMark:2})},Id=64*1024,{isFunction:Ln}=T,_g=(({Request:e,Response:r})=>({Request:e,Response:r}))(T.global),{ReadableStream:Od,TextEncoder:Dd}=T.global,zd=(e,...r)=>{try{return!!e(...r)}catch{return!1}},Rg=e=>{e=T.merge.call({skipUndefined:!0},_g,e);const{fetch:r,Request:t,Response:n}=e,s=r?Ln(r):typeof fetch=="function",l=Ln(t),a=Ln(n);if(!s)return!1;const c=s&&Ln(Od),i=s&&(typeof Dd=="function"?(w=>h=>w.encode(h))(new Dd):async w=>new Uint8Array(await new t(w).arrayBuffer())),d=l&&c&&zd(()=>{let w=!1;const h=new t(Le.origin,{body:new Od,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!h}),u=a&&c&&zd(()=>T.isReadableStream(new n("").body)),m={stream:u&&(w=>w.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!m[w]&&(m[w]=(h,y)=>{let g=h&&h[w];if(g)return g.call(h);throw new Y(`Response type '${w}' is not supported`,Y.ERR_NOT_SUPPORT,y)})});const f=async w=>{if(w==null)return 0;if(T.isBlob(w))return w.size;if(T.isSpecCompliantForm(w))return(await new t(Le.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(T.isArrayBufferView(w)||T.isArrayBuffer(w))return w.byteLength;if(T.isURLSearchParams(w)&&(w=w+""),T.isString(w))return(await i(w)).byteLength},j=async(w,h)=>{const y=T.toFiniteNumber(w.getContentLength());return y??f(h)};return async w=>{let{url:h,method:y,data:g,signal:p,cancelToken:x,timeout:k,onDownloadProgress:C,onUploadProgress:E,responseType:P,headers:L,withCredentials:H="same-origin",fetchOptions:B}=Um(w),X=r||fetch;P=P?(P+"").toLowerCase():"text";let D=Cg([p,x&&x.toAbortSignal()],k),R=null;const V=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let O;try{if(E&&d&&y!=="get"&&y!=="head"&&(O=await j(L,g))!==0){let v=new t(h,{method:"POST",body:g,duplex:"half"}),A;if(T.isFormData(g)&&(A=v.headers.get("content-type"))&&L.setContentType(A),v.body){const[U,_]=Pd(O,Rs(Ad(E)));g=Td(v.body,Id,U,_)}}T.isString(H)||(H=H?"include":"omit");const G=l&&"credentials"in t.prototype,F={...B,signal:D,method:y.toUpperCase(),headers:L.normalize().toJSON(),body:g,duplex:"half",credentials:G?H:void 0};R=l&&new t(h,F);let S=await(l?X(R,B):X(h,F));const N=u&&(P==="stream"||P==="response");if(u&&(C||N&&V)){const v={};["status","statusText","headers"].forEach(M=>{v[M]=S[M]});const A=T.toFiniteNumber(S.headers.get("content-length")),[U,_]=C&&Pd(A,Rs(Ad(C),!0))||[];S=new n(Td(S.body,Id,U,()=>{_&&_(),V&&V()}),v)}P=P||"text";let I=await m[T.findKey(m,P)||"text"](S,w);return!N&&V&&V(),await new Promise((v,A)=>{Fm(v,A,{data:I,headers:Ge.from(S.headers),status:S.status,statusText:S.statusText,config:w,request:R})})}catch(G){throw V&&V(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new Y("Network Error",Y.ERR_NETWORK,w,R),{cause:G.cause||G}):Y.from(G,G&&G.code,w,R)}}},Pg=new Map,$m=e=>{let r=e&&e.env||{};const{fetch:t,Request:n,Response:s}=r,l=[n,s,t];let a=l.length,c=a,i,d,u=Pg;for(;c--;)i=l[c],d=u.get(i),d===void 0&&u.set(i,d=c?new Map:Rg(r)),u=d;return d};$m();const Yi={http:Gx,xhr:Ng,fetch:{get:$m}};T.forEach(Yi,(e,r)=>{if(e){try{Object.defineProperty(e,"name",{value:r})}catch{}Object.defineProperty(e,"adapterName",{value:r})}});const Md=e=>`- ${e}`,Ag=e=>T.isFunction(e)||e===null||e===!1;function Lg(e,r){e=T.isArray(e)?e:[e];const{length:t}=e;let n,s;const l={};for(let a=0;a<t;a++){n=e[a];let c;if(s=n,!Ag(n)&&(s=Yi[(c=String(n)).toLowerCase()],s===void 0))throw new Y(`Unknown adapter '${c}'`);if(s&&(T.isFunction(s)||(s=s.get(r))))break;l[c||"#"+a]=s}if(!s){const a=Object.entries(l).map(([i,d])=>`adapter ${i} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=t?a.length>1?`since :
`+a.map(Md).join(`
`):" "+Md(a[0]):"as no adapter specified";throw new Y("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s}const Vm={getAdapter:Lg,adapters:Yi};function Tl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ho(null,e)}function Fd(e){return Tl(e),e.headers=Ge.from(e.headers),e.data=Ll.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Vm.getAdapter(e.adapter||fn.adapter,e)(e).then(function(n){return Tl(e),n.data=Ll.call(e,e.transformResponse,n),n.headers=Ge.from(n.headers),n},function(n){return Mm(n)||(Tl(e),n&&n.response&&(n.response.data=Ll.call(e,e.transformResponse,n.response),n.response.headers=Ge.from(n.response.headers))),Promise.reject(n)})}const Wm="1.13.2",Xs={};["object","boolean","number","function","string","symbol"].forEach((e,r)=>{Xs[e]=function(n){return typeof n===e||"a"+(r<1?"n ":" ")+e}});const Bd={};Xs.transitional=function(r,t,n){function s(l,a){return"[Axios v"+Wm+"] Transitional option '"+l+"'"+a+(n?". "+n:"")}return(l,a,c)=>{if(r===!1)throw new Y(s(a," has been removed"+(t?" in "+t:"")),Y.ERR_DEPRECATED);return t&&!Bd[a]&&(Bd[a]=!0,console.warn(s(a," has been deprecated since v"+t+" and will be removed in the near future"))),r?r(l,a,c):!0}};Xs.spelling=function(r){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${r}`),!0)};function Tg(e,r,t){if(typeof e!="object")throw new Y("options must be an object",Y.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const l=n[s],a=r[l];if(a){const c=e[l],i=c===void 0||a(c,l,e);if(i!==!0)throw new Y("option "+l+" must be "+i,Y.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Y("Unknown option "+l,Y.ERR_BAD_OPTION)}}const Yn={assertOptions:Tg,validators:Xs},Nr=Yn.validators;let wt=class{constructor(r){this.defaults=r||{},this.interceptors={request:new _d,response:new _d}}async request(r,t){try{return await this._request(r,t)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const l=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(r,t){typeof r=="string"?(t=t||{},t.url=r):t=r||{},t=Et(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:l}=t;n!==void 0&&Yn.assertOptions(n,{silentJSONParsing:Nr.transitional(Nr.boolean),forcedJSONParsing:Nr.transitional(Nr.boolean),clarifyTimeoutError:Nr.transitional(Nr.boolean)},!1),s!=null&&(T.isFunction(s)?t.paramsSerializer={serialize:s}:Yn.assertOptions(s,{encode:Nr.function,serialize:Nr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Yn.assertOptions(t,{baseUrl:Nr.spelling("baseURL"),withXsrfToken:Nr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=l&&T.merge(l.common,l[t.method]);l&&T.forEach(["delete","get","head","post","put","patch","common"],w=>{delete l[w]}),t.headers=Ge.concat(a,l);const c=[];let i=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(t)===!1||(i=i&&h.synchronous,c.unshift(h.fulfilled,h.rejected))});const d=[];this.interceptors.response.forEach(function(h){d.push(h.fulfilled,h.rejected)});let u,m=0,f;if(!i){const w=[Fd.bind(this),void 0];for(w.unshift(...c),w.push(...d),f=w.length,u=Promise.resolve(t);m<f;)u=u.then(w[m++],w[m++]);return u}f=c.length;let j=t;for(;m<f;){const w=c[m++],h=c[m++];try{j=w(j)}catch(y){h.call(this,y);break}}try{u=Fd.call(this,j)}catch(w){return Promise.reject(w)}for(m=0,f=d.length;m<f;)u=u.then(d[m++],d[m++]);return u}getUri(r){r=Et(this.defaults,r);const t=Bm(r.baseURL,r.url,r.allowAbsoluteUrls);return Om(t,r.params,r.paramsSerializer)}};T.forEach(["delete","get","head","options"],function(r){wt.prototype[r]=function(t,n){return this.request(Et(n||{},{method:r,url:t,data:(n||{}).data}))}});T.forEach(["post","put","patch"],function(r){function t(n){return function(l,a,c){return this.request(Et(c||{},{method:r,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:a}))}}wt.prototype[r]=t(),wt.prototype[r+"Form"]=t(!0)});let Ig=class Hm{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const n=this;this.promise.then(s=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](s);n._listeners=null}),this.promise.then=s=>{let l;const a=new Promise(c=>{n.subscribe(c),l=c}).then(s);return a.cancel=function(){n.unsubscribe(l)},a},r(function(l,a,c){n.reason||(n.reason=new ho(l,a,c),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const t=this._listeners.indexOf(r);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const r=new AbortController,t=n=>{r.abort(n)};return this.subscribe(t),r.signal.unsubscribe=()=>this.unsubscribe(t),r.signal}static source(){let r;return{token:new Hm(function(s){r=s}),cancel:r}}};function Og(e){return function(t){return e.apply(null,t)}}function Dg(e){return T.isObject(e)&&e.isAxiosError===!0}const Ma={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ma).forEach(([e,r])=>{Ma[r]=e});function qm(e){const r=new wt(e),t=Nm(wt.prototype.request,r);return T.extend(t,wt.prototype,r,{allOwnKeys:!0}),T.extend(t,r,null,{allOwnKeys:!0}),t.create=function(s){return qm(Et(e,s))},t}const ge=qm(fn);ge.Axios=wt;ge.CanceledError=ho;ge.CancelToken=Ig;ge.isCancel=Mm;ge.VERSION=Wm;ge.toFormData=Js;ge.AxiosError=Y;ge.Cancel=ge.CanceledError;ge.all=function(r){return Promise.all(r)};ge.spread=Og;ge.isAxiosError=Dg;ge.mergeConfig=Et;ge.AxiosHeaders=Ge;ge.formToJSON=e=>zm(T.isHTMLForm(e)?new FormData(e):e);ge.getAdapter=Vm.getAdapter;ge.HttpStatusCode=Ma;ge.default=ge;const{Axios:kb,AxiosError:Sb,CanceledError:Eb,isCancel:_b,CancelToken:Rb,VERSION:Pb,all:Ab,Cancel:Lb,isAxiosError:Tb,spread:Ib,toFormData:Ob,AxiosHeaders:Db,HttpStatusCode:zb,formToJSON:Mb,getAdapter:Fb,mergeConfig:Bb}=ge,zg={},Ud=e=>{let r;const t=new Set,n=(u,m)=>{const f=typeof u=="function"?u(r):u;if(!Object.is(f,r)){const j=r;r=m??(typeof f!="object"||f===null)?f:Object.assign({},r,f),t.forEach(w=>w(r,j))}},s=()=>r,i={setState:n,getState:s,getInitialState:()=>d,subscribe:u=>(t.add(u),()=>t.delete(u)),destroy:()=>{(zg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},d=r=e(n,s,i);return i},Mg=e=>e?Ud(e):Ud;var Gm={exports:{}},Qm={},Km={exports:{}},Jm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oo=b;function Fg(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Bg=typeof Object.is=="function"?Object.is:Fg,Ug=oo.useState,$g=oo.useEffect,Vg=oo.useLayoutEffect,Wg=oo.useDebugValue;function Hg(e,r){var t=r(),n=Ug({inst:{value:t,getSnapshot:r}}),s=n[0].inst,l=n[1];return Vg(function(){s.value=t,s.getSnapshot=r,Il(s)&&l({inst:s})},[e,t,r]),$g(function(){return Il(s)&&l({inst:s}),e(function(){Il(s)&&l({inst:s})})},[e]),Wg(t),t}function Il(e){var r=e.getSnapshot;e=e.value;try{var t=r();return!Bg(e,t)}catch{return!0}}function qg(e,r){return r()}var Gg=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?qg:Hg;Jm.useSyncExternalStore=oo.useSyncExternalStore!==void 0?oo.useSyncExternalStore:Gg;Km.exports=Jm;var Qg=Km.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ys=b,Kg=Qg;function Jg(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Xg=typeof Object.is=="function"?Object.is:Jg,Yg=Kg.useSyncExternalStore,Zg=Ys.useRef,ey=Ys.useEffect,ry=Ys.useMemo,ty=Ys.useDebugValue;Qm.useSyncExternalStoreWithSelector=function(e,r,t,n,s){var l=Zg(null);if(l.current===null){var a={hasValue:!1,value:null};l.current=a}else a=l.current;l=ry(function(){function i(j){if(!d){if(d=!0,u=j,j=n(j),s!==void 0&&a.hasValue){var w=a.value;if(s(w,j))return m=w}return m=j}if(w=m,Xg(u,j))return w;var h=n(j);return s!==void 0&&s(w,h)?(u=j,w):(u=j,m=h)}var d=!1,u,m,f=t===void 0?null:t;return[function(){return i(r())},f===null?void 0:function(){return i(f())}]},[r,t,n,s]);var c=Yg(e,l[0],l[1]);return ey(function(){a.hasValue=!0,a.value=c},[c]),ty(c),c};Gm.exports=Qm;var oy=Gm.exports;const ny=Ga(oy),Xm={},{useDebugValue:sy}=ne,{useSyncExternalStoreWithSelector:ly}=ny;let $d=!1;const ay=e=>e;function iy(e,r=ay,t){(Xm?"production":void 0)!=="production"&&t&&!$d&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),$d=!0);const n=ly(e.subscribe,e.getState,e.getServerState||e.getInitialState,r,t);return sy(n),n}const Vd=e=>{(Xm?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const r=typeof e=="function"?Mg(e):e,t=(n,s)=>iy(r,n,s);return Object.assign(t,r),t},cy=e=>e?Vd(e):Vd,Z=cy(e=>({token:localStorage.getItem("token"),user:null,setToken:r=>{r?localStorage.setItem("token",r):localStorage.removeItem("token"),e({token:r})},setUser:r=>e({user:r}),logout:()=>{localStorage.removeItem("token"),e({token:null,user:null})}})),z=ge.create({baseURL:"http://localhost:5000/api"});z.interceptors.request.use(e=>{const r=Z.getState().token;return r&&(e.headers=e.headers||{},e.headers.Authorization=`Bearer ${r}`),e});function dy(){const[e,r]=b.useState(""),[t,n]=b.useState(""),[s,l]=b.useState(!1),[a,c]=b.useState(null),i=Z(f=>f.setToken),d=Z(f=>f.setUser),u=ue(),m=async f=>{var j,w,h;f.preventDefault(),l(!0),c(null);try{const y=await z.post("/auth/login",{email:e,password:t});i(y.data.token),d(y.data.user);const g=((j=y.data.user)==null?void 0:j.role)||"client";g==="admin"?u("/admin",{replace:!0}):g==="garagiste"?u("/garage",{replace:!0}):u("/app",{replace:!0})}catch(y){c(((h=(w=y.response)==null?void 0:w.data)==null?void 0:h.message)||"Erreur de connexion")}finally{l(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 animate-fadeIn",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsxs("div",{className:"w-full max-w-md bg-white/90 backdrop-blur-md rounded-2xl shadow-2xl p-6 sm:p-8 border animate-slideIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2",style:{background:"linear-gradient(to right, var(--color-rouge-600), var(--color-rose-600))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Promoto"}),o.jsx("p",{className:"text-sm sm:text-base",style:{color:"var(--color-noir-600)"},children:"Connectez-vous  votre compte"})]}),o.jsxs("form",{onSubmit:m,className:"space-y-4 sm:space-y-5",children:[o.jsx("div",{children:o.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:f=>r(f.target.value),required:!0,className:"w-full px-4 py-2.5 sm:py-3 rounded-lg border-2 outline-none transition-all duration-300 text-sm sm:text-base focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:f=>{f.target.style.borderColor="var(--color-rouge-500)",f.target.style.boxShadow="0 0 0 3px rgba(220, 38, 38, 0.1)"},onBlur:f=>{f.target.style.borderColor="var(--color-racine-200)",f.target.style.boxShadow="none"}})}),o.jsx("div",{children:o.jsx("input",{type:"password",placeholder:"Mot de passe",value:t,onChange:f=>n(f.target.value),required:!0,className:"w-full px-4 py-2.5 sm:py-3 rounded-lg border-2 outline-none transition-all duration-300 text-sm sm:text-base focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:f=>{f.target.style.borderColor="var(--color-rouge-500)",f.target.style.boxShadow="0 0 0 3px rgba(220, 38, 38, 0.1)"},onBlur:f=>{f.target.style.borderColor="var(--color-racine-200)",f.target.style.boxShadow="none"}})}),a&&o.jsx("div",{className:"px-4 py-3 rounded-lg border text-sm sm:text-base",style:{backgroundColor:"var(--color-rouge-50)",borderColor:"var(--color-rouge-200)",color:"var(--color-rouge-700)"},children:a}),o.jsx("button",{disabled:s,type:"submit",className:"w-full text-white font-semibold py-2.5 sm:py-3 rounded-lg shadow-md hover:shadow-xl transition-all duration-300 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed hover:scale-[1.02] active:scale-[0.98] relative overflow-hidden",style:{background:s?"var(--color-rouge-400)":"linear-gradient(to right, var(--color-rouge-600), var(--color-rose-600))"},children:o.jsx("span",{className:"relative z-10",children:s?"Connexion...":"Se connecter"})}),o.jsxs("div",{className:"text-center text-xs sm:text-sm",style:{color:"var(--color-noir-600)"},children:["Pas de compte ?"," ",o.jsx(J,{to:"/register",className:"font-semibold underline",style:{color:"var(--color-rouge-600)"},children:"Crer un compte"})]})]})]})})}function uy(){const[e,r]=b.useState(""),[t,n]=b.useState(""),[s,l]=b.useState(""),[a,c]=b.useState(""),[i,d]=b.useState(!1),[u,m]=b.useState(null),f=Z(y=>y.setToken),j=Z(y=>y.setUser),w=ue(),h=async y=>{var g,p,x;y.preventDefault(),d(!0),m(null);try{const k=await z.post("/auth/register",{name:e,email:t,password:s,phone:a||void 0});f(k.data.token),j(k.data.user);const C=((g=k.data.user)==null?void 0:g.role)||"client";C==="admin"?w("/admin",{replace:!0}):C==="garagiste"?w("/garage",{replace:!0}):w("/app",{replace:!0})}catch(k){m(((x=(p=k.response)==null?void 0:p.data)==null?void 0:x.message)||"Erreur d'inscription")}finally{d(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8 sm:py-12 animate-fadeIn",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsxs("div",{className:"w-full max-w-md bg-white/90 backdrop-blur-md rounded-2xl shadow-2xl p-6 sm:p-8 border animate-slideIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2",style:{background:"linear-gradient(to right, var(--color-rose-600), var(--color-rouge-600))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Crer un compte"}),o.jsx("p",{className:"text-sm sm:text-base",style:{color:"var(--color-noir-600)"},children:"Rejoignez Promoto"})]}),o.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o.jsx("div",{children:o.jsx("input",{type:"text",placeholder:"Nom complet",value:e,onChange:y=>r(y.target.value),required:!0,className:"w-full px-4 py-2.5 sm:py-3 rounded-lg border-2 outline-none transition-all duration-300 text-sm sm:text-base focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:y=>{y.target.style.borderColor="var(--color-rose-500)",y.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:y=>{y.target.style.borderColor="var(--color-racine-200)",y.target.style.boxShadow="none"}})}),o.jsx("div",{children:o.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:y=>n(y.target.value),required:!0,className:"w-full px-4 py-2.5 sm:py-3 rounded-lg border-2 outline-none transition-all duration-300 text-sm sm:text-base focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:y=>{y.target.style.borderColor="var(--color-rose-500)",y.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:y=>{y.target.style.borderColor="var(--color-racine-200)",y.target.style.boxShadow="none"}})}),o.jsx("div",{children:o.jsx("input",{type:"password",placeholder:"Mot de passe",value:s,onChange:y=>l(y.target.value),required:!0,className:"w-full px-4 py-2.5 sm:py-3 rounded-lg border-2 outline-none transition-all duration-300 text-sm sm:text-base focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:y=>{y.target.style.borderColor="var(--color-rose-500)",y.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:y=>{y.target.style.borderColor="var(--color-racine-200)",y.target.style.boxShadow="none"}})}),o.jsx("div",{children:o.jsx("input",{type:"tel",placeholder:"Tlphone (optionnel)",value:a,onChange:y=>c(y.target.value),className:"w-full px-4 py-2.5 sm:py-3 rounded-lg border-2 outline-none transition-all duration-300 text-sm sm:text-base focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:y=>{y.target.style.borderColor="var(--color-rose-500)",y.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:y=>{y.target.style.borderColor="var(--color-racine-200)",y.target.style.boxShadow="none"}})}),u&&o.jsx("div",{className:"px-4 py-3 rounded-lg border text-sm sm:text-base",style:{backgroundColor:"var(--color-rouge-50)",borderColor:"var(--color-rouge-200)",color:"var(--color-rouge-700)"},children:u}),o.jsx("button",{disabled:i,type:"submit",className:"w-full text-white font-semibold py-2.5 sm:py-3 rounded-lg shadow-md hover:shadow-xl transition-all duration-300 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed hover:scale-[1.02] active:scale-[0.98] relative overflow-hidden",style:{background:i?"var(--color-rose-400)":"linear-gradient(to right, var(--color-rose-600), var(--color-rouge-600))"},children:o.jsx("span",{className:"relative z-10",children:i?"Cration...":"S'inscrire"})}),o.jsxs("div",{className:"text-center text-xs sm:text-sm",style:{color:"var(--color-noir-600)"},children:["Dj un compte ?"," ",o.jsx(J,{to:"/login",className:"font-semibold underline",style:{color:"var(--color-rouge-600)"},children:"Se connecter"})]})]})]})})}function hy(){const[e,r]=b.useState(null),[t,n]=b.useState(null),[s,l]=b.useState(!0);b.useEffect(()=>{a()},[]);const a=async()=>{var u,m;try{const f=await z.get("/admin/dashboard");r(f.data.stats)}catch(f){n(((m=(u=f.response)==null?void 0:u.data)==null?void 0:m.message)||"Erreur")}finally{l(!1)}},c=async u=>{var m,f;try{await z.put(`/admin/garages/${u}/verify`),a()}catch(j){alert(((f=(m=j.response)==null?void 0:m.data)==null?void 0:f.message)||"Erreur")}};if(s)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})});if(t)return o.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:["Erreur: ",t]});if(!e)return null;const i=[{title:"Total Utilisateurs",value:e.users.total,icon:"",color:"rouge",subtitle:`${e.users.clients} clients, ${e.users.garagistes} garagistes`,growth:e.users.growth},{title:"Garages",value:e.garages.total,icon:"",color:"rose",subtitle:`${e.garages.active} actifs, ${e.garages.verified} vrifis`,growth:e.garages.growth},{title:"Rendez-vous",value:e.appointments.total,icon:"",color:"racine",subtitle:`${e.appointments.byStatus.pending} en attente`,growth:e.appointments.growth},{title:"Avis",value:e.reviews.total,icon:"",color:"rouge",subtitle:`Note moyenne: ${e.reviews.averageRating.toFixed(1)}/5`,growth:e.reviews.growth}],d=u=>u?o.jsxs("div",{className:"flex items-center gap-2 text-xs mt-1",children:[o.jsxs("span",{className:"text-green-600",children:["+",u.today," aujourd'hui"]}),o.jsx("span",{style:{color:"var(--color-noir-400)"},children:""}),o.jsxs("span",{style:{color:"var(--color-noir-500)"},children:["+",u.last7Days," cette semaine"]})]}):null;return o.jsxs("div",{className:"animate-fadeIn",children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-6",style:{color:"var(--color-noir)"},children:"Dashboard"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:i.map((u,m)=>o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-5 sm:p-6 shadow-xl border hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 animate-fadeIn",style:{borderColor:`var(--color-${u.color}-200)`},children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:"text-3xl",children:u.icon}),o.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-xl font-bold",style:{backgroundColor:`var(--color-${u.color}-100)`,color:`var(--color-${u.color}-600)`},children:u.value})]}),o.jsx("h3",{className:"text-sm font-semibold mb-1",style:{color:"var(--color-noir-700)"},children:u.title}),o.jsx("p",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:u.subtitle}),d(u.growth)]},m))}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[o.jsxs(J,{to:"/admin/appointments",className:"bg-white/90 backdrop-blur-md rounded-xl p-5 shadow-xl border hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 animate-fadeIn cursor-pointer",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:"var(--color-rouge-100)"},children:o.jsx("svg",{className:"w-6 h-6",style:{color:"var(--color-rouge-600)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),o.jsx("span",{className:"font-semibold text-sm",style:{color:"var(--color-noir)"},children:"Rendez-vous"})]}),o.jsxs("p",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:[e.appointments.byStatus.pending," en attente"]})]}),o.jsxs(J,{to:"/admin/reviews",className:"bg-white/90 backdrop-blur-md rounded-xl p-5 shadow-xl border hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 animate-fadeIn cursor-pointer",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:"var(--color-rose-100)"},children:o.jsx("svg",{className:"w-6 h-6",style:{color:"var(--color-rose-600)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),o.jsx("span",{className:"font-semibold text-sm",style:{color:"var(--color-noir)"},children:"Avis"})]}),o.jsxs("p",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:[e.reviews.total," avis au total"]})]}),o.jsxs(J,{to:"/admin/services",className:"bg-white/90 backdrop-blur-md rounded-xl p-5 shadow-xl border hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 animate-fadeIn cursor-pointer",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:"var(--color-racine-100)"},children:o.jsx("svg",{className:"w-6 h-6",style:{color:"var(--color-racine-600)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),o.jsx("span",{className:"font-semibold text-sm",style:{color:"var(--color-noir)"},children:"Services"})]}),o.jsxs("p",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:[e.services.active," actifs"]})]}),o.jsxs(J,{to:"/admin/analytics",className:"bg-white/90 backdrop-blur-md rounded-xl p-5 shadow-xl border hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 animate-fadeIn cursor-pointer",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:"var(--color-rose-100)"},children:o.jsx("svg",{className:"w-6 h-6",style:{color:"var(--color-rose-600)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),o.jsx("span",{className:"font-semibold text-sm",style:{color:"var(--color-noir)"},children:"Analytics"})]}),o.jsx("p",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:"Rapports dtaills"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border hover:shadow-2xl transition-all duration-300 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:"var(--color-noir)"},children:"Rpartition Utilisateurs"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:"Clients"}),o.jsx("span",{className:"font-semibold",style:{color:"var(--color-rouge-600)"},children:e.users.clients})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:"Garagistes"}),o.jsx("span",{className:"font-semibold",style:{color:"var(--color-rose-600)"},children:e.users.garagistes})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:"Admins"}),o.jsx("span",{className:"font-semibold",style:{color:"var(--color-racine-600)"},children:e.users.admins})]})]})]}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border hover:shadow-2xl transition-all duration-300 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:"var(--color-noir)"},children:"Statistiques Garages"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:"Total"}),o.jsx("span",{className:"font-semibold",style:{color:"var(--color-noir)"},children:e.garages.total})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:"Actifs"}),o.jsx("span",{className:"font-semibold",style:{color:"var(--color-rouge-600)"},children:e.garages.active})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:"Vrifis"}),o.jsx("span",{className:"font-semibold",style:{color:"var(--color-rose-600)"},children:e.garages.verified})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:"Non vrifis"}),o.jsx("span",{className:"font-semibold",style:{color:"var(--color-noir-400)"},children:e.garages.unverified})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border hover:shadow-2xl transition-all duration-300 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-bold",style:{color:"var(--color-noir)"},children:"Rendez-vous rcents"}),o.jsx(J,{to:"/admin/appointments",className:"text-xs font-semibold hover:underline",style:{color:"var(--color-rouge-600)"},children:"Voir tout "})]}),o.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:e.recent.appointments&&e.recent.appointments.length>0?e.recent.appointments.slice(0,5).map(u=>{var w,h;const m=new Date(u.date),f={pending:{bg:"var(--color-racine-100)",text:"var(--color-racine-700)"},confirmed:{bg:"var(--color-rouge-100)",text:"var(--color-rouge-700)"},completed:{bg:"var(--color-racine-200)",text:"var(--color-racine-800)"},cancelled:{bg:"var(--color-noir-200)",text:"var(--color-noir-600)"}},j=f[u.status]||f.pending;return o.jsxs("div",{className:"flex items-center justify-between text-sm p-2 rounded",style:{backgroundColor:"var(--color-racine-50)"},children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"font-medium",style:{color:"var(--color-noir-700)"},children:[((w=u.clientId)==null?void 0:w.name)||"Client","  ",((h=u.garageId)==null?void 0:h.name)||"Garage"]}),o.jsxs("p",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:[m.toLocaleDateString("fr-FR"),"  ",u.time]})]}),o.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold",style:{backgroundColor:j.bg,color:j.text},children:u.status})]},u._id)}):o.jsx("p",{className:"text-sm",style:{color:"var(--color-noir-500)"},children:"Aucun rendez-vous rcent"})})]}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border hover:shadow-2xl transition-all duration-300 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-bold",style:{color:"var(--color-noir)"},children:"Avis rcents"}),o.jsx(J,{to:"/admin/reviews",className:"text-xs font-semibold hover:underline",style:{color:"var(--color-rouge-600)"},children:"Voir tout "})]}),o.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:e.recent.reviews&&e.recent.reviews.length>0?e.recent.reviews.slice(0,5).map(u=>{var m,f,j,w;return o.jsxs("div",{className:"flex items-start gap-3 p-2 rounded",style:{backgroundColor:"var(--color-racine-50)"},children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] flex items-center justify-center text-white font-semibold text-xs flex-shrink-0",children:((f=(m=u.clientId)==null?void 0:m.name)==null?void 0:f.charAt(0).toUpperCase())||"C"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"text-sm font-medium",style:{color:"var(--color-noir-700)"},children:[((j=u.clientId)==null?void 0:j.name)||"Client","  ",((w=u.garageId)==null?void 0:w.name)||"Garage"]}),o.jsx("div",{className:"flex items-center gap-1 mt-1",children:[...Array(5)].map((h,y)=>o.jsx("svg",{className:`w-3 h-3 ${y<u.rating?"":"opacity-30"}`,style:{color:y<u.rating?"var(--color-rose-500)":"var(--color-noir-300)"},fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},y))}),u.comment&&o.jsx("p",{className:"text-xs mt-1 line-clamp-2",style:{color:"var(--color-noir-600)"},children:u.comment})]})]},u._id)}):o.jsx("p",{className:"text-sm",style:{color:"var(--color-noir-500)"},children:"Aucun avis rcent"})})]})]}),e.topGarages&&e.topGarages.length>0&&o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border hover:shadow-2xl transition-all duration-300 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:"var(--color-noir)"},children:" Top Garages"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:e.topGarages.slice(0,5).map(u=>{var m,f,j;return o.jsxs("div",{className:"p-3 rounded-lg border",style:{borderColor:"var(--color-racine-200)",backgroundColor:"var(--color-racine-50)"},children:[o.jsx("p",{className:"font-semibold text-sm mb-1",style:{color:"var(--color-noir)"},children:u.name}),o.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[o.jsx("span",{className:"text-xs font-bold",style:{color:"var(--color-rose-600)"},children:((f=(m=u.rating)==null?void 0:m.average)==null?void 0:f.toFixed(1))||"0.0"}),o.jsx("svg",{className:"w-3 h-3",style:{color:"var(--color-rose-500)"},fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),o.jsxs("span",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:["(",((j=u.rating)==null?void 0:j.count)||0,")"]})]}),u.isVerified&&o.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full font-semibold",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:" Vrifi"}),!u.isVerified&&o.jsx("button",{onClick:()=>c(u._id),className:"text-xs px-2 py-0.5 rounded-full font-semibold hover:opacity-80 transition-opacity",style:{backgroundColor:"var(--color-racine-600)",color:"white"},children:"Vrifier"})]},u._id)})})]})]})}function my(){const[e,r]=b.useState([]),[t,n]=b.useState(null),[s,l]=b.useState(!0);b.useEffect(()=>{z.get("/users").then(c=>{r(c.data.users),l(!1)}).catch(c=>{var i,d;n(((d=(i=c.response)==null?void 0:i.data)==null?void 0:d.message)||"Erreur"),l(!1)})},[]);const a=c=>{switch(c){case"admin":return{bg:"var(--color-racine-100)",text:"var(--color-racine-700)"};case"garagiste":return{bg:"var(--color-rose-100)",text:"var(--color-rose-700)"};case"client":return{bg:"var(--color-rouge-100)",text:"var(--color-rouge-700)"};default:return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)"}}};return s?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):t?o.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:["Erreur: ",t]}):o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-6",style:{color:"var(--color-noir)"},children:"Utilisateurs"}),e.length===0?o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-8 text-center shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsx("p",{className:"text-base",style:{color:"var(--color-noir-600)"},children:"Aucun utilisateur enregistr"})}):o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-xl border overflow-hidden animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{style:{backgroundColor:"var(--color-racine-50)"},children:[o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Nom"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Email"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Rle"})]})}),o.jsx("tbody",{className:"divide-y",style:{borderColor:"var(--color-racine-200)"},children:e.map((c,i)=>{const d=a(c.role);return o.jsxs("tr",{className:"hover:bg-opacity-50 hover:shadow-md transition-all duration-200",style:{backgroundColor:i%2===0?"transparent":"var(--color-racine-50)"},children:[o.jsx("td",{className:"px-4 py-3 text-sm font-medium",style:{color:"var(--color-noir-700)"},children:c.name}),o.jsx("td",{className:"px-4 py-3 text-sm",style:{color:"var(--color-noir-600)"},children:c.email}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold capitalize",style:{backgroundColor:d.bg,color:d.text},children:c.role})})]},c._id)})})]})})})]})}function fy(){const[e,r]=b.useState([]),[t,n]=b.useState(null),[s,l]=b.useState(!0);b.useEffect(()=>{z.get("/garages").then(u=>{r(u.data.garages),l(!1)}).catch(u=>{var m,f;n(((f=(m=u.response)==null?void 0:m.data)==null?void 0:f.message)||"Erreur"),l(!1)})},[]);const a=async u=>{try{await z.put(`/admin/garages/${u}/suspend`),r(m=>m.map(f=>f._id===u?{...f,isActive:!1}:f))}catch{}},c=async u=>{try{await z.put(`/admin/garages/${u}/activate`),r(m=>m.map(f=>f._id===u?{...f,isActive:!0}:f))}catch{}},i=async u=>{try{await z.put(`/admin/garages/${u}/verify`),r(m=>m.map(f=>f._id===u?{...f,isVerified:!0}:f))}catch{}},d=async u=>{try{await z.put(`/admin/garages/${u}/unverify`),r(m=>m.map(f=>f._id===u?{...f,isVerified:!1}:f))}catch{}};return s?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):t?o.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:["Erreur: ",t]}):o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-6",style:{color:"var(--color-noir)"},children:"Garages"}),e.length===0?o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-8 text-center shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsx("p",{className:"text-base",style:{color:"var(--color-noir-600)"},children:"Aucun garage enregistr"})}):o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-xl border overflow-hidden animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{style:{backgroundColor:"var(--color-racine-50)"},children:[o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Nom"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Ville"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Statut"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Vrifi"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Actions"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Dtails"})]})}),o.jsx("tbody",{className:"divide-y",style:{borderColor:"var(--color-racine-200)"},children:e.map((u,m)=>{var f;return o.jsxs("tr",{className:"hover:bg-opacity-50 hover:shadow-md transition-all duration-200",style:{backgroundColor:m%2===0?"transparent":"var(--color-racine-50)"},children:[o.jsx("td",{className:"px-4 py-3 text-sm font-medium",style:{color:"var(--color-noir-700)"},children:u.name}),o.jsx("td",{className:"px-4 py-3 text-sm",style:{color:"var(--color-noir-600)"},children:((f=u.address)==null?void 0:f.city)||"-"}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:u.isActive?"var(--color-rouge-100)":"var(--color-noir-200)",color:u.isActive?"var(--color-rouge-700)":"var(--color-noir-600)"},children:u.isActive?"Actif":"Suspendu"})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:u.isVerified?"var(--color-rose-100)":"var(--color-noir-200)",color:u.isVerified?"var(--color-rose-700)":"var(--color-noir-600)"},children:u.isVerified?" Vrifi":"Non vrifi"})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex gap-2",children:[u.isActive?o.jsx("button",{onClick:()=>a(u._id),className:"px-3 py-1.5 rounded-lg text-xs font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:"Suspendre"})}):o.jsx("button",{onClick:()=>c(u._id),className:"px-3 py-1.5 rounded-lg text-xs font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:"Activer"})}),u.isVerified?o.jsx("button",{onClick:()=>d(u._id),className:"px-3 py-1.5 rounded-lg text-xs font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-noir-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:"Dvrifier"})}):o.jsx("button",{onClick:()=>i(u._id),className:"px-3 py-1.5 rounded-lg text-xs font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:"Vrifier"})})]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx(J,{to:`/admin/garages/${u._id}`,className:"px-3 py-1.5 rounded-lg text-xs font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 inline-block",style:{backgroundColor:"var(--color-racine-600)",color:"white"},children:"Voir dtails"})})]},u._id)})})]})})})]})}function py(){const[e,r]=b.useState([]),[t,n]=b.useState(null),[s,l]=b.useState(!0),[a,c]=b.useState(!1),[i,d]=b.useState(!1),[u,m]=b.useState(null),[f,j]=b.useState(""),[w,h]=b.useState(""),[y,g]=b.useState(""),[p,x]=b.useState(""),[k,C]=b.useState(""),[E,P]=b.useState(""),[L,H]=b.useState(""),B=()=>{l(!0),z.get("/admin/garagistes").then(R=>{r(R.data.garagistes),l(!1)}).catch(R=>{var V,O;n(((O=(V=R.response)==null?void 0:V.data)==null?void 0:O.message)||"Erreur"),l(!1)})};b.useEffect(()=>{B()},[]);const X=async R=>{var V,O;R.preventDefault(),d(!0),m(null);try{await z.post("/admin/garagistes",{name:f,email:w,password:y,phone:p||void 0,address:k||void 0,city:E||void 0,postalCode:L||void 0}),j(""),h(""),g(""),x(""),C(""),P(""),H(""),c(!1),B()}catch(G){m(((O=(V=G.response)==null?void 0:V.data)==null?void 0:O.message)||"Erreur lors de la cration")}finally{d(!1)}},D=async(R,V)=>{var O,G;if(confirm(`tes-vous sr de vouloir supprimer le garagiste "${V}" ? Cette action est irrversible.`))try{await z.delete(`/admin/garagistes/${R}`),B()}catch(F){alert(((G=(O=F.response)==null?void 0:O.data)==null?void 0:G.message)||"Erreur lors de la suppression")}};return s&&e.length===0?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold",style:{color:"var(--color-noir)"},children:"Garagistes"}),o.jsx("button",{onClick:()=>c(!a),className:"px-4 py-2 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:a?"Annuler":"+ Crer un garagiste"})})]}),u&&o.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),a&&o.jsxs("div",{className:"mb-6 bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border animate-slideIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h2",{className:"text-xl font-bold mb-4",style:{color:"var(--color-noir)"},children:"Nouveau Garagiste"}),o.jsxs("form",{onSubmit:X,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Nom du garage *"}),o.jsx("input",{type:"text",value:f,onChange:R=>j(R.target.value),required:!0,placeholder:"Ex: Garage Auto Paris",className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:R=>{R.target.style.borderColor="var(--color-rose-500)",R.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:R=>{R.target.style.borderColor="var(--color-racine-200)",R.target.style.boxShadow="none"}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Email *"}),o.jsx("input",{type:"email",value:w,onChange:R=>h(R.target.value),required:!0,placeholder:"email@example.com",className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:R=>{R.target.style.borderColor="var(--color-rose-500)",R.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:R=>{R.target.style.borderColor="var(--color-racine-200)",R.target.style.boxShadow="none"}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Mot de passe *"}),o.jsx("input",{type:"password",value:y,onChange:R=>g(R.target.value),required:!0,minLength:6,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:R=>{R.target.style.borderColor="var(--color-rose-500)",R.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:R=>{R.target.style.borderColor="var(--color-racine-200)",R.target.style.boxShadow="none"}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Tlphone"}),o.jsx("input",{type:"tel",value:p,onChange:R=>x(R.target.value),placeholder:"+33 X XX XX XX XX",className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:R=>{R.target.style.borderColor="var(--color-rose-500)",R.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:R=>{R.target.style.borderColor="var(--color-racine-200)",R.target.style.boxShadow="none"}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Adresse"}),o.jsx("input",{type:"text",value:k,onChange:R=>C(R.target.value),placeholder:"Ex: 123 Rue de la Paix",className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:R=>{R.target.style.borderColor="var(--color-rose-500)",R.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:R=>{R.target.style.borderColor="var(--color-racine-200)",R.target.style.boxShadow="none"}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Ville"}),o.jsx("input",{type:"text",value:E,onChange:R=>P(R.target.value),placeholder:"Ex: Paris",className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:R=>{R.target.style.borderColor="var(--color-rose-500)",R.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:R=>{R.target.style.borderColor="var(--color-racine-200)",R.target.style.boxShadow="none"}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Code postal"}),o.jsx("input",{type:"text",value:L,onChange:R=>H(R.target.value),placeholder:"Ex: 75001",className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:R=>{R.target.style.borderColor="var(--color-rose-500)",R.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:R=>{R.target.style.borderColor="var(--color-racine-200)",R.target.style.boxShadow="none"}})]})]}),o.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2.5 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:i?"Cration...":"Crer le compte"})})]})]}),t&&o.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:["Erreur: ",t]}),e.length===0?o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-8 text-center shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsx("p",{className:"text-base",style:{color:"var(--color-noir-600)"},children:"Aucun garagiste enregistr"})}):o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-xl border overflow-hidden animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{style:{backgroundColor:"var(--color-racine-50)"},children:[o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Nom"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Email"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Garage"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Statut"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y",style:{borderColor:"var(--color-racine-200)"},children:e.map((R,V)=>{var O,G,F,S;return o.jsxs("tr",{className:"hover:bg-opacity-50 hover:shadow-md transition-all duration-200",style:{backgroundColor:V%2===0?"transparent":"var(--color-racine-50)"},children:[o.jsx("td",{className:"px-4 py-3 text-sm font-medium",style:{color:"var(--color-noir-700)"},children:R.name}),o.jsx("td",{className:"px-4 py-3 text-sm",style:{color:"var(--color-noir-600)"},children:R.email}),o.jsx("td",{className:"px-4 py-3 text-sm",style:{color:"var(--color-noir-600)"},children:((O=R.garageId)==null?void 0:O.name)||"-"}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:(G=R.garageId)!=null&&G.isActive?"var(--color-rouge-100)":"var(--color-noir-200)",color:(F=R.garageId)!=null&&F.isActive?"var(--color-rouge-700)":"var(--color-noir-600)"},children:(S=R.garageId)!=null&&S.isActive?"Actif":"Inactif"})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("button",{onClick:()=>D(R._id,R.name),className:"px-3 py-1.5 rounded-lg text-xs font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:"Supprimer"})})})]},R._id||V)})})]})})})]})}function Zi(){const[e,r]=b.useState(0),[t,n]=b.useState(!0),s=Z(a=>a.user),l=Z(a=>a.token);return b.useEffect(()=>{if(!l||!s){r(0),n(!1);return}const a=async()=>{try{const u=((await z.get("/messages/conversations")).data.conversations||[]).reduce((m,f)=>m+(f.unreadCount||0),0);r(u)}catch(i){console.error("Erreur chargement notifications:",i),r(0)}finally{n(!1)}};a();const c=setInterval(a,3e4);return()=>clearInterval(c)},[l,s]),{unreadCount:e,loading:t}}function vy(){const e=ue(),r=ht();Z(a=>a.setToken);const t=Z(a=>a.logout),n=()=>{t(),e("/app",{replace:!0})},s=a=>r.pathname===`/admin${a}`||a===""&&r.pathname==="/admin",{unreadCount:l}=Zi();return o.jsxs("div",{className:"min-h-screen flex",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:[o.jsxs("aside",{className:"w-64 flex-shrink-0 border-r bg-white/90 backdrop-blur-md shadow-lg",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"p-6 border-b relative",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h3",{className:"text-2xl font-bold transition-all duration-300",style:{background:"linear-gradient(to right, var(--color-rouge-600), var(--color-rose-600))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Promoto"}),o.jsxs("div",{className:"flex items-center justify-between mt-1",children:[o.jsx("p",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:"Espace Admin"}),l>0&&o.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},title:`${l} message${l>1?"s":""} non lu${l>1?"s":""}`,children:l>99?"99+":l})]})]}),o.jsxs("nav",{className:"p-4 space-y-2",children:[o.jsx(J,{to:"/admin",className:`block px-4 py-3 rounded-lg transition-all duration-300 text-sm font-medium hover:translate-x-1 ${s("")?"shadow-md":"hover:bg-opacity-50"}`,style:{backgroundColor:s("")?"var(--color-rouge-600)":"transparent",color:s("")?"white":"var(--color-noir-700)"},children:" Dashboard"}),o.jsx(J,{to:"/admin/garages",className:`block px-4 py-3 rounded-lg transition-all duration-300 text-sm font-medium hover:translate-x-1 ${s("/garages")?"shadow-md":"hover:bg-opacity-50"}`,style:{backgroundColor:s("/garages")?"var(--color-rouge-600)":"transparent",color:s("/garages")?"white":"var(--color-noir-700)"},children:" Garages"}),o.jsx(J,{to:"/admin/garagistes",className:`block px-4 py-3 rounded-lg transition-all duration-300 text-sm font-medium hover:translate-x-1 ${s("/garagistes")?"shadow-md":"hover:bg-opacity-50"}`,style:{backgroundColor:s("/garagistes")?"var(--color-rouge-600)":"transparent",color:s("/garagistes")?"white":"var(--color-noir-700)"},children:" Garagistes"}),o.jsx(J,{to:"/admin/users",className:`block px-4 py-3 rounded-lg transition-all duration-300 text-sm font-medium hover:translate-x-1 ${s("/users")?"shadow-md":"hover:bg-opacity-50"}`,style:{backgroundColor:s("/users")?"var(--color-rouge-600)":"transparent",color:s("/users")?"white":"var(--color-noir-700)"},children:" Utilisateurs"}),o.jsx(J,{to:"/admin/appointments",className:`block px-4 py-3 rounded-lg transition-all duration-300 text-sm font-medium hover:translate-x-1 ${s("/appointments")?"shadow-md":"hover:bg-opacity-50"}`,style:{backgroundColor:s("/appointments")?"var(--color-rouge-600)":"transparent",color:s("/appointments")?"white":"var(--color-noir-700)"},children:" Rendez-vous"}),o.jsx(J,{to:"/admin/reviews",className:`block px-4 py-3 rounded-lg transition-all duration-300 text-sm font-medium hover:translate-x-1 ${s("/reviews")?"shadow-md":"hover:bg-opacity-50"}`,style:{backgroundColor:s("/reviews")?"var(--color-rouge-600)":"transparent",color:s("/reviews")?"white":"var(--color-noir-700)"},children:" Avis"}),o.jsx(J,{to:"/admin/services",className:`block px-4 py-3 rounded-lg transition-all duration-300 text-sm font-medium hover:translate-x-1 ${s("/services")?"shadow-md":"hover:bg-opacity-50"}`,style:{backgroundColor:s("/services")?"var(--color-rouge-600)":"transparent",color:s("/services")?"white":"var(--color-noir-700)"},children:" Services"}),o.jsx(J,{to:"/admin/analytics",className:`block px-4 py-3 rounded-lg transition-all duration-300 text-sm font-medium hover:translate-x-1 ${s("/analytics")?"shadow-md":"hover:bg-opacity-50"}`,style:{backgroundColor:s("/analytics")?"var(--color-rouge-600)":"transparent",color:s("/analytics")?"white":"var(--color-noir-700)"},children:" Analytics"}),o.jsx(J,{to:"/admin/messages",className:`block px-4 py-3 rounded-lg transition-all duration-300 text-sm font-medium hover:translate-x-1 relative ${s("/messages")?"shadow-md":"hover:bg-opacity-50"}`,style:{backgroundColor:s("/messages")?"var(--color-rouge-600)":"transparent",color:s("/messages")?"white":"var(--color-noir-700)"},children:" Messages"}),o.jsx(J,{to:"/admin/invoices",className:`block px-4 py-3 rounded-lg transition-all duration-300 text-sm font-medium hover:translate-x-1 ${s("/invoices")?"shadow-md":"hover:bg-opacity-50"}`,style:{backgroundColor:s("/invoices")?"var(--color-rouge-600)":"transparent",color:s("/invoices")?"white":"var(--color-noir-700)"},children:" Factures"}),o.jsx("button",{onClick:n,className:"w-full mt-6 px-4 py-2.5 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:"Dconnexion"})})]})]}),o.jsx("main",{className:"flex-1 overflow-auto p-6 sm:p-8",children:o.jsx(Qv,{})})]})}function xy(){var h;const e=ue(),r=ht(),t=Z(y=>y.user),n=Z(y=>y.token),s=Z(y=>y.logout),l=!!n&&!!t,[a,c]=b.useState(""),[i,d]=b.useState(!1),[u,m]=b.useState(!1),{unreadCount:f}=Zi();b.useEffect(()=>{m((t==null?void 0:t.role)==="client")},[t]);const j=y=>{y.preventDefault(),a.trim()?(e(`/app/garages?search=${encodeURIComponent(a.trim())}`),c("")):e("/app/garages")},w=()=>{s(),e("/app",{replace:!0}),d(!1)};return r.pathname.startsWith("/admin")||r.pathname.startsWith("/garage")?null:o.jsx("header",{className:"bg-white/90 backdrop-blur-md border-b shadow-lg sticky top-0 z-50 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsx("div",{className:"container mx-auto px-4 sm:px-6 max-w-7xl",children:o.jsxs("div",{className:"flex items-center justify-between h-16 sm:h-20",children:[o.jsx(J,{to:"/app",className:"flex items-center gap-2 group transition-transform duration-300 hover:scale-105",children:o.jsx("div",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] bg-clip-text text-transparent group-hover:from-[var(--color-rouge-700)] group-hover:to-[var(--color-rose-700)] transition-all duration-300",children:"Promoto"})}),!r.pathname.includes("/login")&&!r.pathname.includes("/register")&&o.jsx("form",{onSubmit:j,className:"hidden md:flex flex-1 max-w-2xl mx-4 lg:mx-8",children:o.jsxs("div",{className:"relative w-full",children:[o.jsx("input",{type:"text",value:a,onChange:y=>c(y.target.value),placeholder:"Rechercher un garage...",className:"w-full px-4 pl-10 py-2 rounded-lg border-2 outline-none transition-all text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:y=>y.target.style.borderColor="var(--color-rose-500)",onBlur:y=>y.target.style.borderColor="var(--color-racine-200)"}),o.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4",style:{color:"var(--color-noir-400)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),o.jsx("div",{className:"flex items-center gap-3 sm:gap-4",children:l&&u?o.jsx(o.Fragment,{children:o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>d(!i),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-[var(--color-racine-50)] transition-colors relative",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] flex items-center justify-center text-white font-semibold text-sm",children:((h=t==null?void 0:t.name)==null?void 0:h.charAt(0).toUpperCase())||"U"}),f>0&&o.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-semibold border-2 border-white",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:f>9?"9+":f})]}),o.jsx("span",{className:"hidden sm:block text-sm font-medium",style:{color:"var(--color-noir-700)"},children:t==null?void 0:t.name}),o.jsx("svg",{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`,style:{color:"var(--color-noir-600)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)}),o.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border py-2 z-50 animate-fadeIn backdrop-blur-sm",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx(J,{to:"/app",onClick:()=>d(!1),className:"block px-4 py-2 text-sm hover:bg-[var(--color-racine-50)] transition-all duration-200 hover:translate-x-1 rounded-lg mx-2",style:{color:"var(--color-noir-700)"},children:" Accueil"}),o.jsx(J,{to:"/app/garages",onClick:()=>d(!1),className:"block px-4 py-2 text-sm hover:bg-[var(--color-racine-50)] transition-all duration-200 hover:translate-x-1 rounded-lg mx-2",style:{color:"var(--color-noir-700)"},children:" Rechercher"}),o.jsx(J,{to:"/app/appointments",onClick:()=>d(!1),className:"block px-4 py-2 text-sm hover:bg-[var(--color-racine-50)] transition-all duration-200 hover:translate-x-1 rounded-lg mx-2",style:{color:"var(--color-noir-700)"},children:" Mes rendez-vous"}),o.jsx(J,{to:"/app/favorites",onClick:()=>d(!1),className:"block px-4 py-2 text-sm hover:bg-[var(--color-racine-50)] transition-all duration-200 hover:translate-x-1 rounded-lg mx-2",style:{color:"var(--color-noir-700)"},children:" Mes favoris"}),o.jsx(J,{to:"/app/quotes",onClick:()=>d(!1),className:"block px-4 py-2 text-sm hover:bg-[var(--color-racine-50)] transition-all duration-200 hover:translate-x-1 rounded-lg mx-2",style:{color:"var(--color-noir-700)"},children:" Mes devis"}),o.jsx(J,{to:"/app/messages",onClick:()=>d(!1),className:"block px-4 py-2 text-sm hover:bg-[var(--color-racine-50)] transition-all duration-200 hover:translate-x-1 rounded-lg mx-2 relative",style:{color:"var(--color-noir-700)"},children:o.jsxs("span",{className:"flex items-center justify-between",children:[o.jsx("span",{children:" Messages"}),f>0&&o.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-semibold min-w-[20px] text-center",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:f>99?"99+":f})]})}),o.jsx(J,{to:"/app/profile",onClick:()=>d(!1),className:"block px-4 py-2 text-sm hover:bg-[var(--color-racine-50)] transition-all duration-200 hover:translate-x-1 rounded-lg mx-2",style:{color:"var(--color-noir-700)"},children:" Mon profil"}),o.jsx("div",{className:"border-t my-2",style:{borderColor:"var(--color-racine-200)"}}),o.jsx("button",{onClick:w,className:"w-full text-left px-4 py-2 text-sm hover:bg-[var(--color-rouge-50)] transition-colors",style:{color:"var(--color-rouge-600)"},children:"Dconnexion"})]})]})]})}):o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsx(J,{to:"/login",className:"px-4 py-2 text-sm font-semibold rounded-lg transition-colors",style:{color:"var(--color-noir-700)"},children:"Connexion"}),o.jsx(J,{to:"/register",className:"px-4 py-2.5 bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] hover:from-[var(--color-rouge-700)] hover:to-[var(--color-rose-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-xl transition-all duration-300 text-sm hover:scale-105 active:scale-95",children:"S'inscrire"})]})})]})})})}function gy(){const e=ue(),r=Z(C=>C.user),t=Z(C=>C.logout),[n,s]=b.useState(null),[l,a]=b.useState(!0),[c,i]=b.useState(null),[d,u]=b.useState([]),[m,f]=b.useState(null),[j,w]=b.useState([]),{unreadCount:h}=Zi();b.useEffect(()=>{y()},[]);const y=async()=>{var C,E;a(!0),i(null);try{const P=await z.get("/garages/me/stats");s(P.data.stats);try{const R=await z.get("/garages/me");f(R.data.garage)}catch(R){console.error("Erreur chargement dtails garage:",R)}try{const R=await z.get("/messages/conversations");w(R.data.conversations||[])}catch(R){console.error("Erreur chargement conversations:",R)}const H=(await z.get("/appointments/garage/me")).data.appointments||[],B=new Date;B.setHours(0,0,0,0);const X=new Date(B);X.setDate(X.getDate()+1);const D=H.filter(R=>{const V=new Date(R.date);return V>=B&&V<X}).sort((R,V)=>{const O=R.time||"00:00",G=V.time||"00:00";return O.localeCompare(G)});u(D)}catch(P){i(((E=(C=P.response)==null?void 0:C.data)==null?void 0:E.message)||"Erreur lors du chargement")}finally{a(!1)}},g=()=>{t(),e("/app",{replace:!0})},p=async(C,E)=>{var P,L;try{await z.put(`/appointments/${C}`,{status:E}),y()}catch(H){alert(((L=(P=H.response)==null?void 0:P.data)==null?void 0:L.message)||"Erreur lors de la mise  jour")}},x=C=>{switch(C){case"pending":return{bg:"var(--color-racine-100)",text:"var(--color-racine-700)",label:"En attente"};case"confirmed":return{bg:"var(--color-rouge-100)",text:"var(--color-rouge-700)",label:"Confirm"};case"in-progress":return{bg:"var(--color-rose-100)",text:"var(--color-rose-700)",label:"En cours"};case"completed":return{bg:"var(--color-racine-200)",text:"var(--color-racine-800)",label:"Termin"};case"cancelled":return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:"Annul"};default:return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:C}}},k=C=>{const E=Math.floor(C),P=C%1>=.5,L=5-E-(P?1:0);return o.jsxs("div",{className:"flex items-center gap-0.5",children:[[...Array(E)].map((H,B)=>o.jsx("svg",{className:"w-4 h-4",style:{color:"var(--color-rose-500)"},fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},B)),P&&o.jsxs("svg",{className:"w-4 h-4",style:{color:"var(--color-rose-500)"},fill:"currentColor",viewBox:"0 0 20 20",children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"half",children:[o.jsx("stop",{offset:"50%",stopColor:"currentColor"}),o.jsx("stop",{offset:"50%",stopColor:"transparent",stopOpacity:"1"})]})}),o.jsx("path",{fill:"url(#half)",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]}),[...Array(L)].map((H,B)=>o.jsx("svg",{className:"w-4 h-4",style:{color:"var(--color-noir-300)"},fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},B))]})};return l?o.jsx("div",{className:"min-h-screen animate-fadeIn flex items-center justify-center",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):c?o.jsx("div",{className:"min-h-screen animate-fadeIn flex items-center justify-center",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:["Erreur: ",c]})}):n?o.jsx("div",{className:"min-h-screen animate-fadeIn",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 max-w-7xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Dashboard Garagiste"}),o.jsxs("p",{className:"text-base sm:text-lg",style:{color:"var(--color-noir-600)"},children:["Bienvenue, ",o.jsx("span",{className:"font-semibold text-[var(--color-rouge-600)]",children:r==null?void 0:r.name})]}),n.garage&&o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx("span",{className:"text-sm font-semibold",style:{color:"var(--color-noir-700)"},children:n.garage.name}),n.garage.isVerified&&o.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:" Vrifi"}),k(n.garage.rating.average),o.jsxs("span",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:["(",n.garage.rating.count," avis)"]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs(J,{to:"/garage/messages",className:"relative p-2 rounded-lg hover:bg-[var(--color-racine-100)] transition-all duration-300",title:`${h} message${h>1?"s":""} non lu${h>1?"s":""}`,children:[o.jsx("svg",{className:"w-6 h-6",style:{color:"var(--color-noir-700)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 00-2-2H9a2 2 0 00-2 2v.341C4.67 6.165 3 8.388 3 11v3.159c0 .538-.214 1.055-.595 1.436L1 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),h>0&&o.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-semibold border-2 border-white",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:h>9?"9+":h})]}),o.jsx("button",{onClick:g,className:"px-5 py-2 bg-[var(--color-rouge-600)] hover:bg-[var(--color-rouge-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-xl transition-all duration-300 text-sm sm:text-base hover:scale-105 active:scale-95 relative overflow-hidden",children:o.jsx("span",{className:"relative z-10",children:"Dconnexion"})})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-4 shadow-xl border hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 animate-fadeIn",style:{borderColor:"var(--color-rouge-200)"},children:[o.jsx("div",{className:"text-2xl font-bold mb-1",style:{color:"var(--color-rouge-600)"},children:n.appointments.today}),o.jsx("div",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:"Rendez-vous aujourd'hui"})]}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-4 shadow-xl border hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 animate-fadeIn",style:{borderColor:"var(--color-rose-200)"},children:[o.jsx("div",{className:"text-2xl font-bold mb-1",style:{color:"var(--color-rose-600)"},children:n.appointments.pending}),o.jsx("div",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:"En attente"})]}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-4 shadow-xl border hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("div",{className:"text-2xl font-bold mb-1",style:{color:"var(--color-racine-600)"},children:n.services.active}),o.jsx("div",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:"Services actifs"})]}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-4 shadow-xl border hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 animate-fadeIn",style:{borderColor:"var(--color-rose-200)"},children:[o.jsx("div",{className:"text-2xl font-bold mb-1",style:{color:"var(--color-rose-600)"},children:n.garage.rating.average.toFixed(1)}),o.jsx("div",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:"Note moyenne"})]})]}),d.length>0&&o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-xl border mb-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("div",{className:"p-4 sm:p-6 border-b",style:{borderColor:"var(--color-racine-200)"},children:o.jsxs("h2",{className:"text-xl font-bold",style:{color:"var(--color-noir)"},children:[" Rendez-vous d'aujourd'hui (",d.length,")"]})}),o.jsx("div",{className:"p-4 sm:p-6 space-y-3",children:d.map(C=>{var L,H;const E=x(C.status);new Date(C.date);const P=C.status==="pending"||C.status==="confirmed";return o.jsx("div",{className:"bg-white/50 rounded-lg p-4 border hover:shadow-md transition-all duration-200",style:{borderColor:"var(--color-racine-200)"},children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"text-lg font-bold",style:{color:"var(--color-noir)"},children:C.time}),o.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:E.bg,color:E.text},children:E.label})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("p",{className:"text-sm font-medium",style:{color:"var(--color-noir-700)"},children:[" ",((L=C.clientId)==null?void 0:L.name)||"Client"]}),o.jsxs("p",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:[" ",((H=C.serviceId)==null?void 0:H.name)||"Service"]}),C.notes&&o.jsx("p",{className:"text-xs italic",style:{color:"var(--color-noir-500)"},children:C.notes})]})]}),P&&o.jsxs("div",{className:"flex gap-2",children:[C.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>p(C._id,"confirmed"),className:"px-3 py-1.5 rounded-lg text-xs font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:" Accepter"})}),o.jsx("button",{onClick:()=>p(C._id,"cancelled"),className:"px-3 py-1.5 rounded-lg text-xs font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-noir-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:" Refuser"})})]}),C.status==="confirmed"&&o.jsx("button",{onClick:()=>p(C._id,"in-progress"),className:"px-3 py-1.5 rounded-lg text-xs font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:" Dmarrer"})})]})]})},C._id)})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[o.jsxs(J,{to:"/garage/appointments",className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 cursor-pointer group animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center mb-4 transition-all duration-300 group-hover:scale-110",style:{backgroundColor:"var(--color-rouge-100)"},children:o.jsx("svg",{className:"w-6 h-6",style:{color:"var(--color-rouge-600)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Mes Rendez-vous"}),o.jsxs("p",{className:"text-sm sm:text-base mb-3",style:{color:"var(--color-noir-600)"},children:["Grez tous vos rendez-vous (",n.appointments.total," total)"]}),o.jsx("div",{className:"text-xs font-semibold",style:{color:"var(--color-rouge-600)"},children:"Voir tout "})]}),o.jsxs(J,{to:"/garage/services",className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 cursor-pointer group animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center mb-4 transition-all duration-300 group-hover:scale-110",style:{backgroundColor:"var(--color-rose-100)"},children:o.jsx("svg",{className:"w-6 h-6",style:{color:"var(--color-rose-600)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Mes Services"}),o.jsxs("p",{className:"text-sm sm:text-base mb-3",style:{color:"var(--color-noir-600)"},children:["Grez vos services proposs (",n.services.active," actifs)"]}),o.jsx("div",{className:"text-xs font-semibold",style:{color:"var(--color-rose-600)"},children:"Grer "})]}),o.jsxs(J,{to:"/garage/reviews",className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 cursor-pointer group animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center mb-4 transition-all duration-300 group-hover:scale-110",style:{backgroundColor:"var(--color-racine-100)"},children:o.jsx("svg",{className:"w-6 h-6",style:{color:"var(--color-racine-600)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Avis Clients"}),o.jsxs("p",{className:"text-sm sm:text-base mb-3",style:{color:"var(--color-noir-600)"},children:["Consultez les avis reus (",n.reviews.total," total)"]}),o.jsx("div",{className:"text-xs font-semibold",style:{color:"var(--color-racine-600)"},children:"Voir tout "})]}),o.jsxs(J,{to:"/garage/messages",className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 cursor-pointer group animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center mb-4 transition-all duration-300 group-hover:scale-110",style:{backgroundColor:"var(--color-rouge-100)"},children:o.jsx("svg",{className:"w-6 h-6",style:{color:"var(--color-rouge-600)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Messages"}),o.jsxs("p",{className:"text-sm sm:text-base mb-3",style:{color:"var(--color-noir-600)"},children:["Discutez avec vos clients (",j.length," conversations)"]}),o.jsx("div",{className:"text-xs font-semibold",style:{color:"var(--color-rouge-600)"},children:"Voir tout "})]}),o.jsxs(J,{to:"/garage/quotes",className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 cursor-pointer group animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center mb-4 transition-all duration-300 group-hover:scale-110",style:{backgroundColor:"var(--color-racine-100)"},children:o.jsx("svg",{className:"w-6 h-6",style:{color:"var(--color-racine-600)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Devis"}),o.jsx("p",{className:"text-sm sm:text-base mb-3",style:{color:"var(--color-noir-600)"},children:"Crez et envoyez des devis  vos clients"}),o.jsx("div",{className:"text-xs font-semibold",style:{color:"var(--color-racine-600)"},children:"Grer "})]}),o.jsxs(J,{to:"/garage/invoices",className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 cursor-pointer group animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center mb-4 transition-all duration-300 group-hover:scale-110",style:{backgroundColor:"var(--color-rose-100)"},children:o.jsx("svg",{className:"w-6 h-6",style:{color:"var(--color-rose-600)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2zM10 8.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm5 5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"})})}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Factures"}),o.jsx("p",{className:"text-sm sm:text-base mb-3",style:{color:"var(--color-noir-600)"},children:"Grez vos factures et paiements"}),o.jsx("div",{className:"text-xs font-semibold",style:{color:"var(--color-rose-600)"},children:"Grer "})]})]}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-xl border mb-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"p-4 sm:p-6 border-b flex items-center justify-between",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h2",{className:"text-xl font-bold",style:{color:"var(--color-noir)"},children:" Messages Clients"}),o.jsx(J,{to:"/garage/messages",className:"text-sm font-semibold hover:underline",style:{color:"var(--color-rouge-600)"},children:"Voir tout "})]}),j.length===0?o.jsx("div",{className:"p-6 text-center",children:o.jsx("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:"Aucune conversation"})}):o.jsx("div",{className:"p-4 sm:p-6 space-y-3",children:j.slice(0,3).map(C=>{var E,P,L;return o.jsx(J,{to:`/garage/messages?userId=${C.user._id}`,className:"block p-3 bg-white/50 rounded-lg border hover:shadow-md transition-all duration-200",style:{borderColor:"var(--color-racine-200)"},children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[C.user.avatar?o.jsx("img",{src:C.user.avatar,alt:C.user.name,className:"w-10 h-10 rounded-full"}):o.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-rouge-100)",color:"var(--color-rouge-700)"},children:((P=(E=C.user.name)==null?void 0:E[0])==null?void 0:P.toUpperCase())||"U"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold",style:{color:"var(--color-noir)"},children:C.user.name}),o.jsx("p",{className:"text-xs truncate max-w-[200px]",style:{color:"var(--color-noir-600)"},children:((L=C.lastMessage)==null?void 0:L.content)||"Aucun message"})]})]}),C.unreadCount>0&&o.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:C.unreadCount})]})},C._id)})})]}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-xl border p-4 sm:p-6 animate-fadeIn mb-6",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Informations compltes du garage"}),o.jsx("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:"Toutes les informations de votre garage (publiques et prives)"})]}),o.jsx(J,{to:"/garage/settings",className:"px-4 py-2 bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] hover:from-[var(--color-rouge-700)] hover:to-[var(--color-rose-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-xl transition-all duration-300 text-sm hover:scale-105 active:scale-95 relative overflow-hidden",children:o.jsx("span",{className:"relative z-10",children:" Modifier"})})]}),m&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:"Informations gnrales"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",style:{color:"var(--color-noir-600)"},children:"Nom:"}),o.jsx("span",{className:"ml-2",style:{color:"var(--color-noir)"},children:m.name})]}),m.description&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",style:{color:"var(--color-noir-600)"},children:"Description:"}),o.jsx("p",{className:"ml-2 mt-1",style:{color:"var(--color-noir)"},children:m.description})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",style:{color:"var(--color-noir-600)"},children:"Statut:"}),o.jsxs("span",{className:"ml-2",children:[m.isActive?o.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold",style:{backgroundColor:"var(--color-rouge-100)",color:"var(--color-rouge-700)"},children:"Actif"}):o.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold",style:{backgroundColor:"var(--color-noir-200)",color:"var(--color-noir-600)"},children:"Suspendu"}),m.isVerified&&o.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-semibold",style:{backgroundColor:"var(--color-rose-100)",color:"var(--color-rose-700)"},children:" Vrifi"})]})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:"Coordonnes"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[m.address&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",style:{color:"var(--color-noir-600)"},children:"Adresse:"}),o.jsxs("p",{className:"ml-2 mt-1",style:{color:"var(--color-noir)"},children:[m.address.street,o.jsx("br",{}),m.address.postalCode," ",m.address.city]})]}),m.phone&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",style:{color:"var(--color-noir-600)"},children:"Tlphone:"}),o.jsx("span",{className:"ml-2",style:{color:"var(--color-noir)"},children:m.phone})]}),m.email&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",style:{color:"var(--color-noir-600)"},children:"Email:"}),o.jsx("span",{className:"ml-2",style:{color:"var(--color-noir)"},children:m.email})]}),m.website&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",style:{color:"var(--color-noir-600)"},children:"Site web:"}),o.jsx("a",{href:m.website,target:"_blank",rel:"noopener noreferrer",className:"ml-2 hover:underline",style:{color:"var(--color-rouge-600)"},children:m.website})]})]})]}),m.images&&m.images.length>0&&o.jsxs("div",{className:"md:col-span-2",children:[o.jsxs("h3",{className:"text-sm font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:["Images (",m.images.length,")"]}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:m.images.slice(0,4).map((C,E)=>o.jsx("img",{src:C,alt:`Garage ${E+1}`,className:"w-full h-24 object-cover rounded-lg border",style:{borderColor:"var(--color-racine-200)"}},E))})]})]})]})]})}):null}function yy(){const e=Z(h=>h.user),r=Z(h=>h.token),t=Z(h=>h.setUser),n=Z(h=>h.logout),s=!!r&&!!e,[l,a]=b.useState([]),[c,i]=b.useState([]),[d,u]=b.useState({appointments:0,reviews:0}),[m,f]=b.useState(!0),[j,w]=b.useState(!1);if(b.useEffect(()=>{(async()=>{if(r&&!e)try{const y=await z.get("/auth/me");t(y.data.user)}catch{n()}})()},[r,e,t,n]),b.useEffect(()=>{(async()=>{f(!0);try{const g=(await z.get("/garages",{params:{isActive:"true"}})).data.garages||[],p=[...g].filter(k=>{var C;return((C=k.rating)==null?void 0:C.count)>0}).sort((k,C)=>{var E,P;return(((E=C.rating)==null?void 0:E.average)||0)-(((P=k.rating)==null?void 0:P.average)||0)}).slice(0,6);a(p);const x=[...g].sort((k,C)=>new Date(C.createdAt).getTime()-new Date(k.createdAt).getTime()).slice(0,6);if(i(x),s&&(e==null?void 0:e.role)==="client"){try{const k=await z.get("/appointments/client/me");u(C=>{var E;return{...C,appointments:((E=k.data.appointments)==null?void 0:E.length)||0}})}catch{}try{const E=((await z.get("/reviews")).data.reviews||[]).filter(P=>{var B;const L=typeof P.clientId=="object"?(B=P.clientId)==null?void 0:B._id:P.clientId,H=(e==null?void 0:e._id)||(e==null?void 0:e.id);return L&&H&&L.toString()===H.toString()});u(P=>({...P,reviews:E.length}))}catch{}}}catch{}finally{f(!1)}})()},[s,e]),s&&e){if(e.role==="admin")return o.jsx(nt,{to:"/admin",replace:!0});if(e.role==="garagiste")return o.jsx(nt,{to:"/garage",replace:!0})}return b.useEffect(()=>{if(r&&!e){const h=setTimeout(()=>{w(!0)},2e3);return()=>clearTimeout(h)}else w(!1)},[r,e]),r&&!e&&!j?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[var(--color-racine-50)] to-[var(--color-racine-100)] flex items-center justify-center",children:o.jsx("div",{className:"text-[var(--color-noir-700)] text-base sm:text-lg",children:"Chargement..."})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[var(--color-racine-50)] via-white to-[var(--color-rose-50)]",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 max-w-7xl",children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-[var(--color-noir)] mb-6 bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] bg-clip-text text-transparent",children:"Bienvenue"}),s?o.jsxs("div",{className:"mt-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6 bg-white/80 backdrop-blur-sm rounded-xl p-4 sm:p-6 shadow-md border border-[var(--color-racine-200)]",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-[var(--color-noir)]",children:["Bienvenue, ",o.jsx("span",{className:"text-[var(--color-rouge-600)]",children:e==null?void 0:e.name})," !"]}),o.jsx("p",{className:"text-sm sm:text-base text-[var(--color-noir-600)] mt-1",children:"Vous tes connect en tant que client"})]}),o.jsx("button",{onClick:n,className:"px-5 py-2 bg-[var(--color-rouge-600)] hover:bg-[var(--color-rouge-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300 text-sm sm:text-base",children:"Dconnexion"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 shadow-md border border-[var(--color-racine-200)] hover:shadow-xl hover:-translate-y-1 transition-all duration-300 animate-fadeIn",children:[o.jsx("div",{className:"text-2xl font-bold mb-1",style:{color:"var(--color-rouge-600)"},children:d.appointments}),o.jsx("div",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:"Rendez-vous"})]}),o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 shadow-md border border-[var(--color-racine-200)] hover:shadow-xl hover:-translate-y-1 transition-all duration-300 animate-fadeIn",children:[o.jsx("div",{className:"text-2xl font-bold mb-1",style:{color:"var(--color-rose-600)"},children:d.reviews}),o.jsx("div",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:"Avis laisss"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-8",children:[o.jsxs(J,{to:"/app/appointments",className:"bg-white/80 backdrop-blur-sm rounded-xl p-5 sm:p-6 shadow-md border border-[var(--color-racine-200)] hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer group animate-fadeIn",children:[o.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-[var(--color-rouge-100)] rounded-lg flex items-center justify-center mb-3 sm:mb-4 group-hover:bg-[var(--color-rouge-200)] group-hover:scale-110 transition-all duration-300",children:o.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-[var(--color-rouge-600)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold text-[var(--color-noir)] mb-2",children:"Mes rendez-vous"}),o.jsx("p",{className:"text-sm sm:text-base text-[var(--color-noir-600)]",children:"Consultez et grez vos rendez-vous"})]}),o.jsxs(J,{to:"/app/garages",className:"bg-white/80 backdrop-blur-sm rounded-xl p-5 sm:p-6 shadow-md border border-[var(--color-racine-200)] hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer group animate-fadeIn",children:[o.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-[var(--color-rose-100)] rounded-lg flex items-center justify-center mb-3 sm:mb-4 group-hover:bg-[var(--color-rose-200)] group-hover:scale-110 transition-all duration-300",children:o.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-[var(--color-rose-600)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold text-[var(--color-noir)] mb-2",children:"Rechercher un garage"}),o.jsx("p",{className:"text-sm sm:text-base text-[var(--color-noir-600)]",children:"Trouvez un garage prs de chez vous"})]}),o.jsxs(J,{to:"/app/profile",className:"bg-white/80 backdrop-blur-sm rounded-xl p-5 sm:p-6 shadow-md border border-[var(--color-racine-200)] hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer group animate-fadeIn",children:[o.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-[var(--color-racine-100)] rounded-lg flex items-center justify-center mb-3 sm:mb-4 group-hover:bg-[var(--color-racine-200)] group-hover:scale-110 transition-all duration-300",children:o.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-[var(--color-racine-600)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold text-[var(--color-noir)] mb-2",children:"Mon profil"}),o.jsx("p",{className:"text-sm sm:text-base text-[var(--color-noir-600)]",children:"Modifiez vos informations personnelles"})]})]}),!m&&l.length>0&&o.jsxs("div",{className:"mt-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold",style:{color:"var(--color-noir)"},children:" Garages populaires"}),o.jsx(J,{to:"/app/garages",className:"text-sm font-semibold hover:underline",style:{color:"var(--color-rouge-600)"},children:"Voir tout "})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:l.slice(0,3).map(h=>{var y,g,p;return o.jsxs(J,{to:`/app/garage/${h._id}`,className:"bg-white/80 backdrop-blur-sm rounded-xl overflow-hidden shadow-md border hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 hover:scale-[1.02] animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"h-32 flex items-center justify-center relative",style:{background:"linear-gradient(to bottom right, var(--color-racine-100), var(--color-rose-100))"},children:[h.images&&h.images.length>0?o.jsx("img",{src:h.images[0],alt:h.name,className:"w-full h-full object-cover"}):o.jsx("svg",{className:"w-12 h-12",style:{color:"var(--color-racine-400)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),h.isVerified&&o.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:""})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"font-bold mb-1",style:{color:"var(--color-noir)"},children:h.name}),o.jsx("p",{className:"text-xs mb-2",style:{color:"var(--color-noir-600)"},children:h.address.city}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs("span",{className:"text-sm font-semibold",style:{color:"var(--color-rose-600)"},children:[" ",((g=(y=h.rating)==null?void 0:y.average)==null?void 0:g.toFixed(1))||"0.0"]}),o.jsxs("span",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:["(",((p=h.rating)==null?void 0:p.count)||0,")"]})]})]})]},h._id)})})]}),!m&&c.length>0&&o.jsxs("div",{className:"mt-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold",style:{color:"var(--color-noir)"},children:" Garages rcents"}),o.jsx(J,{to:"/app/garages",className:"text-sm font-semibold hover:underline",style:{color:"var(--color-rouge-600)"},children:"Voir tout "})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:c.slice(0,3).map(h=>{var y,g,p;return o.jsxs(J,{to:`/app/garage/${h._id}`,className:"bg-white/80 backdrop-blur-sm rounded-xl overflow-hidden shadow-md border hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 hover:scale-[1.02] animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"h-32 flex items-center justify-center relative",style:{background:"linear-gradient(to bottom right, var(--color-racine-100), var(--color-rose-100))"},children:[h.images&&h.images.length>0?o.jsx("img",{src:h.images[0],alt:h.name,className:"w-full h-full object-cover"}):o.jsx("svg",{className:"w-12 h-12",style:{color:"var(--color-racine-400)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),h.isVerified&&o.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:""})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"font-bold mb-1",style:{color:"var(--color-noir)"},children:h.name}),o.jsx("p",{className:"text-xs mb-2",style:{color:"var(--color-noir-600)"},children:h.address.city}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs("span",{className:"text-sm font-semibold",style:{color:"var(--color-rose-600)"},children:[" ",((g=(y=h.rating)==null?void 0:y.average)==null?void 0:g.toFixed(1))||"0.0"]}),o.jsxs("span",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:["(",((p=h.rating)==null?void 0:p.count)||0,")"]})]})]})]},h._id)})})]})]}):o.jsxs("div",{className:"mt-8 flex flex-col items-center gap-6",children:[o.jsx("p",{className:"text-base sm:text-lg text-[var(--color-noir-700)] text-center max-w-2xl",children:"Bienvenue sur Promoto ! Crez un compte ou connectez-vous pour rserver un rendez-vous."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsx(J,{to:"/login",className:"px-6 py-2.5 bg-[var(--color-rouge-600)] hover:bg-[var(--color-rouge-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300 text-sm sm:text-base",children:"Se connecter"}),o.jsx(J,{to:"/register",className:"px-6 py-2.5 bg-[var(--color-rose-500)] hover:bg-[var(--color-rose-600)] text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300 text-sm sm:text-base",children:"Crer un compte"})]}),o.jsxs("div",{className:"mt-12 w-full bg-white/70 backdrop-blur-sm rounded-xl p-6 shadow-md border border-[var(--color-racine-200)]",children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-[var(--color-noir)] mb-3",children:"Rechercher un garage"}),o.jsx("p",{className:"text-sm sm:text-base text-[var(--color-noir-600)] mb-4",children:"Vous pouvez parcourir les garages disponibles..."}),o.jsx(J,{to:"/app/garages",className:"inline-block px-6 py-2.5 bg-[var(--color-rouge-600)] hover:bg-[var(--color-rouge-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300 text-sm sm:text-base",children:"Voir tous les garages "})]})]}),!s&&!m&&l.length>0&&o.jsxs("div",{className:"mt-12",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold",style:{color:"var(--color-noir)"},children:" Garages populaires"}),o.jsx(J,{to:"/app/garages",className:"text-sm font-semibold hover:underline",style:{color:"var(--color-rouge-600)"},children:"Voir tout "})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:l.slice(0,3).map(h=>{var y,g,p;return o.jsxs(J,{to:`/app/garage/${h._id}`,className:"bg-white/80 backdrop-blur-sm rounded-xl overflow-hidden shadow-md border hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"h-32 bg-gradient-to-br from-racine-100 to-rose-100 flex items-center justify-center relative",children:[h.images&&h.images.length>0?o.jsx("img",{src:h.images[0],alt:h.name,className:"w-full h-full object-cover"}):o.jsx("svg",{className:"w-12 h-12",style:{color:"var(--color-racine-400)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),h.isVerified&&o.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:""})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"font-bold mb-1",style:{color:"var(--color-noir)"},children:h.name}),o.jsx("p",{className:"text-xs mb-2",style:{color:"var(--color-noir-600)"},children:h.address.city}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs("span",{className:"text-sm font-semibold",style:{color:"var(--color-rose-600)"},children:[" ",((g=(y=h.rating)==null?void 0:y.average)==null?void 0:g.toFixed(1))||"0.0"]}),o.jsxs("span",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:["(",((p=h.rating)==null?void 0:p.count)||0,")"]})]})]})]},h._id)})})]})]})})}function by({garages:e,center:r=[48.8566,2.3522],zoom:t=12,height:n="400px",showMarkerPopup:s=!0,onMarkerClick:l}){const a=b.useRef(null),c=b.useRef(null),i=b.useRef([]),d=ue();return b.useEffect(()=>{const u=async()=>{if(!document.querySelector('link[href*="leaflet"]')){const f=document.createElement("link");f.rel="stylesheet",f.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",f.integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=",f.crossOrigin="",document.head.appendChild(f)}if(window.L)m();else return new Promise((f,j)=>{const w=document.createElement("script");w.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",w.integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=",w.crossOrigin="",w.onload=()=>f(),w.onerror=()=>j(new Error("Erreur chargement Leaflet")),document.head.appendChild(w)}).then(()=>{m()}).catch(f=>{console.error("Erreur chargement Leaflet:",f)})},m=()=>{if(!a.current||!window.L)return;const f=window.L;c.current?c.current.setView(r,t):(c.current=f.map(a.current).setView(r,t),f.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}).addTo(c.current)),i.current.forEach(w=>{c.current.removeLayer(w)}),i.current=[];let j=r;if(e.length>0){const w=e.filter(h=>{var y;return((y=h.location)==null?void 0:y.coordinates)&&h.location.coordinates.length===2&&h.location.coordinates[0]!==0&&h.location.coordinates[1]!==0&&!isNaN(h.location.coordinates[0])&&!isNaN(h.location.coordinates[1])});if(w.length>0){const h=w.reduce((g,p)=>{var x;return g+(((x=p.location)==null?void 0:x.coordinates[1])||0)},0)/w.length,y=w.reduce((g,p)=>{var x;return g+(((x=p.location)==null?void 0:x.coordinates[0])||0)},0)/w.length;(!r||r[0]===48.8566&&r[1]===2.3522)&&(j=[h,y])}}c.current&&j&&c.current.setView(j,t),e.forEach(w=>{var x;if(!w.location||!w.location.coordinates||w.location.coordinates.length!==2||w.location.coordinates[0]===0||w.location.coordinates[1]===0||isNaN(w.location.coordinates[0])||isNaN(w.location.coordinates[1]))return;const[h,y]=w.location.coordinates,g=f.divIcon({className:"custom-marker",html:`
            <div style="
              background-color: var(--color-rouge-600);
              width: 32px;
              height: 32px;
              border-radius: 50% 50% 50% 0;
              transform: rotate(-45deg);
              border: 3px solid white;
              box-shadow: 0 2px 4px rgba(0,0,0,0.3);
              display: flex;
              align-items: center;
              justify-content: center;
            ">
              <span style="
                transform: rotate(45deg);
                color: white;
                font-size: 18px;
                font-weight: bold;
              "></span>
            </div>
          `,iconSize:[32,32],iconAnchor:[16,32]}),p=f.marker([y,h],{icon:g}).addTo(c.current);if(s){const k=(x=w.rating)!=null&&x.average?` ${w.rating.average.toFixed(1)} (${w.rating.count})`:"",C=w.isVerified?" Vrifi":"";p.bindPopup(`
            <div style="min-width: 200px;">
              <h3 style="font-weight: bold; margin-bottom: 4px; color: var(--color-noir);">${w.name}</h3>
              <p style="font-size: 12px; color: var(--color-noir-600); margin: 4px 0;">
                ${w.address.street}<br/>
                ${w.address.postalCode} ${w.address.city}
              </p>
              ${k?`<p style="font-size: 11px; color: var(--color-rouge-600); margin: 4px 0;">${k}</p>`:""}
              ${C?`<p style="font-size: 11px; color: var(--color-rose-600); margin: 4px 0;">${C}</p>`:""}
              <button 
                onclick="window.location.href='/app/garage/${w._id}'"
                style="
                  background-color: var(--color-rouge-600);
                  color: white;
                  border: none;
                  padding: 6px 12px;
                  border-radius: 4px;
                  cursor: pointer;
                  font-size: 12px;
                  margin-top: 8px;
                  width: 100%;
                "
              >
                Voir le garage
              </button>
            </div>
          `)}p.on("click",()=>{l?l(w):d(`/app/garage/${w._id}`)}),i.current.push(p)})};return u(),()=>{c.current&&(c.current.remove(),c.current=null),i.current=[]}},[e,r,t,s,l,d]),o.jsx("div",{ref:a,style:{height:n,width:"100%",borderRadius:"12px",overflow:"hidden",border:"2px solid var(--color-racine-200)"},className:"garage-map"})}function wy(){const[e]=Qi(),r=Z(v=>v.user),t=Z(v=>!!v.token&&!!v.user),[n,s]=b.useState([]),[l,a]=b.useState(!0),[c,i]=b.useState(null),[d,u]=b.useState(e.get("search")||""),[m,f]=b.useState(""),[j,w]=b.useState(!1),[h,y]=b.useState("rating"),[g,p]=b.useState(0),[x,k]=b.useState(null),[C,E]=b.useState(!1),[P,L]=b.useState(new Set),[H,B]=b.useState("list"),X=ue(),D=(v,A,U,_)=>{const q=(U-v)*Math.PI/180,Q=(_-A)*Math.PI/180,W=Math.sin(q/2)*Math.sin(q/2)+Math.cos(v*Math.PI/180)*Math.cos(U*Math.PI/180)*Math.sin(Q/2)*Math.sin(Q/2);return 6371*(2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W)))},R=()=>{if(!navigator.geolocation){alert("La golocalisation n'est pas supporte par votre navigateur");return}E(!0),navigator.geolocation.getCurrentPosition(v=>{k({lat:v.coords.latitude,lng:v.coords.longitude}),V(v.coords.latitude,v.coords.longitude)},v=>{alert("Erreur de golocalisation: "+v.message),E(!1)})},V=async(v,A)=>{var U,_;a(!0),i(null);try{const M=await z.get("/garages/nearby",{params:{latitude:v,longitude:A,maxDistance:5e4}});s(M.data.garages)}catch(M){i(((_=(U=M.response)==null?void 0:U.data)==null?void 0:_.message)||"Erreur lors de la recherche")}finally{a(!1),E(!1)}},O=async()=>{var v,A;a(!0),i(null);try{const U={isActive:"true"};m&&(U.city=m),j&&(U.isVerified="true");let M=(await z.get("/garages",{params:U})).data.garages;d&&(M=M.filter(q=>q.name.toLowerCase().includes(d.toLowerCase()))),g>0&&(M=M.filter(q=>{var Q;return(((Q=q.rating)==null?void 0:Q.average)||0)>=g})),x&&(M=M.map(q=>{var Q;if((Q=q.location)!=null&&Q.coordinates){const[W,Je]=q.location.coordinates,Xe=D(x.lat,x.lng,Je,W);return{...q,distance:Xe}}return q})),M.sort((q,Q)=>{var W,Je,Xe,ye;switch(h){case"distance":return q.distance!==void 0&&Q.distance!==void 0?q.distance-Q.distance:q.distance!==void 0?-1:Q.distance!==void 0?1:(((W=Q.rating)==null?void 0:W.average)||0)-(((Je=q.rating)==null?void 0:Je.average)||0);case"name":return q.name.localeCompare(Q.name);case"rating":default:return(((Xe=Q.rating)==null?void 0:Xe.average)||0)-(((ye=q.rating)==null?void 0:ye.average)||0)}}),s(M)}catch(U){i(((A=(v=U.response)==null?void 0:v.data)==null?void 0:A.message)||"Erreur lors de la recherche")}finally{a(!1)}};b.useEffect(()=>{t&&(r==null?void 0:r.role)==="client"&&(async()=>{var A;try{const _=((A=(await z.get("/favorites")).data.favorites)==null?void 0:A.map(M=>{var q;return((q=M.garageId)==null?void 0:q._id)||M.garageId}))||[];L(new Set(_))}catch{}})()},[t,r]),b.useEffect(()=>{const v=e.get("search");v&&u(v)},[e]),b.useEffect(()=>{O()},[j,g,h]);const G=async(v,A)=>{var _,M;if(A.preventDefault(),A.stopPropagation(),!t||(r==null?void 0:r.role)!=="client")return;const U=P.has(v);try{U?(await z.delete(`/favorites/${v}`),L(q=>{const Q=new Set(q);return Q.delete(v),Q})):(await z.post("/favorites",{garageId:v}),L(q=>new Set([...q,v])))}catch(q){alert(((M=(_=q.response)==null?void 0:_.data)==null?void 0:M.message)||"Erreur lors de l'ajout/retrait des favoris")}},F=v=>{v.preventDefault(),O()},S=()=>["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()],N=v=>{if(!v.openingHours)return!0;const A=S(),U=v.openingHours[A];if(!U||U.closed)return!1;const _=new Date,M=`${_.getHours().toString().padStart(2,"0")}:${_.getMinutes().toString().padStart(2,"0")}`;return M>=U.open&&M<=U.close},I=v=>{const A=Math.floor(v),U=v%1>=.5,_=5-A-(U?1:0);return o.jsxs("div",{className:"flex items-center gap-0.5",children:[[...Array(A)].map((M,q)=>o.jsx("svg",{className:"w-4 h-4",style:{color:"var(--color-rose-500)"},fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},q)),U&&o.jsxs("svg",{className:"w-4 h-4",style:{color:"var(--color-rose-500)"},fill:"currentColor",viewBox:"0 0 20 20",children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"half",children:[o.jsx("stop",{offset:"50%",stopColor:"currentColor"}),o.jsx("stop",{offset:"50%",stopColor:"transparent",stopOpacity:"1"})]})}),o.jsx("path",{fill:"url(#half)",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]}),[...Array(_)].map((M,q)=>o.jsx("svg",{className:"w-4 h-4",style:{color:"var(--color-noir-300)"},fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},q))]})};return o.jsx("div",{className:"min-h-screen",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8 max-w-7xl",children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-6",style:{color:"var(--color-noir)"},children:"Trouver un garage"}),o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-4 sm:p-6 shadow-xl border mb-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsxs("form",{onSubmit:F,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[o.jsx("div",{className:"sm:col-span-2",children:o.jsx("input",{type:"text",placeholder:"Rechercher un garage par nom...",value:d,onChange:v=>u(v.target.value),className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:v=>v.target.style.borderColor="var(--color-rose-500)",onBlur:v=>v.target.style.borderColor="var(--color-racine-200)"})}),o.jsx("div",{children:o.jsx("input",{type:"text",placeholder:"Ville...",value:m,onChange:v=>f(v.target.value),className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:v=>v.target.style.borderColor="var(--color-rose-500)",onBlur:v=>v.target.style.borderColor="var(--color-racine-200)"})})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[o.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:" Rechercher"})}),o.jsx("button",{type:"button",onClick:R,disabled:C,className:"px-6 py-2.5 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:C?" Localisation...":" Garages prs de moi"})}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:j,onChange:v=>w(v.target.checked),className:"w-4 h-4 rounded",style:{accentColor:"var(--color-rouge-600)"}}),o.jsx("span",{className:"text-sm",style:{color:"var(--color-noir-700)"},children:"Vrifis uniquement"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-4 border-t",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Note minimale"}),o.jsxs("select",{value:g,onChange:v=>p(Number(v.target.value)),className:"w-full px-3 py-2 rounded-lg border-2 outline-none transition-all text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},onFocus:v=>v.target.style.borderColor="var(--color-rose-500)",onBlur:v=>v.target.style.borderColor="var(--color-racine-200)",children:[o.jsx("option",{value:0,children:"Toutes les notes"}),o.jsx("option",{value:4,children:"4 toiles et plus"}),o.jsx("option",{value:3,children:"3 toiles et plus"}),o.jsx("option",{value:2,children:"2 toiles et plus"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Trier par"}),o.jsxs("select",{value:h,onChange:v=>y(v.target.value),className:"w-full px-3 py-2 rounded-lg border-2 outline-none transition-all text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},onFocus:v=>v.target.style.borderColor="var(--color-rose-500)",onBlur:v=>v.target.style.borderColor="var(--color-racine-200)",children:[o.jsx("option",{value:"rating",children:"Note (meilleure d'abord)"}),x&&o.jsx("option",{value:"distance",children:"Distance (plus proche)"}),o.jsx("option",{value:"name",children:"Nom (A-Z)"})]})]})]})]})}),c&&o.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:c}),l&&o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement des garages..."})}),!l&&n.length===0&&o.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-8 text-center shadow-md border",style:{borderColor:"var(--color-racine-200)"},children:o.jsx("p",{className:"text-base",style:{color:"var(--color-noir-600)"},children:"Aucun garage trouv. Essayez de modifier vos critres de recherche."})}),!l&&n.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:[n.length," garage",n.length>1?"s":""," trouv",n.length>1?"s":""]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>B("list"),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-all ${H==="list"?"bg-[var(--color-rouge-600)] text-white shadow-md":"bg-white/50 text-[var(--color-noir-600)] border-2"}`,style:H==="list"?{}:{borderColor:"var(--color-racine-200)"},children:" Liste"}),o.jsx("button",{onClick:()=>B("map"),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-all ${H==="map"?"bg-[var(--color-rouge-600)] text-white shadow-md":"bg-white/50 text-[var(--color-noir-600)] border-2"}`,style:H==="map"?{}:{borderColor:"var(--color-racine-200)"},children:" Carte"})]})]}),H==="map"?o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-xl border p-4 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsx(by,{garages:n.filter(v=>{var A;return((A=v.location)==null?void 0:A.coordinates)&&v.location.coordinates[0]!==0&&v.location.coordinates[1]!==0}),center:x?[x.lat,x.lng]:n.filter(v=>{var A;return((A=v.location)==null?void 0:A.coordinates)&&v.location.coordinates[0]!==0}).length>0?(()=>{var A;const v=n.find(U=>{var _;return((_=U.location)==null?void 0:_.coordinates)&&U.location.coordinates[0]!==0});return v&&((A=v.location)!=null&&A.coordinates)?[v.location.coordinates[1],v.location.coordinates[0]]:[48.8566,2.3522]})():[48.8566,2.3522],zoom:x?12:n.filter(v=>{var A;return((A=v.location)==null?void 0:A.coordinates)&&v.location.coordinates[0]!==0}).length===1?15:10,height:"600px",showMarkerPopup:!0,onMarkerClick:v=>X(`/app/garage/${v._id}`)})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:n.map(v=>{var _,M;const A=N(v),U=v.distance;return o.jsxs(J,{to:`/app/garage/${v._id}`,className:"bg-white/80 backdrop-blur-sm rounded-xl overflow-hidden shadow-md border hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 hover:scale-[1.02] animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"h-48 flex items-center justify-center relative",style:{background:"linear-gradient(to bottom right, var(--color-racine-100), var(--color-rose-100))"},children:[v.images&&v.images.length>0?o.jsx("img",{src:v.images[0],alt:v.name,className:"w-full h-full object-cover"}):o.jsx("svg",{className:"w-20 h-20",style:{color:"var(--color-racine-400)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),v.isVerified&&o.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:" Vrifi"}),t&&(r==null?void 0:r.role)==="client"&&o.jsx("button",{onClick:q=>G(v._id,q),className:"absolute top-2 left-2 w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 hover:scale-125 active:scale-95 shadow-md hover:shadow-lg z-10 backdrop-blur-sm",style:{backgroundColor:P.has(v._id)?"var(--color-rose-600)":"rgba(255,255,255,0.9)",color:P.has(v._id)?"white":"var(--color-noir-600)"},children:P.has(v._id)?"":""}),o.jsx("div",{className:"absolute bottom-2 left-2 px-2 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:A?"var(--color-rouge-600)":"var(--color-noir-600)",color:"white"},children:A?" Ouvert":" Ferm"})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"text-lg font-bold mb-2",style:{color:"var(--color-noir)"},children:v.name}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[I(((_=v.rating)==null?void 0:_.average)||0),o.jsxs("span",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:["(",((M=v.rating)==null?void 0:M.count)||0," avis)"]})]}),o.jsxs("div",{className:"space-y-1 mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm",style:{color:"var(--color-noir-600)"},children:[o.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),v.address.street,", ",v.address.city]}),U!==void 0&&o.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",style:{color:"var(--color-rose-600)"},children:[" ",U.toFixed(1)," km"]})]}),v.description&&o.jsx("p",{className:"text-sm mb-3 line-clamp-2",style:{color:"var(--color-noir-600)"},children:v.description}),o.jsx("div",{className:"pt-3 border-t",style:{borderColor:"var(--color-racine-200)"},children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:v.phone}),o.jsx("span",{className:"text-xs font-semibold",style:{color:"var(--color-rouge-600)"},children:"Voir dtails "})]})})]})]},v._id)})})]})]})})}const Rr=Object.create(null);Rr.open="0";Rr.close="1";Rr.ping="2";Rr.pong="3";Rr.message="4";Rr.upgrade="5";Rr.noop="6";const Zn=Object.create(null);Object.keys(Rr).forEach(e=>{Zn[Rr[e]]=e});const Fa={type:"error",data:"parser error"},Ym=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Zm=typeof ArrayBuffer=="function",ef=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,ec=({type:e,data:r},t,n)=>Ym&&r instanceof Blob?t?n(r):Wd(r,n):Zm&&(r instanceof ArrayBuffer||ef(r))?t?n(r):Wd(new Blob([r]),n):n(Rr[e]+(r||"")),Wd=(e,r)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];r("b"+(n||""))},t.readAsDataURL(e)};function Hd(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Ol;function jy(e,r){if(Ym&&e.data instanceof Blob)return e.data.arrayBuffer().then(Hd).then(r);if(Zm&&(e.data instanceof ArrayBuffer||ef(e.data)))return r(Hd(e.data));ec(e,!1,t=>{Ol||(Ol=new TextEncoder),r(Ol.encode(t))})}const qd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Po=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<qd.length;e++)Po[qd.charCodeAt(e)]=e;const Ny=e=>{let r=e.length*.75,t=e.length,n,s=0,l,a,c,i;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);const d=new ArrayBuffer(r),u=new Uint8Array(d);for(n=0;n<t;n+=4)l=Po[e.charCodeAt(n)],a=Po[e.charCodeAt(n+1)],c=Po[e.charCodeAt(n+2)],i=Po[e.charCodeAt(n+3)],u[s++]=l<<2|a>>4,u[s++]=(a&15)<<4|c>>2,u[s++]=(c&3)<<6|i&63;return d},Cy=typeof ArrayBuffer=="function",rc=(e,r)=>{if(typeof e!="string")return{type:"message",data:rf(e,r)};const t=e.charAt(0);return t==="b"?{type:"message",data:ky(e.substring(1),r)}:Zn[t]?e.length>1?{type:Zn[t],data:e.substring(1)}:{type:Zn[t]}:Fa},ky=(e,r)=>{if(Cy){const t=Ny(e);return rf(t,r)}else return{base64:!0,data:e}},rf=(e,r)=>{switch(r){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},tf="",Sy=(e,r)=>{const t=e.length,n=new Array(t);let s=0;e.forEach((l,a)=>{ec(l,!1,c=>{n[a]=c,++s===t&&r(n.join(tf))})})},Ey=(e,r)=>{const t=e.split(tf),n=[];for(let s=0;s<t.length;s++){const l=rc(t[s],r);if(n.push(l),l.type==="error")break}return n};function _y(){return new TransformStream({transform(e,r){jy(e,t=>{const n=t.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const l=new DataView(s.buffer);l.setUint8(0,126),l.setUint16(1,n)}else{s=new Uint8Array(9);const l=new DataView(s.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(s[0]|=128),r.enqueue(s),r.enqueue(t)})}})}let Dl;function Tn(e){return e.reduce((r,t)=>r+t.length,0)}function In(e,r){if(e[0].length===r)return e.shift();const t=new Uint8Array(r);let n=0;for(let s=0;s<r;s++)t[s]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),t}function Ry(e,r){Dl||(Dl=new TextDecoder);const t=[];let n=0,s=-1,l=!1;return new TransformStream({transform(a,c){for(t.push(a);;){if(n===0){if(Tn(t)<1)break;const i=In(t,1);l=(i[0]&128)===128,s=i[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(Tn(t)<2)break;const i=In(t,2);s=new DataView(i.buffer,i.byteOffset,i.length).getUint16(0),n=3}else if(n===2){if(Tn(t)<8)break;const i=In(t,8),d=new DataView(i.buffer,i.byteOffset,i.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){c.enqueue(Fa);break}s=u*Math.pow(2,32)+d.getUint32(4),n=3}else{if(Tn(t)<s)break;const i=In(t,s);c.enqueue(rc(l?i:Dl.decode(i),r)),n=0}if(s===0||s>e){c.enqueue(Fa);break}}}})}const of=4;function we(e){if(e)return Py(e)}function Py(e){for(var r in we.prototype)e[r]=we.prototype[r];return e}we.prototype.on=we.prototype.addEventListener=function(e,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(r),this};we.prototype.once=function(e,r){function t(){this.off(e,t),r.apply(this,arguments)}return t.fn=r,this.on(e,t),this};we.prototype.off=we.prototype.removeListener=we.prototype.removeAllListeners=we.prototype.removeEventListener=function(e,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+e];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,s=0;s<t.length;s++)if(n=t[s],n===r||n.fn===r){t.splice(s,1);break}return t.length===0&&delete this._callbacks["$"+e],this};we.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var r=new Array(arguments.length-1),t=this._callbacks["$"+e],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,s=t.length;n<s;++n)t[n].apply(this,r)}return this};we.prototype.emitReserved=we.prototype.emit;we.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};we.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Zs=typeof Promise=="function"&&typeof Promise.resolve=="function"?r=>Promise.resolve().then(r):(r,t)=>t(r,0),ir=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Ay="arraybuffer";function nf(e,...r){return r.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{})}const Ly=ir.setTimeout,Ty=ir.clearTimeout;function el(e,r){r.useNativeTimers?(e.setTimeoutFn=Ly.bind(ir),e.clearTimeoutFn=Ty.bind(ir)):(e.setTimeoutFn=ir.setTimeout.bind(ir),e.clearTimeoutFn=ir.clearTimeout.bind(ir))}const Iy=1.33;function Oy(e){return typeof e=="string"?Dy(e):Math.ceil((e.byteLength||e.size)*Iy)}function Dy(e){let r=0,t=0;for(let n=0,s=e.length;n<s;n++)r=e.charCodeAt(n),r<128?t+=1:r<2048?t+=2:r<55296||r>=57344?t+=3:(n++,t+=4);return t}function sf(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function zy(e){let r="";for(let t in e)e.hasOwnProperty(t)&&(r.length&&(r+="&"),r+=encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return r}function My(e){let r={},t=e.split("&");for(let n=0,s=t.length;n<s;n++){let l=t[n].split("=");r[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return r}class Fy extends Error{constructor(r,t,n){super(r),this.description=t,this.context=n,this.type="TransportError"}}class tc extends we{constructor(r){super(),this.writable=!1,el(this,r),this.opts=r,this.query=r.query,this.socket=r.socket,this.supportsBinary=!r.forceBase64}onError(r,t,n){return super.emitReserved("error",new Fy(r,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(r){this.readyState==="open"&&this.write(r)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(r){const t=rc(r,this.socket.binaryType);this.onPacket(t)}onPacket(r){super.emitReserved("packet",r)}onClose(r){this.readyState="closed",super.emitReserved("close",r)}pause(r){}createUri(r,t={}){return r+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const r=this.opts.hostname;return r.indexOf(":")===-1?r:"["+r+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(r){const t=zy(r);return t.length?"?"+t:""}}class By extends tc{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(r){this.readyState="pausing";const t=()=>{this.readyState="paused",r()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(r){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Ey(r,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const r=()=>{this.write([{type:"close"}])};this.readyState==="open"?r():this.once("open",r)}write(r){this.writable=!1,Sy(r,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const r=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=sf()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(r,t)}}let lf=!1;try{lf=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Uy=lf;function $y(){}class Vy extends By{constructor(r){if(super(r),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&r.hostname!==location.hostname||n!==r.port}}doWrite(r,t){const n=this.request({method:"POST",data:r});n.on("success",t),n.on("error",(s,l)=>{this.onError("xhr post error",s,l)})}doPoll(){const r=this.request();r.on("data",this.onData.bind(this)),r.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=r}}class _r extends we{constructor(r,t,n){super(),this.createRequest=r,el(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var r;const t=nf(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(r=this._opts.cookieJar)===null||r===void 0||r.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=_r.requestsCount++,_r.requests[this._index]=this)}_onError(r){this.emitReserved("error",r,this._xhr),this._cleanup(!0)}_cleanup(r){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=$y,r)try{this._xhr.abort()}catch{}typeof document<"u"&&delete _r.requests[this._index],this._xhr=null}}_onLoad(){const r=this._xhr.responseText;r!==null&&(this.emitReserved("data",r),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}_r.requestsCount=0;_r.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Gd);else if(typeof addEventListener=="function"){const e="onpagehide"in ir?"pagehide":"unload";addEventListener(e,Gd,!1)}}function Gd(){for(let e in _r.requests)_r.requests.hasOwnProperty(e)&&_r.requests[e].abort()}const Wy=function(){const e=af({xdomain:!1});return e&&e.responseType!==null}();class Hy extends Vy{constructor(r){super(r);const t=r&&r.forceBase64;this.supportsBinary=Wy&&!t}request(r={}){return Object.assign(r,{xd:this.xd},this.opts),new _r(af,this.uri(),r)}}function af(e){const r=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!r||Uy))return new XMLHttpRequest}catch{}if(!r)try{return new ir[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const cf=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class qy extends tc{get name(){return"websocket"}doOpen(){const r=this.uri(),t=this.opts.protocols,n=cf?{}:nf(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(r,t,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=r=>this.onClose({description:"websocket connection closed",context:r}),this.ws.onmessage=r=>this.onData(r.data),this.ws.onerror=r=>this.onError("websocket error",r)}write(r){this.writable=!1;for(let t=0;t<r.length;t++){const n=r[t],s=t===r.length-1;ec(n,this.supportsBinary,l=>{try{this.doWrite(n,l)}catch{}s&&Zs(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const r=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=sf()),this.supportsBinary||(t.b64=1),this.createUri(r,t)}}const zl=ir.WebSocket||ir.MozWebSocket;class Gy extends qy{createSocket(r,t,n){return cf?new zl(r,t,n):t?new zl(r,t):new zl(r)}doWrite(r,t){this.ws.send(t)}}class Qy extends tc{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(r){return this.emitReserved("error",r)}this._transport.closed.then(()=>{this.onClose()}).catch(r=>{this.onError("webtransport error",r)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(r=>{const t=Ry(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=r.readable.pipeThrough(t).getReader(),s=_y();s.readable.pipeTo(r.writable),this._writer=s.writable.getWriter();const l=()=>{n.read().then(({done:c,value:i})=>{c||(this.onPacket(i),l())}).catch(c=>{})};l();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(r){this.writable=!1;for(let t=0;t<r.length;t++){const n=r[t],s=t===r.length-1;this._writer.write(n).then(()=>{s&&Zs(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var r;(r=this._transport)===null||r===void 0||r.close()}}const Ky={websocket:Gy,webtransport:Qy,polling:Hy},Jy=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Xy=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ba(e){if(e.length>8e3)throw"URI too long";const r=e,t=e.indexOf("["),n=e.indexOf("]");t!=-1&&n!=-1&&(e=e.substring(0,t)+e.substring(t,n).replace(/:/g,";")+e.substring(n,e.length));let s=Jy.exec(e||""),l={},a=14;for(;a--;)l[Xy[a]]=s[a]||"";return t!=-1&&n!=-1&&(l.source=r,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=Yy(l,l.path),l.queryKey=Zy(l,l.query),l}function Yy(e,r){const t=/\/{2,9}/g,n=r.replace(t,"/").split("/");return(r.slice(0,1)=="/"||r.length===0)&&n.splice(0,1),r.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Zy(e,r){const t={};return r.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,l){s&&(t[s]=l)}),t}const Ua=typeof addEventListener=="function"&&typeof removeEventListener=="function",es=[];Ua&&addEventListener("offline",()=>{es.forEach(e=>e())},!1);class st extends we{constructor(r,t){if(super(),this.binaryType=Ay,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,r&&typeof r=="object"&&(t=r,r=null),r){const n=Ba(r);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Ba(t.host).host);el(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=My(this.opts.query)),Ua&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},es.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(r){const t=Object.assign({},this.opts.query);t.EIO=of,t.transport=r,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[r]);return new this._transportsByName[r](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const r=this.opts.rememberUpgrade&&st.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(r);t.open(),this.setTransport(t)}setTransport(r){this.transport&&this.transport.removeAllListeners(),this.transport=r,r.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",st.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",r),this.emitReserved("heartbeat"),r.type){case"open":this.onHandshake(JSON.parse(r.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=r.data,this._onError(t);break;case"message":this.emitReserved("data",r.data),this.emitReserved("message",r.data);break}}onHandshake(r){this.emitReserved("handshake",r),this.id=r.sid,this.transport.query.sid=r.sid,this._pingInterval=r.pingInterval,this._pingTimeout=r.pingTimeout,this._maxPayload=r.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const r=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+r,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},r),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const r=this._getWritablePackets();this.transport.send(r),this._prevBufferLen=r.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(t+=Oy(s)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const r=Date.now()>this._pingTimeoutTime;return r&&(this._pingTimeoutTime=0,Zs(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),r}write(r,t,n){return this._sendPacket("message",r,t,n),this}send(r,t,n){return this._sendPacket("message",r,t,n),this}_sendPacket(r,t,n,s){if(typeof t=="function"&&(s=t,t=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const l={type:r,data:t,options:n};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),s&&this.once("flush",s),this.flush()}close(){const r=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),r()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():r()}):this.upgrading?n():r()),this}_onError(r){if(st.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",r),this._onClose("transport error",r)}_onClose(r,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ua&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=es.indexOf(this._offlineEventListener);n!==-1&&es.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",r,t),this.writeBuffer=[],this._prevBufferLen=0}}}st.protocol=of;class e1 extends st{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let r=0;r<this._upgrades.length;r++)this._probe(this._upgrades[r])}_probe(r){let t=this.createTransport(r),n=!1;st.priorWebsocketSuccess=!1;const s=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",m=>{if(!n)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;st.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=t.name,this.emitReserved("upgradeError",f)}}))};function l(){n||(n=!0,u(),t.close(),t=null)}const a=m=>{const f=new Error("probe error: "+m);f.transport=t.name,l(),this.emitReserved("upgradeError",f)};function c(){a("transport closed")}function i(){a("socket closed")}function d(m){t&&m.name!==t.name&&l()}const u=()=>{t.removeListener("open",s),t.removeListener("error",a),t.removeListener("close",c),this.off("close",i),this.off("upgrading",d)};t.once("open",s),t.once("error",a),t.once("close",c),this.once("close",i),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&r!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(r){this._upgrades=this._filterUpgrades(r.upgrades),super.onHandshake(r)}_filterUpgrades(r){const t=[];for(let n=0;n<r.length;n++)~this.transports.indexOf(r[n])&&t.push(r[n]);return t}}let r1=class extends e1{constructor(r,t={}){const n=typeof r=="object"?r:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(s=>Ky[s]).filter(s=>!!s)),super(r,n)}};function t1(e,r="",t){let n=e;t=t||typeof location<"u"&&location,e==null&&(e=t.protocol+"//"+t.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=t.protocol+e:e=t.host+e),/^(https?|wss?):\/\//.test(e)||(typeof t<"u"?e=t.protocol+"//"+e:e="https://"+e),n=Ba(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const l=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+l+":"+n.port+r,n.href=n.protocol+"://"+l+(t&&t.port===n.port?"":":"+n.port),n}const o1=typeof ArrayBuffer=="function",n1=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,df=Object.prototype.toString,s1=typeof Blob=="function"||typeof Blob<"u"&&df.call(Blob)==="[object BlobConstructor]",l1=typeof File=="function"||typeof File<"u"&&df.call(File)==="[object FileConstructor]";function oc(e){return o1&&(e instanceof ArrayBuffer||n1(e))||s1&&e instanceof Blob||l1&&e instanceof File}function rs(e,r){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(rs(e[t]))return!0;return!1}if(oc(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return rs(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&rs(e[t]))return!0;return!1}function a1(e){const r=[],t=e.data,n=e;return n.data=$a(t,r),n.attachments=r.length,{packet:n,buffers:r}}function $a(e,r){if(!e)return e;if(oc(e)){const t={_placeholder:!0,num:r.length};return r.push(e),t}else if(Array.isArray(e)){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=$a(e[n],r);return t}else if(typeof e=="object"&&!(e instanceof Date)){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=$a(e[n],r));return t}return e}function i1(e,r){return e.data=Va(e.data,r),delete e.attachments,e}function Va(e,r){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<r.length)return r[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let t=0;t<e.length;t++)e[t]=Va(e[t],r);else if(typeof e=="object")for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=Va(e[t],r));return e}const c1=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],d1=5;var re;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(re||(re={}));class u1{constructor(r){this.replacer=r}encode(r){return(r.type===re.EVENT||r.type===re.ACK)&&rs(r)?this.encodeAsBinary({type:r.type===re.EVENT?re.BINARY_EVENT:re.BINARY_ACK,nsp:r.nsp,data:r.data,id:r.id}):[this.encodeAsString(r)]}encodeAsString(r){let t=""+r.type;return(r.type===re.BINARY_EVENT||r.type===re.BINARY_ACK)&&(t+=r.attachments+"-"),r.nsp&&r.nsp!=="/"&&(t+=r.nsp+","),r.id!=null&&(t+=r.id),r.data!=null&&(t+=JSON.stringify(r.data,this.replacer)),t}encodeAsBinary(r){const t=a1(r),n=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(n),s}}function Qd(e){return Object.prototype.toString.call(e)==="[object Object]"}class nc extends we{constructor(r){super(),this.reviver=r}add(r){let t;if(typeof r=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(r);const n=t.type===re.BINARY_EVENT;n||t.type===re.BINARY_ACK?(t.type=n?re.EVENT:re.ACK,this.reconstructor=new h1(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(oc(r)||r.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(r),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+r)}decodeString(r){let t=0;const n={type:Number(r.charAt(0))};if(re[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===re.BINARY_EVENT||n.type===re.BINARY_ACK){const l=t+1;for(;r.charAt(++t)!=="-"&&t!=r.length;);const a=r.substring(l,t);if(a!=Number(a)||r.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(r.charAt(t+1)==="/"){const l=t+1;for(;++t&&!(r.charAt(t)===","||t===r.length););n.nsp=r.substring(l,t)}else n.nsp="/";const s=r.charAt(t+1);if(s!==""&&Number(s)==s){const l=t+1;for(;++t;){const a=r.charAt(t);if(a==null||Number(a)!=a){--t;break}if(t===r.length)break}n.id=Number(r.substring(l,t+1))}if(r.charAt(++t)){const l=this.tryParse(r.substr(t));if(nc.isPayloadValid(n.type,l))n.data=l;else throw new Error("invalid payload")}return n}tryParse(r){try{return JSON.parse(r,this.reviver)}catch{return!1}}static isPayloadValid(r,t){switch(r){case re.CONNECT:return Qd(t);case re.DISCONNECT:return t===void 0;case re.CONNECT_ERROR:return typeof t=="string"||Qd(t);case re.EVENT:case re.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&c1.indexOf(t[0])===-1);case re.ACK:case re.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class h1{constructor(r){this.packet=r,this.buffers=[],this.reconPack=r}takeBinaryData(r){if(this.buffers.push(r),this.buffers.length===this.reconPack.attachments){const t=i1(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const m1=Object.freeze(Object.defineProperty({__proto__:null,Decoder:nc,Encoder:u1,get PacketType(){return re},protocol:d1},Symbol.toStringTag,{value:"Module"}));function vr(e,r,t){return e.on(r,t),function(){e.off(r,t)}}const f1=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class uf extends we{constructor(r,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=r,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const r=this.io;this.subs=[vr(r,"open",this.onopen.bind(this)),vr(r,"packet",this.onpacket.bind(this)),vr(r,"error",this.onerror.bind(this)),vr(r,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...r){return r.unshift("message"),this.emit.apply(this,r),this}emit(r,...t){var n,s,l;if(f1.hasOwnProperty(r))throw new Error('"'+r.toString()+'" is a reserved event name');if(t.unshift(r),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:re.EVENT,data:t};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const u=this.ids++,m=t.pop();this._registerAckCallback(u,m),a.id=u}const c=(s=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||s===void 0?void 0:s.writable,i=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!c||(i?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(r,t){var n;const s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[r]=t;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[r];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===r&&this.sendBuffer.splice(c,1);t.call(this,new Error("operation has timed out"))},s),a=(...c)=>{this.io.clearTimeoutFn(l),t.apply(this,c)};a.withError=!0,this.acks[r]=a}emitWithAck(r,...t){return new Promise((n,s)=>{const l=(a,c)=>a?s(a):n(c);l.withError=!0,t.push(l),this.emit(r,...t)})}_addToQueue(r){let t;typeof r[r.length-1]=="function"&&(t=r.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:r,flags:Object.assign({fromQueue:!0},this.flags)};r.push((s,...l)=>n!==this._queue[0]?void 0:(s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(s)):(this._queue.shift(),t&&t(null,...l)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(r=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!r||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(r){r.nsp=this.nsp,this.io._packet(r)}onopen(){typeof this.auth=="function"?this.auth(r=>{this._sendConnectPacket(r)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(r){this.packet({type:re.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},r):r})}onerror(r){this.connected||this.emitReserved("connect_error",r)}onclose(r,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",r,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(r=>{if(!this.sendBuffer.some(n=>String(n.id)===r)){const n=this.acks[r];delete this.acks[r],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(r){if(r.nsp===this.nsp)switch(r.type){case re.CONNECT:r.data&&r.data.sid?this.onconnect(r.data.sid,r.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case re.EVENT:case re.BINARY_EVENT:this.onevent(r);break;case re.ACK:case re.BINARY_ACK:this.onack(r);break;case re.DISCONNECT:this.ondisconnect();break;case re.CONNECT_ERROR:this.destroy();const n=new Error(r.data.message);n.data=r.data.data,this.emitReserved("connect_error",n);break}}onevent(r){const t=r.data||[];r.id!=null&&t.push(this.ack(r.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(r){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,r)}super.emit.apply(this,r),this._pid&&r.length&&typeof r[r.length-1]=="string"&&(this._lastOffset=r[r.length-1])}ack(r){const t=this;let n=!1;return function(...s){n||(n=!0,t.packet({type:re.ACK,id:r,data:s}))}}onack(r){const t=this.acks[r.id];typeof t=="function"&&(delete this.acks[r.id],t.withError&&r.data.unshift(null),t.apply(this,r.data))}onconnect(r,t){this.id=r,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(r=>this.emitEvent(r)),this.receiveBuffer=[],this.sendBuffer.forEach(r=>{this.notifyOutgoingListeners(r),this.packet(r)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(r=>r()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:re.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(r){return this.flags.compress=r,this}get volatile(){return this.flags.volatile=!0,this}timeout(r){return this.flags.timeout=r,this}onAny(r){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(r),this}prependAny(r){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(r),this}offAny(r){if(!this._anyListeners)return this;if(r){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(r===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(r){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(r),this}prependAnyOutgoing(r){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(r),this}offAnyOutgoing(r){if(!this._anyOutgoingListeners)return this;if(r){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(r===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(r){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,r.data)}}}function mo(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}mo.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var r=Math.random(),t=Math.floor(r*this.jitter*e);e=Math.floor(r*10)&1?e+t:e-t}return Math.min(e,this.max)|0};mo.prototype.reset=function(){this.attempts=0};mo.prototype.setMin=function(e){this.ms=e};mo.prototype.setMax=function(e){this.max=e};mo.prototype.setJitter=function(e){this.jitter=e};class Wa extends we{constructor(r,t){var n;super(),this.nsps={},this.subs=[],r&&typeof r=="object"&&(t=r,r=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,el(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new mo({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=r;const s=t.parser||m1;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(r){return arguments.length?(this._reconnection=!!r,r||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(r){return r===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=r,this)}reconnectionDelay(r){var t;return r===void 0?this._reconnectionDelay:(this._reconnectionDelay=r,(t=this.backoff)===null||t===void 0||t.setMin(r),this)}randomizationFactor(r){var t;return r===void 0?this._randomizationFactor:(this._randomizationFactor=r,(t=this.backoff)===null||t===void 0||t.setJitter(r),this)}reconnectionDelayMax(r){var t;return r===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=r,(t=this.backoff)===null||t===void 0||t.setMax(r),this)}timeout(r){return arguments.length?(this._timeout=r,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(r){if(~this._readyState.indexOf("open"))return this;this.engine=new r1(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=vr(t,"open",function(){n.onopen(),r&&r()}),l=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),r?r(c):this.maybeReconnectOnOpen()},a=vr(t,"error",l);if(this._timeout!==!1){const c=this._timeout,i=this.setTimeoutFn(()=>{s(),l(new Error("timeout")),t.close()},c);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}return this.subs.push(s),this.subs.push(a),this}connect(r){return this.open(r)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const r=this.engine;this.subs.push(vr(r,"ping",this.onping.bind(this)),vr(r,"data",this.ondata.bind(this)),vr(r,"error",this.onerror.bind(this)),vr(r,"close",this.onclose.bind(this)),vr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(r){try{this.decoder.add(r)}catch(t){this.onclose("parse error",t)}}ondecoded(r){Zs(()=>{this.emitReserved("packet",r)},this.setTimeoutFn)}onerror(r){this.emitReserved("error",r)}socket(r,t){let n=this.nsps[r];return n?this._autoConnect&&!n.active&&n.connect():(n=new uf(this,r,t),this.nsps[r]=n),n}_destroy(r){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(r){const t=this.encoder.encode(r);for(let n=0;n<t.length;n++)this.engine.write(t[n],r.options)}cleanup(){this.subs.forEach(r=>r()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(r,t){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",r,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const r=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{r.skipReconnect||(this.emitReserved("reconnect_attempt",r.backoff.attempts),!r.skipReconnect&&r.open(s=>{s?(r._reconnecting=!1,r.reconnect(),this.emitReserved("reconnect_error",s)):r.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const r=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",r)}}const No={};function ts(e,r){typeof e=="object"&&(r=e,e=void 0),r=r||{};const t=t1(e,r.path||"/socket.io"),n=t.source,s=t.id,l=t.path,a=No[s]&&l in No[s].nsps,c=r.forceNew||r["force new connection"]||r.multiplex===!1||a;let i;return c?i=new Wa(n,r):(No[s]||(No[s]=new Wa(n,r)),i=No[s]),t.query&&!r.query&&(r.query=t.queryKey),i.socket(t.path,r)}Object.assign(ts,{Manager:Wa,Socket:uf,io:ts,connect:ts});const p1={VITE_API_BASE_URL:"http://localhost:5000/api"};class v1{constructor(){this.socket=null,this.baseURL=this.resolveBaseUrl()}resolveBaseUrl(){const r=p1;if(r!=null&&r.VITE_SOCKET_URL)return r.VITE_SOCKET_URL;const t=r==null?void 0:r.VITE_API_BASE_URL;try{const n=new URL(t);return n.pathname="",n.search="",n.hash="",n.toString().replace(/\/$/,"")}catch{return console.warn("[socket] Impossible de parser VITE_API_BASE_URL, fallback localhost"),"http://localhost:5000"}}connect(){var t;if((t=this.socket)!=null&&t.connected)return this.socket;const r=Z.getState().token;return this.socket=ts(this.baseURL,{auth:{token:r||void 0},transports:["websocket","polling"]}),this.socket.on("connect",()=>{console.log(" Connect au serveur Socket.io")}),this.socket.on("disconnect",()=>{console.log(" Dconnect du serveur Socket.io")}),this.socket.on("connect_error",n=>{console.error(" Erreur de connexion Socket.io:",n)}),this.socket}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}joinRoom(r){this.socket&&this.socket.emit("join-room",r)}leaveRoom(r){this.socket&&this.socket.emit("leave-room",r)}sendMessage(r){this.socket&&this.socket.emit("send-message",r)}onMessage(r){this.socket&&this.socket.on("new-message",r)}offMessage(r){this.socket&&this.socket.off("new-message",r)}getSocket(){return this.socket}isConnected(){var r;return((r=this.socket)==null?void 0:r.connected)||!1}}const On=new v1;function rl({userId:e,appointmentId:r,onClose:t}){var A,U;const[n,s]=b.useState([]),[l,a]=b.useState(!0),[c,i]=b.useState(!1),[d,u]=b.useState(""),[m,f]=b.useState(null),[j,w]=b.useState([]),[h,y]=b.useState([]),[g,p]=b.useState(null),[x,k]=b.useState(!1),[C,E]=b.useState(!1),P=b.useRef(null),L=Z(_=>_.user);b.useEffect(()=>(B(),H(),(L==null?void 0:L.role)==="client"&&D(),(L==null?void 0:L.role)==="garagiste"&&(R(),V()),()=>{On.offMessage()}),[e,L]);const H=()=>{On.connect();const M=`conversation-${(L==null?void 0:L._id)||(L==null?void 0:L.id)}-${e}`;On.joinRoom(M),On.onMessage(q=>{q.message&&(q.message.senderId._id===e||q.message.receiverId._id===e)&&(s(Q=>[...Q,q.message]),v())})},B=async()=>{try{const _=await z.get(`/messages/conversation/${e}`);if(s(_.data.messages||[]),_.data.messages&&_.data.messages.length>0){const M=_.data.messages[0],q=(L==null?void 0:L._id)||(L==null?void 0:L.id),Q=M.senderId._id===q?M.receiverId:M.senderId;Q.role==="admin"&&(Q.name="Promoto"),f(Q)}else try{const q=(await z.get(`/users/${e}/public`)).data.user;q.role==="admin"&&(q.name="Promoto"),f(q)}catch(M){console.error("Erreur rcupration utilisateur:",M),f({_id:e,name:"Utilisateur",email:""})}a(!1),v()}catch(_){console.error("Erreur chargement conversation:",_);try{const q=(await z.get(`/users/${e}/public`)).data.user;q.role==="admin"&&(q.name="Promoto"),f(q)}catch{f({_id:e,name:"Utilisateur",email:""})}a(!1)}},X=async()=>{var _,M;if(!(!d.trim()||c)){i(!0);try{const q=await z.post("/messages",{receiverId:e,appointmentId:r||void 0,content:d});s(Q=>[...Q,q.data.message]),u(""),v(),await z.put("/messages/read",{senderId:e})}catch(q){alert(((M=(_=q.response)==null?void 0:_.data)==null?void 0:M.message)||"Erreur lors de l'envoi")}finally{i(!1)}}},D=async()=>{try{const _=await z.get("/quotes/client/me");w(_.data.quotes||[])}catch(_){console.error("Erreur chargement devis:",_)}},R=async()=>{try{const _=await z.get("/quotes/garage/me");w(_.data.quotes||[])}catch(_){console.error("Erreur chargement devis garagiste:",_)}},V=async()=>{try{const _=await z.get("/invoices/garage/me");y(_.data.invoices||[])}catch(_){console.error("Erreur chargement factures:",_)}},O=async _=>{var M,q;try{await z.post(`/quotes/${_}/send`,{sendViaChat:!0,sendViaEmail:!1}),k(!1),await B(),alert("Devis envoy avec succs !")}catch(Q){alert(((q=(M=Q.response)==null?void 0:M.data)==null?void 0:q.message)||"Erreur lors de l'envoi")}},G=async _=>{var M,q;try{await z.post(`/invoices/${_}/send`,{sendViaChat:!0,sendViaEmail:!1}),E(!1),await B(),alert("Facture envoye avec succs !")}catch(Q){alert(((q=(M=Q.response)==null?void 0:M.data)==null?void 0:q.message)||"Erreur lors de l'envoi")}},F=_=>{const M=_.match(/Devis\s+([A-Z]+-\d{4}-\d+)/i);return M?M[1]:null},S=_=>{if((L==null?void 0:L.role)!=="client")return null;const M=F(_.content);return M&&j.find(q=>q.quoteNumber===M)||null},N=async _=>{var M,q;if(confirm("tes-vous sr de vouloir accepter ce devis ?")){p(_);try{await z.put(`/quotes/${_}/accept`),await D(),alert("Devis accept avec succs !")}catch(Q){alert(((q=(M=Q.response)==null?void 0:M.data)==null?void 0:q.message)||"Erreur lors de l'acceptation")}finally{p(null)}}},I=async _=>{var M,q;if(confirm("tes-vous sr de vouloir rejeter ce devis ?")){p(_);try{await z.put(`/quotes/${_}/reject`),await D(),alert("Devis rejet")}catch(Q){alert(((q=(M=Q.response)==null?void 0:M.data)==null?void 0:q.message)||"Erreur lors du rejet")}finally{p(null)}}},v=()=>{setTimeout(()=>{var _;(_=P.current)==null||_.scrollIntoView({behavior:"smooth"})},100)};return b.useEffect(()=>{const _=M=>{const q=M.target;!q.closest(".quote-menu")&&!q.closest(".invoice-menu")&&(k(!1),E(!1))};if(x||C)return document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[x,C]),l?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):o.jsxs("div",{className:"flex flex-col h-full max-h-[600px] bg-white/90 backdrop-blur-md rounded-xl shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("div",{className:"p-4 border-b flex items-center justify-between",style:{borderColor:"var(--color-racine-200)"},children:o.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[t&&o.jsx("button",{onClick:t,className:"p-2 hover:bg-opacity-50 rounded-lg transition-all duration-300 flex-shrink-0",style:{backgroundColor:"var(--color-racine-100)"},title:"Retour aux conversations",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{color:"var(--color-noir-700)"},children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),m!=null&&m.avatar?o.jsx("img",{src:m.avatar,alt:m.name,className:"w-10 h-10 rounded-full flex-shrink-0"}):o.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold flex-shrink-0",style:{backgroundColor:"var(--color-rouge-100)",color:"var(--color-rouge-700)"},children:((U=(A=m==null?void 0:m.name)==null?void 0:A[0])==null?void 0:U.toUpperCase())||"U"}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h3",{className:"font-semibold truncate",style:{color:"var(--color-noir)"},children:(m==null?void 0:m.name)||"Utilisateur"}),o.jsx("p",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:"En ligne"})]})]})}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-1",style:{backgroundColor:"#efeae2",backgroundImage:`url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern id='grid' width='40' height='40' patternUnits='userSpaceOnUse'%3E%3Cpath d='M 40 0 L 0 0 0 40' fill='none' stroke='%23d4d1c7' stroke-width='0.5' opacity='0.3'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100' height='100' fill='url(%23grid)'/%3E%3C/svg%3E")`},children:[n.map((_,M)=>{var Xe,ye;const q=(L==null?void 0:L._id)||(L==null?void 0:L.id),Q=_.senderId._id===q,W=M>0?n[M-1]:null,Je=!Q&&(!W||W.senderId._id!==_.senderId._id);return!W||new Date(_.createdAt).getTime()-new Date(W.createdAt).getTime()>5*60*1e3,o.jsxs("div",{className:`flex items-end gap-2 ${Q?"justify-end flex-row-reverse":"justify-start"}`,children:[!Q&&o.jsx("div",{className:"flex-shrink-0 w-8 h-8",children:Je?_.senderId.avatar?o.jsx("img",{src:_.senderId.avatar,alt:_.senderId.name,className:"w-8 h-8 rounded-full"}):o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:"var(--color-rouge-100)",color:"var(--color-rouge-700)"},children:(ye=(Xe=_.senderId.name||"U")==null?void 0:Xe[0])==null?void 0:ye.toUpperCase()}):o.jsx("div",{className:"w-8"})}),o.jsx("div",{className:`flex flex-col ${Q?"items-end":"items-start"} max-w-[75%]`,children:o.jsxs("div",{className:`px-4 py-2.5 rounded-2xl shadow-sm ${Q?"rounded-br-sm":"rounded-bl-sm"}`,style:{backgroundColor:Q?"#dcf8c6":"white",color:"#000",border:Q?"none":"1px solid #e5e5e5",boxShadow:Q?"0 1px 2px rgba(0,0,0,0.1)":"0 1px 2px rgba(0,0,0,0.08)"},children:[o.jsx("p",{className:"text-sm leading-relaxed break-words",style:{color:Q?"#000":"#303030"},children:_.content}),_.attachments&&_.attachments.length>0&&o.jsx("div",{className:"mt-2 space-y-2",children:_.attachments.map((nr,ol)=>{const lc=nr.toLowerCase().endsWith(".pdf")||nr.includes("pdf")||nr.includes("application/pdf"),sr=!Q&&(L==null?void 0:L.role)==="client"&&lc?S(_):null,Ef=sr&&sr.status==="sent"&&new Date(sr.validUntil)>=new Date;return o.jsx("div",{className:"border rounded-lg p-3 bg-white/50",children:lc?o.jsxs("div",{children:[o.jsxs("a",{href:nr,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:opacity-80 transition-opacity mb-3",children:[o.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:"Document PDF"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Cliquez pour tlcharger"})]}),o.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})]}),sr&&o.jsx("div",{className:"pt-3 border-t border-gray-200",children:sr.status==="accepted"?o.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-green-50",children:[o.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),o.jsx("p",{className:"text-sm font-semibold text-green-700",children:" Devis accept"})]}):sr.status==="rejected"?o.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-red-50",children:[o.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),o.jsx("p",{className:"text-sm font-semibold text-red-700",children:" Devis rejet"})]}):Ef?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>N(sr._id),disabled:g===sr._id,className:"flex-1 px-4 py-2 text-sm font-semibold rounded-lg transition-all disabled:opacity-50 hover:shadow-md",style:{backgroundColor:"#10b981",color:"white"},children:g===sr._id?"Traitement...":" Accepter le devis"}),o.jsx("button",{onClick:()=>I(sr._id),disabled:g===sr._id,className:"flex-1 px-4 py-2 text-sm font-semibold rounded-lg transition-all disabled:opacity-50 hover:shadow-md",style:{backgroundColor:"#ef4444",color:"white"},children:g===sr._id?"Traitement...":" Refuser le devis"})]}):o.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-yellow-50",children:[o.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),o.jsx("p",{className:"text-sm font-semibold text-yellow-700",children:"Devis expir"})]})})]}):o.jsx("a",{href:nr,target:"_blank",rel:"noopener noreferrer",className:"block",children:o.jsx("img",{src:nr,alt:"Attachment",className:"max-w-full h-auto rounded"})})},ol)})}),o.jsxs("div",{className:`flex items-center gap-1 mt-1.5 ${Q?"justify-end":"justify-start"}`,children:[o.jsx("p",{className:"text-xs",style:{color:"#667781",opacity:.8},children:new Date(_.createdAt).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}),Q&&o.jsx("svg",{className:"w-3.5 h-3.5",style:{color:"#667781"},fill:"currentColor",viewBox:"0 0 16 15",children:o.jsx("path",{d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.175a.366.366 0 0 0-.063-.51z"})})]})]})}),Q&&o.jsx("div",{className:"flex-shrink-0 w-8"})]},_._id)}),o.jsx("div",{ref:P})]}),o.jsxs("div",{className:"p-4 border-t",style:{borderColor:"var(--color-racine-200)"},children:[(L==null?void 0:L.role)==="garagiste"&&o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsxs("div",{className:"relative quote-menu",children:[o.jsx("button",{onClick:()=>{k(!x),E(!1)},className:"px-3 py-1.5 text-xs font-semibold rounded-lg border-2 transition-all hover:shadow-md",style:{borderColor:"var(--color-racine-300)",color:"var(--color-racine-700)",backgroundColor:x?"var(--color-racine-100)":"white"},children:" Envoyer un devis"}),x&&j.length>0&&o.jsx("div",{className:"absolute bottom-full left-0 mb-2 bg-white rounded-lg shadow-xl border-2 z-50 max-h-60 overflow-y-auto min-w-[250px]",style:{borderColor:"var(--color-racine-200)"},children:o.jsxs("div",{className:"p-2",children:[o.jsx("p",{className:"text-xs font-semibold mb-2 px-2",style:{color:"var(--color-noir-700)"},children:"Slectionner un devis :"}),j.filter(_=>{var M;return((M=_.clientId)==null?void 0:M._id)===e||_.clientId===e}).map(_=>o.jsxs("button",{onClick:()=>O(_._id),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded-lg mb-1 transition-colors",style:{color:"var(--color-noir-700)"},children:[o.jsx("div",{className:"font-semibold",children:_.quoteNumber}),o.jsxs("div",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:[_.total.toFixed(2)," - ",_.status==="sent"?"Envoy":_.status==="accepted"?"Accept":_.status]})]},_._id)),j.filter(_=>{var M;return((M=_.clientId)==null?void 0:M._id)===e||_.clientId===e}).length===0&&o.jsx("p",{className:"text-xs px-2 py-2",style:{color:"var(--color-noir-500)"},children:"Aucun devis pour ce client"})]})})]}),o.jsxs("div",{className:"relative invoice-menu",children:[o.jsx("button",{onClick:()=>{E(!C),k(!1)},className:"px-3 py-1.5 text-xs font-semibold rounded-lg border-2 transition-all hover:shadow-md",style:{borderColor:"var(--color-rouge-300)",color:"var(--color-rouge-700)",backgroundColor:C?"var(--color-rouge-100)":"white"},children:" Envoyer une facture"}),C&&h.length>0&&o.jsx("div",{className:"absolute bottom-full left-0 mb-2 bg-white rounded-lg shadow-xl border-2 z-50 max-h-60 overflow-y-auto min-w-[250px]",style:{borderColor:"var(--color-rouge-200)"},children:o.jsxs("div",{className:"p-2",children:[o.jsx("p",{className:"text-xs font-semibold mb-2 px-2",style:{color:"var(--color-noir-700)"},children:"Slectionner une facture :"}),h.filter(_=>{var M;return((M=_.clientId)==null?void 0:M._id)===e||_.clientId===e}).map(_=>o.jsxs("button",{onClick:()=>G(_._id),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded-lg mb-1 transition-colors",style:{color:"var(--color-noir-700)"},children:[o.jsx("div",{className:"font-semibold",children:_.invoiceNumber}),o.jsxs("div",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:[_.total.toFixed(2)," - ",_.status]})]},_._id)),h.filter(_=>{var M;return((M=_.clientId)==null?void 0:M._id)===e||_.clientId===e}).length===0&&o.jsx("p",{className:"text-xs px-2 py-2",style:{color:"var(--color-noir-500)"},children:"Aucune facture pour ce client"})]})})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:d,onChange:_=>u(_.target.value),onKeyPress:_=>_.key==="Enter"&&X(),placeholder:"Tapez votre message...",className:"flex-1 px-4 py-2 rounded-lg border-2 outline-none transition-all duration-300",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"}}),o.jsx("button",{onClick:X,disabled:c||!d.trim(),className:"px-6 py-2 rounded-lg font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:"Envoyer"})})]})]})]})}function x1({latitude:e,longitude:r,garageName:t,address:n,height:s="300px"}){const l=b.useRef(null),a=b.useRef(null);return b.useEffect(()=>{const c=async()=>{if(!document.querySelector('link[href*="leaflet"]')){const d=document.createElement("link");d.rel="stylesheet",d.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",d.integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=",d.crossOrigin="",document.head.appendChild(d)}if(window.L)i();else return new Promise((d,u)=>{const m=document.createElement("script");m.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",m.integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=",m.crossOrigin="",m.onload=()=>d(),m.onerror=()=>u(new Error("Erreur chargement Leaflet")),document.head.appendChild(m)}).then(()=>{i()}).catch(d=>{console.error("Erreur chargement Leaflet:",d)})},i=()=>{if(!l.current||!window.L)return;const d=window.L;if(!a.current){a.current=d.map(l.current).setView([e,r],15),d.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}).addTo(a.current);const u=d.divIcon({className:"custom-marker",html:`
            <div style="
              background-color: var(--color-rouge-600);
              width: 40px;
              height: 40px;
              border-radius: 50% 50% 50% 0;
              transform: rotate(-45deg);
              border: 3px solid white;
              box-shadow: 0 2px 6px rgba(0,0,0,0.4);
              display: flex;
              align-items: center;
              justify-content: center;
            ">
              <span style="
                transform: rotate(45deg);
                color: white;
                font-size: 20px;
                font-weight: bold;
              "></span>
            </div>
          `,iconSize:[40,40],iconAnchor:[20,40]}),m=d.marker([e,r],{icon:u}).addTo(a.current);n&&(m.bindPopup(`
            <div style="min-width: 200px;">
              <h3 style="font-weight: bold; margin-bottom: 4px; color: var(--color-noir);">${t}</h3>
              <p style="font-size: 12px; color: var(--color-noir-600); margin: 4px 0;">${n}</p>
            </div>
          `),m.openPopup())}};return c(),()=>{a.current&&(a.current.remove(),a.current=null)}},[e,r,t,n]),o.jsx("div",{ref:l,style:{height:s,width:"100%",borderRadius:"12px",overflow:"hidden",border:"2px solid var(--color-racine-200)"},className:"single-garage-map"})}function g1(){var R,V,O,G;const{id:e}=Gi(),r=ue(),t=Z(F=>F.user),n=Z(F=>!!F.token&&!!F.user),[s,l]=b.useState(null),[a,c]=b.useState([]),[i,d]=b.useState([]),[u,m]=b.useState(!0),[f,j]=b.useState(null),[w,h]=b.useState("info"),[y,g]=b.useState(!1),[p,x]=b.useState(!1),[k,C]=b.useState(!1),[E,P]=b.useState(null);b.useEffect(()=>{if(!e)return;(async()=>{var S,N;m(!0),j(null);try{const v=(await z.get(`/garages/${e}`)).data.garage;if(l(v),v.ownerId){const A=typeof v.ownerId=="object"?v.ownerId._id:v.ownerId;P(A)}try{const A=await z.get(`/services/garage/${e}`);c(A.data.services||[])}catch{}try{const A=await z.get(`/reviews/garage/${e}`);d(A.data.reviews||[])}catch{}if(n&&(t==null?void 0:t.role)==="client")try{const A=await z.get(`/favorites/check/${e}`);g(A.data.isFavorite||!1)}catch{}}catch(I){j(((N=(S=I.response)==null?void 0:S.data)==null?void 0:N.message)||"Erreur lors du chargement")}finally{m(!1)}})()},[e,n,t]);const L=async()=>{var F,S;if(!(!n||(t==null?void 0:t.role)!=="client"||!e)){x(!0);try{y?(await z.delete(`/favorites/${e}`),g(!1)):(await z.post("/favorites",{garageId:e}),g(!0))}catch(N){alert(((S=(F=N.response)==null?void 0:F.data)==null?void 0:S.message)||"Erreur lors de l'ajout/retrait des favoris")}finally{x(!1)}}},H=()=>["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()],B=F=>{if(!F.openingHours)return!0;const S=H(),N=F.openingHours[S];if(!N||N.closed)return!1;const I=new Date,v=`${I.getHours().toString().padStart(2,"0")}:${I.getMinutes().toString().padStart(2,"0")}`;return v>=N.open&&v<=N.close},X=F=>{const S=Math.floor(F),N=F%1>=.5,I=5-S-(N?1:0);return o.jsxs("div",{className:"flex items-center gap-0.5",children:[[...Array(S)].map((v,A)=>o.jsx("svg",{className:"w-5 h-5",style:{color:"var(--color-rose-500)"},fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},A)),N&&o.jsxs("svg",{className:"w-5 h-5",style:{color:"var(--color-rose-500)"},fill:"currentColor",viewBox:"0 0 20 20",children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:`half-${e}`,children:[o.jsx("stop",{offset:"50%",stopColor:"currentColor"}),o.jsx("stop",{offset:"50%",stopColor:"transparent",stopOpacity:"1"})]})}),o.jsx("path",{fill:`url(#half-${e})`,d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]}),[...Array(I)].map((v,A)=>o.jsx("svg",{className:"w-5 h-5",style:{color:"var(--color-noir-300)"},fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},A))]})};if(u)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})});if(f||!s)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-8 shadow-md border text-center max-w-md",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("p",{className:"text-base mb-4",style:{color:"var(--color-noir-700)"},children:f||"Garage non trouv"}),o.jsx("button",{onClick:()=>r("/app/garages"),className:"px-6 py-2.5 bg-[var(--color-rouge-600)] hover:bg-[var(--color-rouge-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300",children:"Retour  la liste"})]})});const D=B(s);return o.jsxs("div",{className:"min-h-screen",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:[o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8 max-w-7xl",children:[o.jsxs("button",{onClick:()=>r("/app/garages"),className:"mb-6 flex items-center gap-2 text-sm font-medium hover:underline",style:{color:"var(--color-noir-600)"},children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Retour  la liste"]}),o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl overflow-hidden shadow-lg border mb-6",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"h-64 sm:h-80 flex items-center justify-center relative",style:{background:"linear-gradient(to bottom right, var(--color-racine-100), var(--color-rose-100))"},children:[s.images&&s.images.length>0?o.jsx("img",{src:s.images[0],alt:s.name,className:"w-full h-full object-cover"}):o.jsx("svg",{className:"w-32 h-32",style:{color:"var(--color-racine-400)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),s.isVerified&&o.jsx("div",{className:"absolute top-4 right-4 px-3 py-1.5 rounded-full text-sm font-semibold",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:" Vrifi"}),o.jsx("div",{className:"absolute bottom-4 left-4 px-3 py-1.5 rounded-full text-sm font-semibold",style:{backgroundColor:D?"var(--color-rouge-600)":"var(--color-noir-600)",color:"white"},children:D?" Ouvert":" Ferm"})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold",style:{color:"var(--color-noir)"},children:s.name}),n&&(t==null?void 0:t.role)==="client"&&o.jsx("button",{onClick:L,disabled:p,className:"w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 hover:scale-125 active:scale-95 disabled:opacity-50 shadow-md hover:shadow-lg",style:{backgroundColor:y?"var(--color-rose-600)":"var(--color-racine-100)",color:y?"white":"var(--color-noir-600)"},title:y?"Retirer des favoris":"Ajouter aux favoris",children:y?"":""})]}),o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[X(((R=s.rating)==null?void 0:R.average)||0),o.jsxs("span",{className:"text-base",style:{color:"var(--color-noir-600)"},children:[((O=(V=s.rating)==null?void 0:V.average)==null?void 0:O.toFixed(1))||"0.0"," (",((G=s.rating)==null?void 0:G.count)||0," avis)"]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm",style:{color:"var(--color-noir-600)"},children:[o.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.address.street,", ",s.address.city," ",s.address.postalCode]})]}),n&&(t==null?void 0:t.role)==="client"&&o.jsxs("div",{className:"flex gap-2",children:[E&&o.jsx("button",{onClick:()=>C(!0),className:"px-4 py-3 bg-white border-2 hover:bg-[var(--color-racine-50)] font-semibold rounded-lg shadow-md hover:shadow-xl transition-all duration-300 text-sm sm:text-base whitespace-nowrap hover:scale-105 active:scale-95",style:{borderColor:"var(--color-rouge-600)",color:"var(--color-rouge-600)"},children:" Contacter"}),o.jsx(J,{to:`/app/garage/${s._id}/book`,className:"px-6 py-3 bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] hover:from-[var(--color-rouge-700)] hover:to-[var(--color-rose-700)] text-white font-semibold rounded-lg shadow-lg hover:shadow-2xl transition-all duration-300 text-sm sm:text-base whitespace-nowrap hover:scale-105 active:scale-95",children:"Rserver un rendez-vous"})]})]}),s.description&&o.jsx("p",{className:"text-base mb-4",style:{color:"var(--color-noir-700)"},children:s.description}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-4 border-t",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",style:{color:"var(--color-rouge-600)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),o.jsx("span",{className:"text-sm",style:{color:"var(--color-noir-700)"},children:s.phone})]}),s.email&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",style:{color:"var(--color-rose-600)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),o.jsx("span",{className:"text-sm",style:{color:"var(--color-noir-700)"},children:s.email})]}),s.website&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",style:{color:"var(--color-racine-600)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),o.jsx("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm hover:underline",style:{color:"var(--color-rouge-600)"},children:s.website})]})]})]})]}),o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-md border mb-6",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"flex border-b",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("button",{onClick:()=>h("info"),className:`px-6 py-3 font-semibold text-sm transition-colors ${w==="info"?"border-b-2":""}`,style:{color:w==="info"?"var(--color-rouge-600)":"var(--color-noir-600)",borderBottomColor:w==="info"?"var(--color-rouge-600)":"transparent"},children:"Informations"}),o.jsxs("button",{onClick:()=>h("services"),className:`px-6 py-3 font-semibold text-sm transition-colors ${w==="services"?"border-b-2":""}`,style:{color:w==="services"?"var(--color-rouge-600)":"var(--color-noir-600)",borderBottomColor:w==="services"?"var(--color-rouge-600)":"transparent"},children:["Services (",a.length,")"]}),o.jsxs("button",{onClick:()=>h("reviews"),className:`px-6 py-3 font-semibold text-sm transition-colors ${w==="reviews"?"border-b-2":""}`,style:{color:w==="reviews"?"var(--color-rouge-600)":"var(--color-noir-600)",borderBottomColor:w==="reviews"?"var(--color-rouge-600)":"transparent"},children:["Avis (",i.length,")"]})]}),o.jsxs("div",{className:"p-6",children:[w==="info"&&o.jsxs("div",{className:"space-y-6",children:[s.openingHours&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:"var(--color-noir)"},children:"Horaires d'ouverture"}),o.jsx("div",{className:"space-y-2",children:Object.entries(s.openingHours).map(([F,S])=>o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"capitalize font-medium",style:{color:"var(--color-noir-700)"},children:F==="monday"?"Lundi":F==="tuesday"?"Mardi":F==="wednesday"?"Mercredi":F==="thursday"?"Jeudi":F==="friday"?"Vendredi":F==="saturday"?"Samedi":"Dimanche"}),o.jsx("span",{style:{color:"var(--color-noir-600)"},children:S.closed?"Ferm":`${S.open} - ${S.close}`})]},F))})]}),s.location&&s.location.coordinates&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:"var(--color-noir)"},children:"Localisation"}),o.jsx(x1,{latitude:s.location.coordinates[1],longitude:s.location.coordinates[0],garageName:s.name,address:`${s.address.street}, ${s.address.postalCode} ${s.address.city}`,height:"400px"})]})]}),w==="services"&&o.jsx("div",{children:a.length===0?o.jsx("p",{className:"text-center py-8 text-sm",style:{color:"var(--color-noir-600)"},children:"Aucun service disponible pour ce garage"}):o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(F=>o.jsxs("div",{className:"bg-white/50 rounded-lg p-4 border shadow-sm",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h4",{className:"font-bold mb-2",style:{color:"var(--color-noir)"},children:F.name}),F.description&&o.jsx("p",{className:"text-sm mb-2",style:{color:"var(--color-noir-600)"},children:F.description}),o.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("span",{className:"text-xs uppercase font-semibold",style:{color:"var(--color-racine-600)"},children:F.category}),o.jsxs("span",{className:"text-lg font-bold",style:{color:"var(--color-rouge-600)"},children:[F.price,""]})]})]},F._id))})}),w==="reviews"&&o.jsx("div",{children:i.length===0?o.jsx("p",{className:"text-center py-8 text-sm",style:{color:"var(--color-noir-600)"},children:"Aucun avis pour ce garage"}):o.jsx("div",{className:"space-y-4",children:i.map(F=>{var S;return o.jsxs("div",{className:"bg-white/50 rounded-lg p-4 border",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-semibold",style:{color:"var(--color-noir)"},children:((S=F.clientId)==null?void 0:S.name)||"Anonyme"}),X(F.rating)]}),o.jsx("span",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:new Date(F.createdAt).toLocaleDateString("fr-FR")})]}),F.comment&&o.jsx("p",{className:"text-sm mt-2",style:{color:"var(--color-noir-700)"},children:F.comment})]},F._id)})})})]})]}),!n&&o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 text-center shadow-md border",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("p",{className:"text-base mb-4",style:{color:"var(--color-noir-700)"},children:"Connectez-vous pour rserver un rendez-vous"}),o.jsxs("div",{className:"flex gap-3 justify-center",children:[o.jsx(J,{to:"/login",className:"px-6 py-2.5 bg-[var(--color-rouge-600)] hover:bg-[var(--color-rouge-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300",children:"Se connecter"}),o.jsx(J,{to:"/register",className:"px-6 py-2.5 bg-[var(--color-rose-500)] hover:bg-[var(--color-rose-600)] text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300",children:"Crer un compte"})]})]})]}),k&&E&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>C(!1),children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col",onClick:F=>F.stopPropagation(),children:[o.jsxs("div",{className:"p-4 border-b flex items-center justify-between",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h3",{className:"text-lg font-bold",style:{color:"var(--color-noir)"},children:"Contacter le garagiste"}),o.jsx("button",{onClick:()=>C(!1),className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-gray-100 transition-colors",style:{color:"var(--color-noir-600)"},children:""})]}),o.jsx("div",{className:"flex-1 overflow-hidden p-4",children:o.jsx(rl,{userId:E,onClose:()=>C(!1)})})]})})]})}function sc({onUploadComplete:e,maxImages:r=1,folder:t="garages",multiple:n=!1,label:s="Tlcharger des images",initialUrls:l=[]}){const[a,c]=b.useState(!1),[i,d]=b.useState([]),[u,m]=b.useState(l);b.useEffect(()=>{l&&l.length>0&&m(l)},[l]);const f=async w=>{var x,k;const h=Array.from(w.target.files||[]);if(h.length===0)return;const y=h.slice(0,r-u.length),g=y.map(C=>new Promise(E=>{const P=new FileReader;P.onload=L=>{var H;(H=L.target)!=null&&H.result?E(L.target.result):E("")},P.onerror=()=>E(""),P.readAsDataURL(C)})),p=await Promise.all(g);d(C=>[...C,...p.filter(E=>E)]),c(!0);try{const C=new FormData;y.forEach(B=>{C.append(n?"images":"avatar",B)}),C.append("folder",t);const E=t==="avatars"?"/upload/avatar":t==="garages"?"/upload/garage":"/upload/vehicle",P=await z.post(E,C,{headers:{"Content-Type":"multipart/form-data"}}),L=t==="avatars"?[P.data.avatar]:t==="garages"?P.data.images:P.data.photos,H=[...u,...L];m(H),d([]),e(H),w.target.value=""}catch(C){alert(((k=(x=C.response)==null?void 0:x.data)==null?void 0:k.message)||"Erreur lors du tlchargement"),d(E=>E.slice(0,-y.length))}finally{c(!1)}},j=(w,h=!1)=>{if(h){const y=i.filter((g,p)=>p!==w);d(y)}else{const y=u.filter((g,p)=>p!==w);m(y),e(y)}};return o.jsxs("div",{className:"space-y-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:s}),(i.length>0||u.length>0)&&o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[i.map((w,h)=>o.jsxs("div",{className:"relative group",children:[o.jsx("img",{src:w,alt:`Preview ${h}`,className:"w-full h-32 object-cover rounded-lg border-2",style:{borderColor:"var(--color-racine-200)"}}),a&&o.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-lg flex items-center justify-center",children:o.jsx("div",{className:"text-white text-sm",children:"Upload..."})}),o.jsx("button",{onClick:()=>j(h,!0),className:"absolute top-2 right-2 w-6 h-6 rounded-full bg-red-600 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},h)),u.map((w,h)=>o.jsxs("div",{className:"relative group",children:[o.jsx("img",{src:w,alt:`Uploaded ${h}`,className:"w-full h-32 object-cover rounded-lg border-2",style:{borderColor:"var(--color-racine-200)"}}),o.jsx("button",{onClick:()=>j(h,!1),className:"absolute top-2 right-2 w-6 h-6 rounded-full bg-red-600 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},`uploaded-${h}`))]}),o.jsxs("div",{children:[o.jsx("input",{type:"file",accept:"image/*",multiple:n&&u.length<r,onChange:f,disabled:a||u.length>=r,className:"hidden",id:"image-upload-input"}),o.jsx("label",{htmlFor:"image-upload-input",className:`inline-block px-6 py-2.5 rounded-lg font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 cursor-pointer ${a||u.length>=r?"opacity-50 cursor-not-allowed":""}`,style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:a?"Tlchargement...":`+ ${n?"Ajouter des images":"Ajouter une image"}`}),r>1&&o.jsxs("p",{className:"text-xs mt-2",style:{color:"var(--color-noir-600)"},children:[u.length," / ",r," images"]})]})]})}var hf="clover",y1=function(r){return r===3?"v3":r},mf="https://js.stripe.com",b1="".concat(mf,"/").concat(hf,"/stripe.js"),w1=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,j1=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var N1=function(r){return w1.test(r)||j1.test(r)},C1=function(){for(var r=document.querySelectorAll('script[src^="'.concat(mf,'"]')),t=0;t<r.length;t++){var n=r[t];if(N1(n.src))return n}return null},Kd=function(r){var t="",n=document.createElement("script");n.src="".concat(b1).concat(t);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(n),n},k1=function(r,t){!r||!r._registerWrapper||r._registerWrapper({name:"stripe-js",version:"8.5.3",startTime:t})},Co=null,Dn=null,zn=null,S1=function(r){return function(t){r(new Error("Failed to load Stripe.js",{cause:t}))}},E1=function(r,t){return function(){window.Stripe?r(window.Stripe):t(new Error("Stripe.js not available"))}},_1=function(r){return Co!==null?Co:(Co=new Promise(function(t,n){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var s=C1();if(!(s&&r)){if(!s)s=Kd(r);else if(s&&zn!==null&&Dn!==null){var l;s.removeEventListener("load",zn),s.removeEventListener("error",Dn),(l=s.parentNode)===null||l===void 0||l.removeChild(s),s=Kd(r)}}zn=E1(t,n),Dn=S1(n),s.addEventListener("load",zn),s.addEventListener("error",Dn)}catch(a){n(a);return}}),Co.catch(function(t){return Co=null,Promise.reject(t)}))},R1=function(r,t,n){if(r===null)return null;var s=t[0],l=s.match(/^pk_test/),a=y1(r.version),c=hf;l&&a!==c&&console.warn("Stripe.js@".concat(a," was loaded on the page, but @stripe/stripe-js@").concat("8.5.3"," expected Stripe.js@").concat(c,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var i=r.apply(void 0,t);return k1(i,n),i},ko,ff=!1,pf=function(){return ko||(ko=_1(null).catch(function(r){return ko=null,Promise.reject(r)}),ko)};Promise.resolve().then(function(){return pf()}).catch(function(e){ff||console.warn(e)});var P1=function(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];ff=!0;var s=Date.now();return pf().then(function(l){return R1(l,t,s)})},vf={exports:{}},A1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",L1=A1,T1=L1;function xf(){}function gf(){}gf.resetWarningCache=xf;var I1=function(){function e(n,s,l,a,c,i){if(i!==T1){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function r(){return e}var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:gf,resetWarningCache:xf};return t.PropTypes=t,t};vf.exports=I1();var O1=vf.exports;const le=Ga(O1);function Jd(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function Xd(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Jd(Object(t),!0).forEach(function(n){yf(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Jd(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function os(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?os=function(r){return typeof r}:os=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},os(e)}function yf(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function D1(e,r){if(e==null)return{};var t={},n=Object.keys(e),s,l;for(l=0;l<n.length;l++)s=n[l],!(r.indexOf(s)>=0)&&(t[s]=e[s]);return t}function z1(e,r){if(e==null)return{};var t=D1(e,r),n,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)n=l[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function bf(e,r){return M1(e)||F1(e,r)||B1(e,r)||U1()}function M1(e){if(Array.isArray(e))return e}function F1(e,r){var t=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(t!=null){var n=[],s=!0,l=!1,a,c;try{for(t=t.call(e);!(s=(a=t.next()).done)&&(n.push(a.value),!(r&&n.length===r));s=!0);}catch(i){l=!0,c=i}finally{try{!s&&t.return!=null&&t.return()}finally{if(l)throw c}}return n}}function B1(e,r){if(e){if(typeof e=="string")return Yd(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Yd(e,r)}}function Yd(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function U1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ie=function(r,t,n){var s=!!n,l=ne.useRef(n);ne.useEffect(function(){l.current=n},[n]),ne.useEffect(function(){if(!s||!r)return function(){};var a=function(){l.current&&l.current.apply(l,arguments)};return r.on(t,a),function(){r.off(t,a)}},[s,t,r,l])},Ha=function(r){var t=ne.useRef(r);return ne.useEffect(function(){t.current=r},[r]),t.current},no=function(r){return r!==null&&os(r)==="object"},$1=function(r){return no(r)&&typeof r.then=="function"},V1=function(r){return no(r)&&typeof r.elements=="function"&&typeof r.createToken=="function"&&typeof r.createPaymentMethod=="function"&&typeof r.confirmCardPayment=="function"},Zd="[object Object]",W1=function e(r,t){if(!no(r)||!no(t))return r===t;var n=Array.isArray(r),s=Array.isArray(t);if(n!==s)return!1;var l=Object.prototype.toString.call(r)===Zd,a=Object.prototype.toString.call(t)===Zd;if(l!==a)return!1;if(!l&&!n)return r===t;var c=Object.keys(r),i=Object.keys(t);if(c.length!==i.length)return!1;for(var d={},u=0;u<c.length;u+=1)d[c[u]]=!0;for(var m=0;m<i.length;m+=1)d[i[m]]=!0;var f=Object.keys(d);if(f.length!==c.length)return!1;var j=r,w=t,h=function(g){return e(j[g],w[g])};return f.every(h)},wf=function(r,t,n){return no(r)?Object.keys(r).reduce(function(s,l){var a=!no(t)||!W1(r[l],t[l]);return n.includes(l)?(a&&console.warn("Unsupported prop change: options.".concat(l," is not a mutable property.")),s):a?Xd(Xd({},s||{}),{},yf({},l,r[l])):s},null):null},jf="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",eu=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jf;if(r===null||V1(r))return r;throw new Error(t)},H1=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jf;if($1(r))return{tag:"async",stripePromise:Promise.resolve(r).then(function(s){return eu(s,t)})};var n=eu(r,t);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},q1=function(r){!r||!r._registerWrapper||!r.registerAppInfo||(r._registerWrapper({name:"react-stripe-js",version:"5.4.1"}),r.registerAppInfo({name:"react-stripe-js",version:"5.4.1",url:"https://stripe.com/docs/stripe-js/react"}))},tl=ne.createContext(null);tl.displayName="ElementsContext";var Nf=function(r,t){if(!r)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return r},Cf=function(r){var t=r.stripe,n=r.options,s=r.children,l=ne.useMemo(function(){return H1(t)},[t]),a=ne.useState(function(){return{stripe:l.tag==="sync"?l.stripe:null,elements:l.tag==="sync"?l.stripe.elements(n):null}}),c=bf(a,2),i=c[0],d=c[1];ne.useEffect(function(){var f=!0,j=function(h){d(function(y){return y.stripe?y:{stripe:h,elements:h.elements(n)}})};return l.tag==="async"&&!i.stripe?l.stripePromise.then(function(w){w&&f&&j(w)}):l.tag==="sync"&&!i.stripe&&j(l.stripe),function(){f=!1}},[l,i,n]);var u=Ha(t);ne.useEffect(function(){u!==null&&u!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[u,t]);var m=Ha(n);return ne.useEffect(function(){if(i.elements){var f=wf(n,m,["clientSecret","fonts"]);f&&i.elements.update(f)}},[n,m,i.elements]),ne.useEffect(function(){q1(i.stripe)},[i.stripe]),ne.createElement(tl.Provider,{value:i},s)};Cf.propTypes={stripe:le.any,options:le.object};var G1=function(r){var t=ne.useContext(tl);return Nf(t,r)},Q1=function(){var r=G1("calls useElements()"),t=r.elements;return t};le.func.isRequired;var kf=ne.createContext(null);kf.displayName="CheckoutContext";le.any,le.shape({clientSecret:le.oneOfType([le.string,le.instanceOf(Promise)]).isRequired,elementsOptions:le.object}).isRequired;var qa=function(r){var t=ne.useContext(kf),n=ne.useContext(tl);if(t){if(n)throw new Error("You cannot wrap the part of your app that ".concat(r," in both <CheckoutProvider> and <Elements> providers."));return t}else return Nf(n,r)},K1=["mode"],J1=function(r){return r.charAt(0).toUpperCase()+r.slice(1)},Qe=function(r,t){var n="".concat(J1(r),"Element"),s=function(i){var d=i.id,u=i.className,m=i.options,f=m===void 0?{}:m,j=i.onBlur,w=i.onFocus,h=i.onReady,y=i.onChange,g=i.onEscape,p=i.onClick,x=i.onLoadError,k=i.onLoaderStart,C=i.onNetworksChange,E=i.onConfirm,P=i.onCancel,L=i.onShippingAddressChange,H=i.onShippingRateChange,B=i.onSavedPaymentMethodRemove,X=i.onSavedPaymentMethodUpdate,D=qa("mounts <".concat(n,">")),R="elements"in D?D.elements:null,V="checkoutState"in D?D.checkoutState:null,O=(V==null?void 0:V.type)==="success"||(V==null?void 0:V.type)==="loading"?V.sdk:null,G=ne.useState(null),F=bf(G,2),S=F[0],N=F[1],I=ne.useRef(null),v=ne.useRef(null);Ie(S,"blur",j),Ie(S,"focus",w),Ie(S,"escape",g),Ie(S,"click",p),Ie(S,"loaderror",x),Ie(S,"loaderstart",k),Ie(S,"networkschange",C),Ie(S,"confirm",E),Ie(S,"cancel",P),Ie(S,"shippingaddresschange",L),Ie(S,"shippingratechange",H),Ie(S,"savedpaymentmethodremove",B),Ie(S,"savedpaymentmethodupdate",X),Ie(S,"change",y);var A;h&&(r==="expressCheckout"?A=h:A=function(){h(S)}),Ie(S,"ready",A),ne.useLayoutEffect(function(){if(I.current===null&&v.current!==null&&(R||O)){var _=null;if(O)switch(r){case"paymentForm":_=O.createPaymentFormElement();break;case"payment":_=O.createPaymentElement(f);break;case"address":if("mode"in f){var M=f.mode,q=z1(f,K1);if(M==="shipping")_=O.createShippingAddressElement(q);else if(M==="billing")_=O.createBillingAddressElement(q);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":_=O.createExpressCheckoutElement(f);break;case"currencySelector":_=O.createCurrencySelectorElement();break;case"taxId":_=O.createTaxIdElement(f);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else R&&(_=R.create(r,f));I.current=_,N(_),_&&_.mount(v.current)}},[R,O,f]);var U=Ha(f);return ne.useEffect(function(){if(I.current){var _=wf(f,U,["paymentRequest"]);_&&"update"in I.current&&I.current.update(_)}},[f,U]),ne.useLayoutEffect(function(){return function(){if(I.current&&typeof I.current.destroy=="function")try{I.current.destroy(),I.current=null}catch{}}},[]),ne.createElement("div",{id:d,className:u,ref:v})},l=function(i){qa("mounts <".concat(n,">"));var d=i.id,u=i.className;return ne.createElement("div",{id:d,className:u})},a=t?l:s;return a.propTypes={id:le.string,className:le.string,onChange:le.func,onBlur:le.func,onFocus:le.func,onReady:le.func,onEscape:le.func,onClick:le.func,onLoadError:le.func,onLoaderStart:le.func,onNetworksChange:le.func,onConfirm:le.func,onCancel:le.func,onShippingAddressChange:le.func,onShippingRateChange:le.func,onSavedPaymentMethodRemove:le.func,onSavedPaymentMethodUpdate:le.func,options:le.object},a.displayName=n,a.__elementType=r,a},Ke=typeof window>"u",X1=ne.createContext(null);X1.displayName="EmbeddedCheckoutProviderContext";var Y1=function(){var r=qa("calls useStripe()"),t=r.stripe;return t};Qe("auBankAccount",Ke);var ru=Qe("card",Ke);Qe("cardNumber",Ke);Qe("cardExpiry",Ke);Qe("cardCvc",Ke);Qe("iban",Ke);Qe("payment",Ke);Qe("expressCheckout",Ke);Qe("paymentRequestButton",Ke);Qe("linkAuthentication",Ke);Qe("address",Ke);Qe("shippingAddress",Ke);Qe("paymentMethodMessaging",Ke);Qe("taxId",Ke);const Z1=P1("");function eb({appointmentId:e,amount:r,onSuccess:t,onCancel:n}){const s=Y1(),l=Q1(),[a,c]=b.useState(!1),[i,d]=b.useState(null),[u,m]=b.useState(null);b.useEffect(()=>{(async()=>{var h,y;try{const g=await z.post("/payments/create-intent",{appointmentId:e,amount:r});m(g.data.clientSecret)}catch(g){d(((y=(h=g.response)==null?void 0:h.data)==null?void 0:y.message)||"Erreur lors de la cration du paiement")}})()},[e,r]);const f=async w=>{var y,g;if(w.preventDefault(),!s||!l||!u)return;c(!0),d(null);const h=l.getElement(ru);if(!h){d("lment de carte non trouv"),c(!1);return}try{const{error:p,paymentIntent:x}=await s.confirmCardPayment(u,{payment_method:{card:h}});if(p){d(p.message||"Erreur lors du paiement"),c(!1);return}(x==null?void 0:x.status)==="succeeded"&&(await z.post("/payments/confirm",{paymentIntentId:x.id,appointmentId:e}),t())}catch(p){d(((g=(y=p.response)==null?void 0:y.data)==null?void 0:g.message)||"Erreur lors du paiement")}finally{c(!1)}},j={style:{base:{fontSize:"16px",color:"#1f2937","::placeholder":{color:"#9ca3af"}},invalid:{color:"#ef4444"}}};return o.jsx("form",{onSubmit:f,className:"space-y-6",children:o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:"var(--color-noir)"},children:"Informations de paiement"}),o.jsx("div",{className:"p-4 border-2 rounded-lg",style:{borderColor:"var(--color-racine-200)"},children:o.jsx(ru,{options:j})}),o.jsx("div",{className:"mt-4 p-4 rounded-lg",style:{backgroundColor:"var(--color-racine-50)"},children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"font-semibold",style:{color:"var(--color-noir-700)"},children:"Total:"}),o.jsxs("span",{className:"text-xl font-bold",style:{color:"var(--color-rouge-600)"},children:[r.toFixed(2)," "]})]})}),i&&o.jsx("div",{className:"mt-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-700",children:i}),o.jsxs("div",{className:"mt-6 flex gap-3",children:[n&&o.jsx("button",{type:"button",onClick:n,className:"flex-1 px-6 py-2.5 rounded-lg font-semibold shadow-md hover:shadow-xl transition-all duration-300",style:{backgroundColor:"var(--color-noir-200)",color:"var(--color-noir-700)"},children:"Annuler"}),o.jsx("button",{type:"submit",disabled:!s||a||!u,className:"flex-1 px-6 py-2.5 rounded-lg font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:a?"Traitement...":`Payer ${r.toFixed(2)} `})})]})]})})}function rb(e){const[r,t]=b.useState(!1);return b.useEffect(()=>{},[]),r?o.jsx(Cf,{stripe:Z1,children:o.jsx(eb,{...e})}):o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-8 text-center shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsx("p",{className:"text-base",style:{color:"var(--color-noir-600)"},children:"Stripe n'est pas configur. Configurez VITE_STRIPE_PUBLISHABLE_KEY dans votre .env"})})}function tb(){const{id:e}=Gi(),r=ue(),t=Z(W=>W.user),n=Z(W=>!!W.token&&!!W.user),[s,l]=b.useState(null),[a,c]=b.useState([]),[i,d]=b.useState(!0),[u,m]=b.useState(!1),[f,j]=b.useState(null),[w,h]=b.useState(!1),[y,g]=b.useState(""),[p,x]=b.useState(""),[k,C]=b.useState(""),[E,P]=b.useState(""),[L,H]=b.useState(""),[B,X]=b.useState(""),[D,R]=b.useState(""),[V,O]=b.useState(""),[G,F]=b.useState([]),[S,N]=b.useState(!1),[I,v]=b.useState(null),A=[];for(let W=9;W<18;W++)A.push(`${W.toString().padStart(2,"0")}:00`),A.push(`${W.toString().padStart(2,"0")}:30`);b.useEffect(()=>{if(!n){r("/login",{replace:!0});return}if(t&&t.role!=="client"){r("/app",{replace:!0});return}if(!e)return;(async()=>{var Je,Xe;d(!0),j(null);try{const ye=await z.get(`/garages/${e}`);l(ye.data.garage);const nr=await z.get(`/services/garage/${e}`);c(nr.data.services||[]),nr.data.services&&nr.data.services.length>0&&g(nr.data.services[0]._id)}catch(ye){j(((Xe=(Je=ye.response)==null?void 0:Je.data)==null?void 0:Xe.message)||"Erreur lors du chargement")}finally{d(!1)}})()},[e,n,t,r]);const U=new Date().toISOString().split("T")[0],_=new Date;_.setMonth(_.getMonth()+3);const M=_.toISOString().split("T")[0],q=async W=>{var Je,Xe;if(W.preventDefault(),!y||!p||!k){j("Veuillez remplir tous les champs obligatoires");return}m(!0),j(null);try{const ye={garageId:e,serviceId:y,date:new Date(p).toISOString(),time:k,status:"pending"};E&&(ye.notes=E),(L||B||D||V||G.length>0)&&(ye.vehicleInfo={},L&&(ye.vehicleInfo.brand=L),B&&(ye.vehicleInfo.model=B),D&&(ye.vehicleInfo.year=parseInt(D)),V&&(ye.vehicleInfo.licensePlate=V),G.length>0&&(ye.vehicleInfo.photos=G));const ol=(await z.post("/appointments",ye)).data.appointment;Q!=null&&Q.price&&Q.price>0?(v(ol),N(!0)):(h(!0),setTimeout(()=>{r("/app/appointments",{replace:!0})},2e3))}catch(ye){j(((Xe=(Je=ye.response)==null?void 0:Je.data)==null?void 0:Xe.message)||"Erreur lors de la rservation")}finally{m(!1)}};if(!n||t&&t.role!=="client")return null;if(i)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})});if(w)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-8 shadow-lg border text-center max-w-md",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("div",{className:"w-16 h-16 bg-[var(--color-rouge-100)] rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("svg",{className:"w-8 h-8",style:{color:"var(--color-rouge-600)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),o.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Rservation confirme !"}),o.jsx("p",{className:"text-base mb-4",style:{color:"var(--color-noir-600)"},children:"Votre rendez-vous a t enregistr avec succs."}),o.jsx("p",{className:"text-sm",style:{color:"var(--color-noir-500)"},children:"Redirection vers vos rendez-vous..."})]})});if(f&&!s)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-8 shadow-md border text-center max-w-md",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("p",{className:"text-base mb-4",style:{color:"var(--color-noir-700)"},children:f}),o.jsx("button",{onClick:()=>r("/app/garages"),className:"px-6 py-2.5 bg-[var(--color-rouge-600)] hover:bg-[var(--color-rouge-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300",children:"Retour  la liste"})]})});const Q=a.find(W=>W._id===y);return o.jsx("div",{className:"min-h-screen",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8 max-w-4xl",children:[o.jsxs("button",{onClick:()=>r(`/app/garage/${e}`),className:"mb-6 flex items-center gap-2 text-sm font-medium hover:underline",style:{color:"var(--color-noir-600)"},children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Retour aux dtails du garage"]}),o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Rserver un rendez-vous"}),s&&o.jsxs("p",{className:"text-base mb-6",style:{color:"var(--color-noir-600)"},children:["Pour ",s.name," - ",s.address.city]}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 sm:p-8 shadow-2xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[f&&o.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:f}),a.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("p",{className:"text-base mb-4",style:{color:"var(--color-noir-600)"},children:"Aucun service disponible pour ce garage."}),o.jsx(J,{to:`/app/garage/${e}`,className:"inline-block px-6 py-2.5 bg-[var(--color-rouge-600)] hover:bg-[var(--color-rouge-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300",children:"Retour"})]}):o.jsxs("form",{onSubmit:q,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:["Service * ",o.jsx("span",{className:"text-xs font-normal text-[var(--color-noir-500)]",children:"(obligatoire)"})]}),o.jsx("select",{value:y,onChange:W=>g(W.target.value),required:!0,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},onFocus:W=>W.target.style.borderColor="var(--color-rose-500)",onBlur:W=>W.target.style.borderColor="var(--color-racine-200)",children:a.map(W=>o.jsxs("option",{value:W._id,children:[W.name," - ",W.price," ",W.duration&&`(${W.duration} min)`]},W._id))}),Q&&o.jsxs("div",{className:"mt-2 p-3 rounded-lg",style:{backgroundColor:"var(--color-racine-50)"},children:[o.jsx("p",{className:"text-sm font-medium",style:{color:"var(--color-noir-700)"},children:Q.category}),Q.description&&o.jsx("p",{className:"text-xs mt-1",style:{color:"var(--color-noir-600)"},children:Q.description})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:["Date * ",o.jsx("span",{className:"text-xs font-normal text-[var(--color-noir-500)]",children:"(obligatoire)"})]}),o.jsx("input",{type:"date",value:p,onChange:W=>x(W.target.value),min:U,max:M,required:!0,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},onFocus:W=>W.target.style.borderColor="var(--color-rose-500)",onBlur:W=>W.target.style.borderColor="var(--color-racine-200)"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:["Heure * ",o.jsx("span",{className:"text-xs font-normal text-[var(--color-noir-500)]",children:"(obligatoire)"})]}),o.jsxs("select",{value:k,onChange:W=>C(W.target.value),required:!0,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},onFocus:W=>W.target.style.borderColor="var(--color-rose-500)",onBlur:W=>W.target.style.borderColor="var(--color-racine-200)",children:[o.jsx("option",{value:"",children:"Slectionner une heure"}),A.map(W=>o.jsx("option",{value:W,children:W},W))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:"Notes (optionnel)"}),o.jsx("textarea",{value:E,onChange:W=>P(W.target.value),placeholder:"Dcrivez brivement le problme ou les informations supplmentaires...",rows:4,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all text-sm resize-none",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},onFocus:W=>W.target.style.borderColor="var(--color-rose-500)",onBlur:W=>W.target.style.borderColor="var(--color-racine-200)"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-base font-semibold mb-3",style:{color:"var(--color-noir-700)"},children:"Informations du vhicule (optionnel)"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium mb-1",style:{color:"var(--color-noir-600)"},children:"Marque"}),o.jsx("input",{type:"text",value:L,onChange:W=>H(W.target.value),placeholder:"Ex: Peugeot",className:"w-full px-4 py-2 rounded-lg border-2 outline-none transition-all text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},onFocus:W=>W.target.style.borderColor="var(--color-rose-500)",onBlur:W=>W.target.style.borderColor="var(--color-racine-200)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium mb-1",style:{color:"var(--color-noir-600)"},children:"Modle"}),o.jsx("input",{type:"text",value:B,onChange:W=>X(W.target.value),placeholder:"Ex: 308",className:"w-full px-4 py-2 rounded-lg border-2 outline-none transition-all text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},onFocus:W=>W.target.style.borderColor="var(--color-rose-500)",onBlur:W=>W.target.style.borderColor="var(--color-racine-200)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium mb-1",style:{color:"var(--color-noir-600)"},children:"Anne"}),o.jsx("input",{type:"number",value:D,onChange:W=>R(W.target.value),placeholder:"Ex: 2020",min:"1900",max:new Date().getFullYear()+1,className:"w-full px-4 py-2 rounded-lg border-2 outline-none transition-all text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},onFocus:W=>W.target.style.borderColor="var(--color-rose-500)",onBlur:W=>W.target.style.borderColor="var(--color-racine-200)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium mb-1",style:{color:"var(--color-noir-600)"},children:"Plaque d'immatriculation"}),o.jsx("input",{type:"text",value:V,onChange:W=>O(W.target.value.toUpperCase()),placeholder:"Ex: AB-123-CD",className:"w-full px-4 py-2 rounded-lg border-2 outline-none transition-all text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},onFocus:W=>W.target.style.borderColor="var(--color-rose-500)",onBlur:W=>W.target.style.borderColor="var(--color-racine-200)"})]})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-xs font-medium mb-2",style:{color:"var(--color-noir-600)"},children:"Photos du vhicule (optionnel)"}),o.jsx(sc,{onUploadComplete:W=>F(W),maxImages:5,folder:"vehicles",multiple:!0,label:"Ajouter des photos"})]})]}),S&&I&&(Q!=null&&Q.price)?o.jsx("div",{className:"border-t pt-6",style:{borderColor:"var(--color-racine-200)"},children:o.jsx(rb,{appointmentId:I._id,amount:Q.price,onSuccess:()=>{h(!0),setTimeout(()=>{r("/app/appointments",{replace:!0})},2e3)},onCancel:()=>{N(!1),h(!0),setTimeout(()=>{r("/app/appointments",{replace:!0})},2e3)}})}):o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("button",{type:"submit",disabled:u,className:"flex-1 px-6 py-3 bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] hover:from-[var(--color-rouge-700)] hover:to-[var(--color-rose-700)] text-white font-semibold rounded-lg shadow-lg hover:shadow-2xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-[1.02] active:scale-[0.98] relative overflow-hidden",children:o.jsx("span",{className:"relative z-10",children:u?"Rservation en cours...":"Confirmer la rservation"})}),o.jsx("button",{type:"button",onClick:()=>r(`/app/garage/${e}`),className:"px-6 py-3 border-2 font-semibold rounded-lg transition-all duration-300",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir-700)"},children:"Annuler"})]})]})]})]})})}function ob(){const e=ue(),r=Z(v=>v.user),t=Z(v=>!!v.token&&!!v.user),[n,s]=b.useState([]),[l,a]=b.useState(!0),[c,i]=b.useState(null),[d,u]=b.useState("upcoming"),[m,f]=b.useState(!1),[j,w]=b.useState(null),[h,y]=b.useState(null),[g,p]=b.useState(!1),[x,k]=b.useState(null),[C,E]=b.useState(5),[P,L]=b.useState(""),[H,B]=b.useState(!1);b.useEffect(()=>{if(!t){e("/login",{replace:!0});return}if(r&&r.role!=="client"){e("/app",{replace:!0});return}X()},[t,r,e]);const X=async()=>{var v,A;a(!0),i(null);try{const U=await z.get("/appointments/client/me");s(U.data.appointments||[])}catch(U){i(((A=(v=U.response)==null?void 0:v.data)==null?void 0:A.message)||"Erreur lors du chargement")}finally{a(!1)}},D=async v=>{var A,U;if(confirm("tes-vous sr de vouloir annuler ce rendez-vous ?"))try{await z.put(`/appointments/${v}`,{status:"cancelled"}),X()}catch(_){alert(((U=(A=_.response)==null?void 0:A.data)==null?void 0:U.message)||"Erreur lors de l'annulation")}},R=v=>{k(v),E(5),L(""),p(!0)},V=async()=>{var v,A;if(x){if(!P.trim()){alert("Veuillez crire un commentaire");return}B(!0);try{await z.post("/reviews",{garageId:x.garageId._id,rating:C,comment:P,appointmentId:x._id}),alert("Votre avis a t publi avec succs !"),p(!1),k(null),E(5),L(""),X()}catch(U){alert(((A=(v=U.response)==null?void 0:v.data)==null?void 0:A.message)||"Erreur lors de la publication de l'avis")}finally{B(!1)}}},O=async(v,A)=>{try{const _=(await z.get(`/garages/${v}`)).data.garage;_&&_.ownerId?(w(_.ownerId._id||_.ownerId),y(A),f(!0)):alert("Impossible de contacter le garagiste")}catch(U){console.error("Erreur lors de l'ouverture du chat:",U),alert("Erreur lors de l'ouverture du chat")}},G=v=>{switch(v){case"pending":return{bg:"var(--color-racine-100)",text:"var(--color-racine-700)",label:"En attente"};case"confirmed":return{bg:"var(--color-rose-100)",text:"var(--color-rose-700)",label:"Confirm"};case"in-progress":return{bg:"var(--color-rouge-100)",text:"var(--color-rouge-700)",label:"En cours"};case"completed":return{bg:"var(--color-noir-200)",text:"var(--color-noir-700)",label:"Termin"};case"cancelled":return{bg:"var(--color-noir-300)",text:"var(--color-noir-600)",label:"Annul"};default:return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:v}}},F=new Date,S=n.filter(v=>new Date(v.date)>=F&&v.status!=="cancelled"&&v.status!=="completed"),N=n.filter(v=>new Date(v.date)<F||v.status==="cancelled"||v.status==="completed"),I=d==="upcoming"?S:N;return!t||r&&r.role!=="client"?null:o.jsxs("div",{className:"min-h-screen",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:[o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8 max-w-6xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Mes rendez-vous"}),o.jsx("p",{className:"text-base",style:{color:"var(--color-noir-600)"},children:"Grez vos rendez-vous avec les garages"})]}),o.jsx(J,{to:"/app/garages",className:"px-6 py-2.5 bg-[var(--color-rouge-600)] hover:bg-[var(--color-rouge-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300 text-sm sm:text-base",children:"+ Nouveau rendez-vous"})]}),c&&o.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:c}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-xl border mb-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"flex border-b",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("button",{onClick:()=>u("upcoming"),className:`px-6 py-3 font-semibold text-sm transition-colors ${d==="upcoming"?"border-b-2":""}`,style:{color:d==="upcoming"?"var(--color-rouge-600)":"var(--color-noir-600)",borderBottomColor:d==="upcoming"?"var(--color-rouge-600)":"transparent"},children:[" venir (",S.length,")"]}),o.jsxs("button",{onClick:()=>u("past"),className:`px-6 py-3 font-semibold text-sm transition-colors ${d==="past"?"border-b-2":""}`,style:{color:d==="past"?"var(--color-rouge-600)":"var(--color-noir-600)",borderBottomColor:d==="past"?"var(--color-rouge-600)":"transparent"},children:["Passs (",N.length,")"]})]}),o.jsx("div",{className:"p-6",children:l?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):I.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",style:{color:"var(--color-noir-300)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),o.jsx("p",{className:"text-base mb-4",style:{color:"var(--color-noir-600)"},children:d==="upcoming"?"Aucun rendez-vous  venir":"Aucun rendez-vous pass"}),d==="upcoming"&&o.jsx(J,{to:"/app/garages",className:"inline-block px-6 py-2.5 bg-[var(--color-rouge-600)] hover:bg-[var(--color-rouge-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300",children:"Rserver un rendez-vous"})]}):o.jsx("div",{className:"space-y-4",children:I.map(v=>{const A=G(v.status),U=new Date(v.date),_=v.status==="pending"||v.status==="confirmed";return o.jsx("div",{className:"bg-white/50 rounded-xl p-5 sm:p-6 border shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-1",style:{color:"var(--color-noir)"},children:v.garageId.name}),o.jsxs("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:[v.garageId.address.street,", ",v.garageId.address.city]})]}),o.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap",style:{backgroundColor:A.bg,color:A.text},children:A.label})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",style:{color:"var(--color-rouge-600)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),o.jsx("span",{className:"text-sm font-medium",style:{color:"var(--color-noir-700)"},children:U.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",style:{color:"var(--color-rose-600)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.jsx("span",{className:"text-sm font-medium",style:{color:"var(--color-noir-700)"},children:v.time})]})]}),o.jsxs("div",{className:"bg-[var(--color-racine-50)] rounded-lg p-3 mb-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-semibold",style:{color:"var(--color-noir-700)"},children:v.serviceId.name}),o.jsxs("span",{className:"text-base font-bold",style:{color:"var(--color-rouge-600)"},children:[v.serviceId.price,""]})]}),o.jsx("span",{className:"text-xs uppercase",style:{color:"var(--color-racine-600)"},children:v.serviceId.category})]}),v.vehicleInfo&&(v.vehicleInfo.brand||v.vehicleInfo.model||v.vehicleInfo.licensePlate)&&o.jsxs("div",{className:"text-xs mb-2",style:{color:"var(--color-noir-600)"},children:[o.jsx("span",{className:"font-medium",children:"Vhicule: "}),[v.vehicleInfo.brand,v.vehicleInfo.model,v.vehicleInfo.year,v.vehicleInfo.licensePlate].filter(Boolean).join("  ")]}),v.notes&&o.jsxs("p",{className:"text-sm italic mt-2",style:{color:"var(--color-noir-600)"},children:['"',v.notes,'"']})]}),o.jsxs("div",{className:"flex flex-col gap-2 w-full sm:w-auto",children:[o.jsx("button",{onClick:()=>O(v.garageId._id,v._id),className:"px-4 py-2 bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] hover:from-[var(--color-rouge-700)] hover:to-[var(--color-rose-700)] text-white rounded-lg text-sm font-semibold transition-all duration-200 text-center shadow-md hover:shadow-xl hover:scale-105 active:scale-95",children:" Contacter le garagiste"}),_&&o.jsx("button",{onClick:()=>D(v._id),className:"px-4 py-2 border-2 rounded-lg text-sm font-semibold transition-all duration-200",style:{borderColor:"var(--color-rouge-600)",color:"var(--color-rouge-600)"},children:"Annuler"}),o.jsx(J,{to:`/app/garage/${v.garageId._id}`,className:"px-4 py-2 bg-[var(--color-racine-600)] hover:bg-[var(--color-racine-700)] text-white rounded-lg text-sm font-semibold transition-all duration-200 text-center",children:"Voir le garage"}),v.status==="completed"&&o.jsx("button",{onClick:()=>R(v),className:"px-4 py-2 border-2 rounded-lg text-sm font-semibold transition-all duration-200 text-center",style:{borderColor:"var(--color-rose-600)",color:"var(--color-rose-600)"},children:" Laisser un avis"})]})]})},v._id)})})})]})]}),m&&j&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>f(!1),children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col",onClick:v=>v.stopPropagation(),children:[o.jsxs("div",{className:"p-4 border-b flex items-center justify-between",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h3",{className:"text-lg font-bold",style:{color:"var(--color-noir)"},children:"Chat avec le garagiste"}),o.jsx("button",{onClick:()=>f(!1),className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-gray-100 transition-colors",style:{color:"var(--color-noir-600)"},children:""})]}),o.jsx("div",{className:"flex-1 overflow-hidden p-4",children:o.jsx(rl,{userId:j,appointmentId:h||void 0,onClose:()=>f(!1)})})]})}),g&&x&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>p(!1),children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full flex flex-col",onClick:v=>v.stopPropagation(),children:[o.jsxs("div",{className:"p-6 border-b",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Laisser un avis"}),o.jsxs("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:["Partagez votre exprience avec ",x.garageId.name]})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-3",style:{color:"var(--color-noir-700)"},children:"Note *"}),o.jsx("div",{className:"flex gap-2 justify-center",children:[1,2,3,4,5].map(v=>o.jsx("button",{type:"button",onClick:()=>E(v),className:"text-4xl transition-transform hover:scale-110",style:{color:v<=C?"#fbbf24":"#d1d5db"},children:""},v))}),o.jsx("p",{className:"text-center text-xs mt-2",style:{color:"var(--color-noir-600)"},children:C===5?"Excellent":C===4?"Trs bien":C===3?"Bien":C===2?"Moyen":"Mauvais"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:"Commentaire *"}),o.jsx("textarea",{value:P,onChange:v=>L(v.target.value),placeholder:"Dcrivez votre exprience avec ce garage...",rows:5,className:"w-full px-4 py-3 rounded-lg border-2 outline-none resize-none transition-all",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"}})]})]}),o.jsxs("div",{className:"p-6 border-t flex gap-3",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("button",{onClick:()=>{p(!1),k(null),E(5),L("")},className:"flex-1 px-4 py-2 border-2 rounded-lg text-sm font-semibold transition-all",style:{borderColor:"var(--color-racine-300)",color:"var(--color-noir-700)"},children:"Annuler"}),o.jsx("button",{onClick:V,disabled:H||!P.trim(),className:"flex-1 px-4 py-2 rounded-lg text-sm font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:H?"Publication...":"Publier l'avis"})]})]})})]})}function nb(){const e=ue(),r=Z(S=>S.user),t=Z(S=>S.setUser);Z(S=>S.logout);const n=Z(S=>!!S.token&&!!S.user),[s,l]=b.useState(!0),[a,c]=b.useState(!1),[i,d]=b.useState(null),[u,m]=b.useState(null),[f,j]=b.useState([]),[w,h]=b.useState("profile"),[y,g]=b.useState(""),[p,x]=b.useState(""),[k,C]=b.useState(""),[E,P]=b.useState(""),[L,H]=b.useState(""),[B,X]=b.useState(""),[D,R]=b.useState("");b.useEffect(()=>{if(!n){e("/login",{replace:!0});return}if(r&&r.role!=="client"){e("/app",{replace:!0});return}r&&(g(r.name||""),x(r.email||""),C(r.phone||""),P(r.avatar||""),V(),l(!1))},[n,r,e]);const V=async()=>{try{const N=(await z.get("/reviews")).data.reviews||[],I=(r==null?void 0:r._id)||(r==null?void 0:r.id);j(N.filter(v=>{var A;return((A=v.clientId)==null?void 0:A._id)===I||v.clientId===I}))}catch{}},O=async S=>{var N,I;S.preventDefault(),c(!0),d(null),m(null);try{const v=await z.put("/users/profile",{name:y,phone:k||void 0,avatar:E||void 0});t(v.data.user||{...r,name:y,phone:k,avatar:E}),m("Profil mis  jour avec succs !"),setTimeout(()=>m(null),3e3)}catch(v){d(((I=(N=v.response)==null?void 0:N.data)==null?void 0:I.message)||"Erreur lors de la mise  jour")}finally{c(!1)}},G=async S=>{var N,I;if(S.preventDefault(),c(!0),d(null),m(null),B!==D){d("Les mots de passe ne correspondent pas"),c(!1);return}if(B.length<6){d("Le mot de passe doit contenir au moins 6 caractres"),c(!1);return}try{await z.put("/users/profile/password",{currentPassword:L,newPassword:B}),H(""),X(""),R(""),m("Mot de passe modifi avec succs !"),setTimeout(()=>m(null),3e3)}catch(v){d(((I=(N=v.response)==null?void 0:N.data)==null?void 0:I.message)||"Erreur lors du changement de mot de passe")}finally{c(!1)}},F=S=>{const N=Math.floor(S),I=S%1>=.5,v=5-N-(I?1:0);return o.jsxs("div",{className:"flex items-center gap-0.5",children:[[...Array(N)].map((A,U)=>o.jsx("svg",{className:"w-4 h-4",style:{color:"var(--color-rose-500)"},fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},U)),I&&o.jsxs("svg",{className:"w-4 h-4",style:{color:"var(--color-rose-500)"},fill:"currentColor",viewBox:"0 0 20 20",children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"half-profile",children:[o.jsx("stop",{offset:"50%",stopColor:"currentColor"}),o.jsx("stop",{offset:"50%",stopColor:"transparent",stopOpacity:"1"})]})}),o.jsx("path",{fill:"url(#half-profile)",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]}),[...Array(v)].map((A,U)=>o.jsx("svg",{className:"w-4 h-4",style:{color:"var(--color-noir-300)"},fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},U))]})};return s?o.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):!r||r.role!=="client"?null:o.jsx("div",{className:"min-h-screen",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8 max-w-4xl",children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-6",style:{color:"var(--color-noir)"},children:"Mon Profil"}),i&&o.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:i}),u&&o.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:u}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-xl border mb-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"flex border-b",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("button",{onClick:()=>h("profile"),className:`px-6 py-3 font-semibold text-sm transition-colors ${w==="profile"?"border-b-2":""}`,style:{color:w==="profile"?"var(--color-rouge-600)":"var(--color-noir-600)",borderBottomColor:w==="profile"?"var(--color-rouge-600)":"transparent"},children:"Informations"}),o.jsx("button",{onClick:()=>h("password"),className:`px-6 py-3 font-semibold text-sm transition-colors ${w==="password"?"border-b-2":""}`,style:{color:w==="password"?"var(--color-rouge-600)":"var(--color-noir-600)",borderBottomColor:w==="password"?"var(--color-rouge-600)":"transparent"},children:"Mot de passe"}),o.jsxs("button",{onClick:()=>h("reviews"),className:`px-6 py-3 font-semibold text-sm transition-colors ${w==="reviews"?"border-b-2":""}`,style:{color:w==="reviews"?"var(--color-rouge-600)":"var(--color-noir-600)",borderBottomColor:w==="reviews"?"var(--color-rouge-600)":"transparent"},children:["Mes avis (",f.length,")"]})]}),o.jsxs("div",{className:"p-6",children:[w==="profile"&&o.jsxs("form",{onSubmit:O,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:"Photo de profil"}),o.jsxs("div",{className:"flex items-start gap-4",children:[E&&o.jsx("div",{className:"relative",children:o.jsx("img",{src:E,alt:"Avatar",className:"w-20 h-20 rounded-full object-cover border-2",style:{borderColor:"var(--color-racine-200)"}})}),o.jsx("div",{className:"flex-1",children:o.jsx(sc,{onUploadComplete:S=>P(S[0]||""),maxImages:1,folder:"avatars",multiple:!1,label:"Changer la photo de profil",initialUrls:E?[E]:[]})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:"Nom complet *"}),o.jsx("input",{type:"text",value:y,onChange:S=>g(S.target.value),required:!0,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},onFocus:S=>S.target.style.borderColor="var(--color-rose-500)",onBlur:S=>S.target.style.borderColor="var(--color-racine-200)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:"Email"}),o.jsx("input",{type:"email",value:p,disabled:!0,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all text-sm cursor-not-allowed opacity-60",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"var(--color-racine-50)"}}),o.jsx("p",{className:"text-xs mt-1",style:{color:"var(--color-noir-500)"},children:"L'email ne peut pas tre modifi"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:"Tlphone"}),o.jsx("input",{type:"tel",value:k,onChange:S=>C(S.target.value),className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},onFocus:S=>S.target.style.borderColor="var(--color-rose-500)",onBlur:S=>S.target.style.borderColor="var(--color-racine-200)"})]}),o.jsx("button",{type:"submit",disabled:a,className:"px-6 py-3 bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] hover:from-[var(--color-rouge-700)] hover:to-[var(--color-rose-700)] text-white font-semibold rounded-lg shadow-lg hover:shadow-2xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-[1.02] active:scale-[0.98] relative overflow-hidden",children:o.jsx("span",{className:"relative z-10",children:a?"Enregistrement...":"Enregistrer les modifications"})})]}),w==="password"&&o.jsxs("form",{onSubmit:G,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:"Mot de passe actuel *"}),o.jsx("input",{type:"password",value:L,onChange:S=>H(S.target.value),required:!0,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},onFocus:S=>S.target.style.borderColor="var(--color-rose-500)",onBlur:S=>S.target.style.borderColor="var(--color-racine-200)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:"Nouveau mot de passe *"}),o.jsx("input",{type:"password",value:B,onChange:S=>X(S.target.value),required:!0,minLength:6,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},onFocus:S=>S.target.style.borderColor="var(--color-rose-500)",onBlur:S=>S.target.style.borderColor="var(--color-racine-200)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:"Confirmer le nouveau mot de passe *"}),o.jsx("input",{type:"password",value:D,onChange:S=>R(S.target.value),required:!0,minLength:6,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},onFocus:S=>S.target.style.borderColor="var(--color-rose-500)",onBlur:S=>S.target.style.borderColor="var(--color-racine-200)"})]}),o.jsx("button",{type:"submit",disabled:a,className:"px-6 py-3 bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] hover:from-[var(--color-rouge-700)] hover:to-[var(--color-rose-700)] text-white font-semibold rounded-lg shadow-lg hover:shadow-2xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-[1.02] active:scale-[0.98] relative overflow-hidden",children:o.jsx("span",{className:"relative z-10",children:a?"Changement...":"Changer le mot de passe"})})]}),w==="reviews"&&o.jsx("div",{children:f.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",style:{color:"var(--color-noir-300)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),o.jsx("p",{className:"text-base mb-4",style:{color:"var(--color-noir-600)"},children:"Vous n'avez pas encore laiss d'avis"})]}):o.jsx("div",{className:"space-y-4",children:f.map(S=>{var N,I;return o.jsxs("div",{className:"bg-white/50 rounded-lg p-4 border",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-semibold",style:{color:"var(--color-noir)"},children:((N=S.garageId)==null?void 0:N.name)||"Garage"}),F(S.rating)]}),o.jsx("span",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:new Date(S.createdAt).toLocaleDateString("fr-FR")})]}),S.comment&&o.jsx("p",{className:"text-sm mt-2",style:{color:"var(--color-noir-700)"},children:S.comment}),((I=S.garageId)==null?void 0:I._id)&&o.jsx(J,{to:`/app/garage/${S.garageId._id}`,className:"inline-block mt-2 text-xs font-semibold hover:underline",style:{color:"var(--color-rouge-600)"},children:"Voir le garage "})]},S._id)})})})]})]})]})})}function sb(){const e=ue(),r=Z(f=>f.user),t=Z(f=>!!f.token&&!!f.user),[n,s]=b.useState([]),[l,a]=b.useState(!0),[c,i]=b.useState(null);b.useEffect(()=>{if(!t){e("/login",{replace:!0});return}if(r&&r.role!=="client"){e("/app",{replace:!0});return}d()},[t,r,e]);const d=async()=>{var f,j;a(!0),i(null);try{const w=await z.get("/favorites");s(w.data.favorites||[])}catch(w){i(((j=(f=w.response)==null?void 0:f.data)==null?void 0:j.message)||"Erreur lors du chargement")}finally{a(!1)}},u=async(f,j)=>{var w,h;if(confirm(`Retirer "${j}" de vos favoris ?`))try{await z.delete(`/favorites/${f}`),d()}catch(y){alert(((h=(w=y.response)==null?void 0:w.data)==null?void 0:h.message)||"Erreur lors de la suppression")}},m=f=>{const j=Math.floor(f),w=f%1>=.5,h=5-j-(w?1:0);return o.jsxs("div",{className:"flex items-center gap-0.5",children:[[...Array(j)].map((y,g)=>o.jsx("svg",{className:"w-4 h-4",style:{color:"var(--color-rose-500)"},fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},g)),w&&o.jsxs("svg",{className:"w-4 h-4",style:{color:"var(--color-rose-500)"},fill:"currentColor",viewBox:"0 0 20 20",children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"half-fav",children:[o.jsx("stop",{offset:"50%",stopColor:"currentColor"}),o.jsx("stop",{offset:"50%",stopColor:"transparent",stopOpacity:"1"})]})}),o.jsx("path",{fill:"url(#half-fav)",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]}),[...Array(h)].map((y,g)=>o.jsx("svg",{className:"w-4 h-4",style:{color:"var(--color-noir-300)"},fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},g))]})};return!t||r&&r.role!=="client"?null:o.jsx("div",{className:"min-h-screen",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8 max-w-7xl",children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-6",style:{color:"var(--color-noir)"},children:" Mes favoris"}),c&&o.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:c}),l?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):n.length===0?o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-12 text-center shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("svg",{className:"w-24 h-24 mx-auto mb-4",style:{color:"var(--color-noir-300)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),o.jsx("h2",{className:"text-xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Aucun favori"}),o.jsx("p",{className:"text-base mb-6",style:{color:"var(--color-noir-600)"},children:"Vous n'avez pas encore de garages favoris. Explorez les garages et ajoutez vos prfrs !"}),o.jsx(J,{to:"/app/garages",className:"inline-block px-6 py-2.5 bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] hover:from-[var(--color-rouge-700)] hover:to-[var(--color-rose-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300",children:"Dcouvrir les garages"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-4 text-sm",style:{color:"var(--color-noir-600)"},children:[n.length," garage",n.length>1?"s":""," favori",n.length>1?"s":""]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:n.map(f=>{var w,h;const j=f.garageId;return o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl overflow-hidden shadow-md border hover:shadow-2xl hover:-translate-y-2 hover:scale-[1.02] transition-all duration-300 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"h-48 flex items-center justify-center relative",style:{background:"linear-gradient(to bottom right, var(--color-racine-100), var(--color-rose-100))"},children:[j.images&&j.images.length>0?o.jsx("img",{src:j.images[0],alt:j.name,className:"w-full h-full object-cover"}):o.jsx("svg",{className:"w-20 h-20",style:{color:"var(--color-racine-400)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),j.isVerified&&o.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:" Vrifi"}),o.jsx("button",{onClick:()=>u(j._id,j.name),className:"absolute top-2 left-2 w-8 h-8 rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110",style:{backgroundColor:"var(--color-rose-600)",color:"white"},title:"Retirer des favoris",children:""})]}),o.jsxs("div",{className:"p-4",children:[o.jsx(J,{to:`/app/garage/${j._id}`,children:o.jsx("h3",{className:"text-lg font-bold mb-2 hover:underline",style:{color:"var(--color-noir)"},children:j.name})}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m(((w=j.rating)==null?void 0:w.average)||0),o.jsxs("span",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:["(",((h=j.rating)==null?void 0:h.count)||0," avis)"]})]}),o.jsx("div",{className:"space-y-1 mb-3",children:o.jsxs("div",{className:"flex items-center gap-2 text-sm",style:{color:"var(--color-noir-600)"},children:[o.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),j.address.street,", ",j.address.city]})}),o.jsxs("div",{className:"flex gap-2 pt-3 border-t",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx(J,{to:`/app/garage/${j._id}`,className:"flex-1 px-4 py-2 bg-[var(--color-rouge-600)] hover:bg-[var(--color-rouge-700)] text-white font-semibold rounded-lg shadow-sm hover:shadow-md transition-all duration-200 text-center text-sm",children:"Voir dtails"}),t&&(r==null?void 0:r.role)==="client"&&o.jsx(J,{to:`/app/garage/${j._id}/book`,className:"px-4 py-2 bg-[var(--color-rose-600)] hover:bg-[var(--color-rose-700)] text-white font-semibold rounded-lg shadow-sm hover:shadow-md transition-all duration-200 text-sm",children:"Rserver"})]})]})]},f._id)})})]})]})})}function Sf(){const[e,r]=Qi(),[t,n]=b.useState([]),[s,l]=b.useState(e.get("userId")),[a,c]=b.useState(!0);b.useEffect(()=>{i();const u=e.get("userId");u&&l(u)},[]);const i=async()=>{var u,m;try{const f=await z.get("/messages/conversations");n(f.data.conversations||[]),c(!1)}catch(f){console.error("Erreur chargement conversations:",f),(((u=f.response)==null?void 0:u.status)===404||((m=f.response)==null?void 0:m.status)===403)&&console.warn("La route /messages/conversations n'est peut-tre pas disponible"),n([]),c(!1)}};if(a)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})});const d=()=>{l(null),r({})};return s?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2.5 rounded-lg font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95",style:{backgroundColor:"var(--color-racine-600)",color:"white"},children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Retour aux conversations"]}),o.jsx(rl,{userId:s,onClose:d})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-2xl font-bold mb-6",style:{color:"var(--color-noir)"},children:"Messages"}),t.length===0?o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-8 text-center shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsx("p",{className:"text-base",style:{color:"var(--color-noir-600)"},children:"Aucune conversation"})}):o.jsx("div",{className:"space-y-2",children:t.map(u=>{var m,f,j;return o.jsxs("button",{onClick:()=>{l(u.user._id),r({userId:u.user._id})},className:"w-full p-4 bg-white/90 backdrop-blur-md rounded-xl shadow-md border hover:shadow-xl transition-all duration-300 hover:-translate-y-1 flex items-center justify-between",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[u.user.avatar?o.jsx("img",{src:u.user.avatar,alt:u.user.name,className:"w-12 h-12 rounded-full"}):o.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold",style:{backgroundColor:"var(--color-rouge-100)",color:"var(--color-rouge-700)"},children:((f=(m=u.user.name)==null?void 0:m[0])==null?void 0:f.toUpperCase())||"U"}),o.jsxs("div",{className:"text-left",children:[o.jsx("h3",{className:"font-semibold",style:{color:"var(--color-noir)"},children:u.user.name}),o.jsx("p",{className:"text-sm truncate max-w-[200px]",style:{color:"var(--color-noir-600)"},children:((j=u.lastMessage)==null?void 0:j.content)||"Aucun message"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:u.lastMessage?new Date(u.lastMessage.createdAt).toLocaleDateString("fr-FR"):""}),u.unreadCount>0&&o.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 rounded-full text-xs font-semibold",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:u.unreadCount})]})]},u._id)})})]})}function lb(){return o.jsx("div",{className:"min-h-screen",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsx("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8 max-w-4xl",children:o.jsx(Sf,{})})})}function ab(){const e=ue(),[r,t]=b.useState([]),[n,s]=b.useState(!0),[l,a]=b.useState(null),[c,i]=b.useState("all");b.useEffect(()=>{d()},[]);const d=async()=>{var p,x;s(!0),a(null);try{const k=await z.get("/appointments/garage/me");t(k.data.appointments||[])}catch(k){a(((x=(p=k.response)==null?void 0:p.data)==null?void 0:x.message)||"Erreur lors du chargement")}finally{s(!1)}},u=async(p,x)=>{var k,C;try{await z.put(`/appointments/${p}`,{status:x}),d()}catch(E){alert(((C=(k=E.response)==null?void 0:k.data)==null?void 0:C.message)||"Erreur lors de la mise  jour")}},m=p=>{switch(p){case"pending":return{bg:"var(--color-racine-100)",text:"var(--color-racine-700)",label:"En attente"};case"confirmed":return{bg:"var(--color-rouge-100)",text:"var(--color-rouge-700)",label:"Confirm"};case"in-progress":return{bg:"var(--color-rose-100)",text:"var(--color-rose-700)",label:"En cours"};case"completed":return{bg:"var(--color-racine-200)",text:"var(--color-racine-800)",label:"Termin"};case"cancelled":return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:"Annul"};default:return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:p}}},j=(()=>{const p=new Date;p.setHours(0,0,0,0);const x=new Date(p);switch(x.setDate(x.getDate()+1),c){case"today":return r.filter(k=>{const C=new Date(k.date);return C>=p&&C<x});case"pending":return r.filter(k=>k.status==="pending");case"confirmed":return r.filter(k=>k.status==="confirmed");case"completed":return r.filter(k=>k.status==="completed");default:return r}})(),w=r.filter(p=>{const x=new Date(p.date),k=new Date;k.setHours(0,0,0,0);const C=new Date(k);return C.setDate(C.getDate()+1),x>=k&&x<C}).length,h=r.filter(p=>p.status==="pending").length,y=r.filter(p=>p.status==="confirmed").length,g=r.filter(p=>p.status==="completed").length;return o.jsx("div",{className:"min-h-screen animate-fadeIn",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 max-w-7xl",children:[o.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:o.jsxs("div",{children:[o.jsxs("button",{onClick:()=>e("/garage"),className:"mb-4 flex items-center gap-2 text-sm font-medium hover:underline",style:{color:"var(--color-noir-600)"},children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Retour au dashboard"]}),o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Mes Rendez-vous"}),o.jsx("p",{className:"text-base",style:{color:"var(--color-noir-600)"},children:"Grez tous vos rendez-vous clients"})]})}),l&&o.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:l}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-xl border mb-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"flex border-b overflow-x-auto",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("button",{onClick:()=>i("all"),className:`px-6 py-3 font-semibold text-sm transition-colors whitespace-nowrap ${c==="all"?"border-b-2":""}`,style:{color:c==="all"?"var(--color-rouge-600)":"var(--color-noir-600)",borderBottomColor:c==="all"?"var(--color-rouge-600)":"transparent"},children:["Tous (",r.length,")"]}),o.jsxs("button",{onClick:()=>i("today"),className:`px-6 py-3 font-semibold text-sm transition-colors whitespace-nowrap ${c==="today"?"border-b-2":""}`,style:{color:c==="today"?"var(--color-rouge-600)":"var(--color-noir-600)",borderBottomColor:c==="today"?"var(--color-rouge-600)":"transparent"},children:["Aujourd'hui (",w,")"]}),o.jsxs("button",{onClick:()=>i("pending"),className:`px-6 py-3 font-semibold text-sm transition-colors whitespace-nowrap ${c==="pending"?"border-b-2":""}`,style:{color:c==="pending"?"var(--color-rouge-600)":"var(--color-noir-600)",borderBottomColor:c==="pending"?"var(--color-rouge-600)":"transparent"},children:["En attente (",h,")"]}),o.jsxs("button",{onClick:()=>i("confirmed"),className:`px-6 py-3 font-semibold text-sm transition-colors whitespace-nowrap ${c==="confirmed"?"border-b-2":""}`,style:{color:c==="confirmed"?"var(--color-rouge-600)":"var(--color-noir-600)",borderBottomColor:c==="confirmed"?"var(--color-rouge-600)":"transparent"},children:["Confirms (",y,")"]}),o.jsxs("button",{onClick:()=>i("completed"),className:`px-6 py-3 font-semibold text-sm transition-colors whitespace-nowrap ${c==="completed"?"border-b-2":""}`,style:{color:c==="completed"?"var(--color-rouge-600)":"var(--color-noir-600)",borderBottomColor:c==="completed"?"var(--color-rouge-600)":"transparent"},children:["Termins (",g,")"]})]}),o.jsx("div",{className:"p-6",children:n?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):j.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",style:{color:"var(--color-noir-300)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),o.jsxs("p",{className:"text-base mb-4",style:{color:"var(--color-noir-600)"},children:["Aucun rendez-vous ",c!=="all"?`(${c})`:""]})]}):o.jsx("div",{className:"space-y-4",children:j.map(p=>{var E,P,L,H,B;const x=m(p.status),k=new Date(p.date),C=p.status==="pending"||p.status==="confirmed"||p.status==="in-progress";return o.jsx("div",{className:"bg-white/50 rounded-xl p-5 sm:p-6 border shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx("div",{className:"flex items-start justify-between mb-3",children:o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsxs("span",{className:"text-lg font-bold",style:{color:"var(--color-noir)"},children:[k.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"}),"  ",p.time]}),o.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:x.bg,color:x.text},children:x.label})]}),o.jsxs("h3",{className:"text-lg sm:text-xl font-bold mb-1",style:{color:"var(--color-noir)"},children:[" ",((E=p.clientId)==null?void 0:E.name)||"Client"]}),o.jsxs("p",{className:"text-sm mb-2",style:{color:"var(--color-noir-600)"},children:[" ",((P=p.clientId)==null?void 0:P.email)||"-"," |  ",((L=p.clientId)==null?void 0:L.phone)||"-"]}),o.jsxs("p",{className:"text-sm font-medium mb-1",style:{color:"var(--color-noir-700)"},children:[" ",((H=p.serviceId)==null?void 0:H.name)||"Service"]}),((B=p.serviceId)==null?void 0:B.price)&&o.jsxs("p",{className:"text-sm mb-2",style:{color:"var(--color-rouge-600)"},children:[" ",p.serviceId.price,""]}),p.notes&&o.jsxs("p",{className:"text-sm italic mb-2",style:{color:"var(--color-noir-600)"},children:[" ",p.notes]}),p.vehicleInfo&&(p.vehicleInfo.brand||p.vehicleInfo.model)&&o.jsxs("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:[" ",p.vehicleInfo.brand," ",p.vehicleInfo.model," ",p.vehicleInfo.year?`(${p.vehicleInfo.year})`:""]})]})})}),C&&o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[p.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>u(p._id,"confirmed"),className:"px-4 py-2 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:" Accepter"})}),o.jsx("button",{onClick:()=>u(p._id,"cancelled"),className:"px-4 py-2 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-noir-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:" Refuser"})})]}),p.status==="confirmed"&&o.jsx("button",{onClick:()=>u(p._id,"in-progress"),className:"px-4 py-2 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:" Dmarrer"})}),p.status==="in-progress"&&o.jsx("button",{onClick:()=>u(p._id,"completed"),className:"px-4 py-2 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-racine-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:" Terminer"})})]})]})},p._id)})})})]})]})})}function ib(){const e=ue(),[r,t]=b.useState([]),[n,s]=b.useState(!0),[l,a]=b.useState(null),[c,i]=b.useState(!1),[d,u]=b.useState(null),[m,f]=b.useState(!1),[j,w]=b.useState(null),[h,y]=b.useState(""),[g,p]=b.useState(""),[x,k]=b.useState("reparation"),[C,E]=b.useState(""),[P,L]=b.useState("variable"),[H,B]=b.useState(""),[X,D]=b.useState(!0);b.useEffect(()=>{R()},[]);const R=async()=>{var v,A;s(!0),a(null);try{const _=(await z.get("/garages/me")).data.garage;w(_._id);const M=await z.get(`/services/garage/${_._id}`);t(M.data.services||[])}catch(U){a(((A=(v=U.response)==null?void 0:v.data)==null?void 0:A.message)||"Erreur lors du chargement")}finally{s(!1)}},V=()=>{y(""),p(""),k("reparation"),E(""),L("variable"),B(""),D(!0),u(null),i(!1)},O=v=>{var A,U;u(v),y(v.name),p(v.description||""),k(v.category),E(((A=v.price)==null?void 0:A.toString())||""),L(v.priceType),B(((U=v.duration)==null?void 0:U.toString())||""),D(v.isActive),i(!0)},G=async v=>{var A,U;v.preventDefault(),f(!0),a(null);try{const _={name:h,description:g||void 0,category:x,priceType:P,isActive:X};C&&(_.price=parseFloat(C)),H&&(_.duration=parseInt(H)),d?await z.put(`/services/${d._id}`,_):await z.post("/services",_),V(),R()}catch(_){a(((U=(A=_.response)==null?void 0:A.data)==null?void 0:U.message)||"Erreur lors de la sauvegarde")}finally{f(!1)}},F=async(v,A)=>{var U,_;if(confirm(`tes-vous sr de vouloir supprimer le service "${A}" ?`))try{await z.delete(`/services/${v}`),R()}catch(M){alert(((_=(U=M.response)==null?void 0:U.data)==null?void 0:_.message)||"Erreur lors de la suppression")}},S=async v=>{var A,U;try{await z.put(`/services/${v._id}`,{isActive:!v.isActive}),R()}catch(_){alert(((U=(A=_.response)==null?void 0:A.data)==null?void 0:U.message)||"Erreur lors de la mise  jour")}},N=v=>({reparation:"Rparation",entretien:"Entretien",depannage:"Dpannage","vente-pieces":"Vente de pices",carrosserie:"Carrosserie",peinture:"Peinture",revision:"Rvision",autre:"Autre"})[v]||v,I=v=>({fixe:"Prix fixe",variable:"Prix variable","sur-devis":"Sur devis"})[v]||v;return o.jsx("div",{className:"min-h-screen animate-fadeIn",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 max-w-7xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsxs("button",{onClick:()=>e("/garage"),className:"mb-4 flex items-center gap-2 text-sm font-medium hover:underline",style:{color:"var(--color-noir-600)"},children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Retour au dashboard"]}),o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Mes Services"}),o.jsx("p",{className:"text-base",style:{color:"var(--color-noir-600)"},children:"Grez les services proposs par votre garage"})]}),o.jsx("button",{onClick:()=>{V(),i(!0)},className:"px-4 py-2 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:"+ Ajouter un service"})})]}),l&&o.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:l}),c&&o.jsxs("div",{className:"mb-6 bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border animate-slideIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h2",{className:"text-xl font-bold mb-4",style:{color:"var(--color-noir)"},children:d?"Modifier le service":"Nouveau Service"}),o.jsxs("form",{onSubmit:G,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Nom du service *"}),o.jsx("input",{type:"text",value:h,onChange:v=>y(v.target.value),required:!0,placeholder:"Ex: Vidange",className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:v=>{v.target.style.borderColor="var(--color-rose-500)",v.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:v=>{v.target.style.borderColor="var(--color-racine-200)",v.target.style.boxShadow="none"}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Catgorie *"}),o.jsxs("select",{value:x,onChange:v=>k(v.target.value),required:!0,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},onFocus:v=>{v.target.style.borderColor="var(--color-rose-500)",v.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:v=>{v.target.style.borderColor="var(--color-racine-200)",v.target.style.boxShadow="none"},children:[o.jsx("option",{value:"reparation",children:"Rparation"}),o.jsx("option",{value:"entretien",children:"Entretien"}),o.jsx("option",{value:"depannage",children:"Dpannage"}),o.jsx("option",{value:"vente-pieces",children:"Vente de pices"}),o.jsx("option",{value:"carrosserie",children:"Carrosserie"}),o.jsx("option",{value:"peinture",children:"Peinture"}),o.jsx("option",{value:"revision",children:"Rvision"}),o.jsx("option",{value:"autre",children:"Autre"})]})]}),o.jsxs("div",{className:"sm:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Description"}),o.jsx("textarea",{value:g,onChange:v=>p(v.target.value),placeholder:"Description du service...",rows:3,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:v=>{v.target.style.borderColor="var(--color-rose-500)",v.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:v=>{v.target.style.borderColor="var(--color-racine-200)",v.target.style.boxShadow="none"}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Type de prix *"}),o.jsxs("select",{value:P,onChange:v=>L(v.target.value),required:!0,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},onFocus:v=>{v.target.style.borderColor="var(--color-rose-500)",v.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:v=>{v.target.style.borderColor="var(--color-racine-200)",v.target.style.boxShadow="none"},children:[o.jsx("option",{value:"fixe",children:"Prix fixe"}),o.jsx("option",{value:"variable",children:"Prix variable"}),o.jsx("option",{value:"sur-devis",children:"Sur devis"})]})]}),P==="fixe"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Prix ()"}),o.jsx("input",{type:"number",value:C,onChange:v=>E(v.target.value),min:"0",step:"0.01",placeholder:"0.00",className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:v=>{v.target.style.borderColor="var(--color-rose-500)",v.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:v=>{v.target.style.borderColor="var(--color-racine-200)",v.target.style.boxShadow="none"}})]}),P!=="sur-devis"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Prix indicatif ()"}),o.jsx("input",{type:"number",value:C,onChange:v=>E(v.target.value),min:"0",step:"0.01",placeholder:"0.00",className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:v=>{v.target.style.borderColor="var(--color-rose-500)",v.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:v=>{v.target.style.borderColor="var(--color-racine-200)",v.target.style.boxShadow="none"}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Dure estime (minutes)"}),o.jsx("input",{type:"number",value:H,onChange:v=>B(v.target.value),min:"0",placeholder:"Ex: 60",className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:v=>{v.target.style.borderColor="var(--color-rose-500)",v.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:v=>{v.target.style.borderColor="var(--color-racine-200)",v.target.style.boxShadow="none"}})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:X,onChange:v=>D(v.target.checked),className:"w-4 h-4 rounded",style:{accentColor:"var(--color-rose-600)"}}),o.jsx("label",{className:"text-sm font-medium",style:{color:"var(--color-noir-700)"},children:"Service actif"})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("button",{type:"submit",disabled:m,className:"px-6 py-2.5 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:m?"Enregistrement...":d?"Modifier":"Crer"})}),o.jsx("button",{type:"button",onClick:V,className:"px-6 py-2.5 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 border-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir-700)"},children:"Annuler"})]})]})]}),n?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):r.length===0?o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-12 text-center shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("svg",{className:"w-24 h-24 mx-auto mb-4",style:{color:"var(--color-noir-300)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),o.jsx("h2",{className:"text-xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Aucun service"}),o.jsx("p",{className:"text-base mb-6",style:{color:"var(--color-noir-600)"},children:"Ajoutez votre premier service pour commencer"}),o.jsx("button",{onClick:()=>{V(),i(!0)},className:"px-6 py-2.5 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:"+ Ajouter un service"})})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:r.map(v=>o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-5 sm:p-6 shadow-xl border hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 animate-fadeIn",style:{borderColor:v.isActive?"var(--color-racine-200)":"var(--color-noir-300)"},children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold mb-1",style:{color:"var(--color-noir)"},children:v.name}),o.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:"var(--color-rose-100)",color:"var(--color-rose-700)"},children:N(v.category)})]}),o.jsx("button",{onClick:()=>S(v),className:`px-2 py-1 rounded text-xs font-semibold transition-all duration-200 ${v.isActive?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,title:v.isActive?"Dsactiver":"Activer",children:v.isActive?"":""})]}),v.description&&o.jsx("p",{className:"text-sm mb-3",style:{color:"var(--color-noir-600)"},children:v.description}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{style:{color:"var(--color-noir-600)"},children:""}),o.jsxs("span",{style:{color:"var(--color-noir-700)"},children:[I(v.priceType),v.price&&` - ${v.price}`]})]}),v.duration&&o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{style:{color:"var(--color-noir-600)"},children:""}),o.jsxs("span",{style:{color:"var(--color-noir-700)"},children:[v.duration," minutes"]})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4 border-t",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("button",{onClick:()=>O(v),className:"flex-1 px-4 py-2 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:" Modifier"})}),o.jsx("button",{onClick:()=>F(v._id,v.name),className:"px-4 py-2 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-noir-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:""})})]})]},v._id))})]})})}function cb(){const e=ue(),[r,t]=b.useState([]),[n,s]=b.useState(null),[l,a]=b.useState(!0),[c,i]=b.useState(null),[d,u]=b.useState(null);b.useEffect(()=>{m()},[]);const m=async()=>{var h,y;a(!0),i(null);try{const p=(await z.get("/garages/me")).data.garage;u(p._id),s({average:p.rating.average,count:p.rating.count});const x=await z.get(`/reviews/garage/${p._id}`);t(x.data.reviews||[])}catch(g){i(((y=(h=g.response)==null?void 0:h.data)==null?void 0:y.message)||"Erreur lors du chargement")}finally{a(!1)}},f=h=>{const y=Math.floor(h),g=h%1>=.5,p=5-y-(g?1:0);return o.jsxs("div",{className:"flex items-center gap-0.5",children:[[...Array(y)].map((x,k)=>o.jsx("svg",{className:"w-5 h-5",style:{color:"var(--color-rose-500)"},fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},k)),g&&o.jsxs("svg",{className:"w-5 h-5",style:{color:"var(--color-rose-500)"},fill:"currentColor",viewBox:"0 0 20 20",children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:`half-${h}`,children:[o.jsx("stop",{offset:"50%",stopColor:"currentColor"}),o.jsx("stop",{offset:"50%",stopColor:"transparent",stopOpacity:"1"})]})}),o.jsx("path",{fill:`url(#half-${h})`,d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]}),[...Array(p)].map((x,k)=>o.jsx("svg",{className:"w-5 h-5",style:{color:"var(--color-noir-300)"},fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},k))]})},w=(()=>{const h={5:0,4:0,3:0,2:0,1:0};return r.forEach(y=>{const g=Math.round(y.rating);g>=1&&g<=5&&h[g]++}),h})();return o.jsx("div",{className:"min-h-screen animate-fadeIn",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 max-w-7xl",children:[o.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:o.jsxs("div",{children:[o.jsxs("button",{onClick:()=>e("/garage"),className:"mb-4 flex items-center gap-2 text-sm font-medium hover:underline",style:{color:"var(--color-noir-600)"},children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Retour au dashboard"]}),o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Avis Clients"}),o.jsx("p",{className:"text-base",style:{color:"var(--color-noir-600)"},children:"Consultez tous les avis reus"})]})}),c&&o.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:c}),n&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:"var(--color-noir)"},children:"Note moyenne"}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"text-5xl font-bold",style:{color:"var(--color-rose-600)"},children:n.average.toFixed(1)}),o.jsxs("div",{className:"flex-1",children:[f(n.average),o.jsxs("p",{className:"text-sm mt-2",style:{color:"var(--color-noir-600)"},children:["Sur ",n.count," avis"]})]})]})]}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:"var(--color-noir)"},children:"Rpartition des notes"}),o.jsx("div",{className:"space-y-2",children:[5,4,3,2,1].map(h=>{const y=w[h],g=r.length>0?y/r.length*100:0;return o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-sm font-medium w-12",style:{color:"var(--color-noir-700)"},children:[h," "]}),o.jsx("div",{className:"flex-1 h-4 bg-gray-200 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full transition-all duration-300",style:{width:`${g}%`,backgroundColor:"var(--color-rose-500)"}})}),o.jsx("span",{className:"text-sm font-medium w-12 text-right",style:{color:"var(--color-noir-600)"},children:y})]},h)})})]})]}),l?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):r.length===0?o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-12 text-center shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("svg",{className:"w-24 h-24 mx-auto mb-4",style:{color:"var(--color-noir-300)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),o.jsx("h2",{className:"text-xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Aucun avis"}),o.jsx("p",{className:"text-base",style:{color:"var(--color-noir-600)"},children:"Aucun client n'a encore laiss d'avis pour votre garage"})]}):o.jsx("div",{className:"space-y-4",children:r.map(h=>{var g,p,x;const y=new Date(h.createdAt);return o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-5 sm:p-6 border shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] flex items-center justify-center text-white font-semibold text-lg flex-shrink-0",children:((p=(g=h.clientId)==null?void 0:g.name)==null?void 0:p.charAt(0).toUpperCase())||"C"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 mb-2",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-base",style:{color:"var(--color-noir)"},children:((x=h.clientId)==null?void 0:x.name)||"Client"}),o.jsx("p",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:y.toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[f(h.rating),h.isVerified&&o.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:" Vrifi"})]})]}),h.comment&&o.jsx("p",{className:"text-sm mt-2",style:{color:"var(--color-noir-700)"},children:h.comment})]})]})},h._id)})})]})})}function db(){const e=ue(),[r,t]=b.useState(null),[n,s]=b.useState(!0),[l,a]=b.useState(!1),[c,i]=b.useState(null),[d,u]=b.useState(null),[m,f]=b.useState(""),[j,w]=b.useState(""),[h,y]=b.useState(""),[g,p]=b.useState(""),[x,k]=b.useState(""),[C,E]=b.useState(""),[P,L]=b.useState(""),[H,B]=b.useState(""),[X,D]=b.useState({}),[R,V]=b.useState([]),O=[{key:"monday",label:"Lundi"},{key:"tuesday",label:"Mardi"},{key:"wednesday",label:"Mercredi"},{key:"thursday",label:"Jeudi"},{key:"friday",label:"Vendredi"},{key:"saturday",label:"Samedi"},{key:"sunday",label:"Dimanche"}];b.useEffect(()=>{G()},[]);const G=async()=>{var N,I,v,A,U;s(!0),i(null);try{const M=(await z.get("/garages/me")).data.garage;t(M),f(M.name||""),w(M.description||""),y(((N=M.address)==null?void 0:N.street)||""),p(((I=M.address)==null?void 0:I.city)||""),k(((v=M.address)==null?void 0:v.postalCode)||""),E(M.phone||""),L(M.email||""),B(M.website||""),D(M.openingHours||{}),V(M.images||[])}catch(_){i(((U=(A=_.response)==null?void 0:A.data)==null?void 0:U.message)||"Erreur lors du chargement")}finally{s(!1)}},F=async N=>{var I,v;N.preventDefault(),a(!0),i(null),u(null);try{const A={name:m,description:j||void 0,address:{street:h,city:g,postalCode:x,country:"France"},phone:C,email:P||void 0,website:H||void 0,images:R,openingHours:X};await z.put("/garages/me",A),u("Informations mises  jour avec succs !"),G()}catch(A){i(((v=(I=A.response)==null?void 0:I.data)==null?void 0:v.message)||"Erreur lors de la mise  jour")}finally{a(!1)}},S=(N,I,v)=>{D(A=>({...A,[N]:{...A[N],[I]:v}}))};return n?o.jsx("div",{className:"min-h-screen animate-fadeIn flex items-center justify-center",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):o.jsx("div",{className:"min-h-screen animate-fadeIn",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 max-w-4xl",children:[o.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:o.jsxs("div",{children:[o.jsxs("button",{onClick:()=>e("/garage"),className:"mb-4 flex items-center gap-2 text-sm font-medium hover:underline",style:{color:"var(--color-noir-600)"},children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Retour au dashboard"]}),o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",style:{color:"var(--color-noir)"},children:"Paramtres du garage"}),o.jsx("p",{className:"text-base",style:{color:"var(--color-noir-600)"},children:"Modifiez les informations de votre garage"})]})}),c&&o.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:c}),d&&o.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:d}),o.jsxs("form",{onSubmit:F,className:"space-y-6",children:[o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-xl border p-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h2",{className:"text-xl font-bold mb-4",style:{color:"var(--color-noir)"},children:"Informations gnrales"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Nom du garage *"}),o.jsx("input",{type:"text",value:m,onChange:N=>f(N.target.value),required:!0,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:N=>{N.target.style.borderColor="var(--color-rose-500)",N.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:N=>{N.target.style.borderColor="var(--color-racine-200)",N.target.style.boxShadow="none"}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Description"}),o.jsx("textarea",{value:j,onChange:N=>w(N.target.value),rows:4,placeholder:"Description de votre garage...",className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:N=>{N.target.style.borderColor="var(--color-rose-500)",N.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:N=>{N.target.style.borderColor="var(--color-racine-200)",N.target.style.boxShadow="none"}})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Tlphone *"}),o.jsx("input",{type:"tel",value:C,onChange:N=>E(N.target.value),required:!0,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:N=>{N.target.style.borderColor="var(--color-rose-500)",N.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:N=>{N.target.style.borderColor="var(--color-racine-200)",N.target.style.boxShadow="none"}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Email"}),o.jsx("input",{type:"email",value:P,onChange:N=>L(N.target.value),className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:N=>{N.target.style.borderColor="var(--color-rose-500)",N.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:N=>{N.target.style.borderColor="var(--color-racine-200)",N.target.style.boxShadow="none"}})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Site web"}),o.jsx("input",{type:"url",value:H,onChange:N=>B(N.target.value),placeholder:"https://...",className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:N=>{N.target.style.borderColor="var(--color-rose-500)",N.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:N=>{N.target.style.borderColor="var(--color-racine-200)",N.target.style.boxShadow="none"}})]})]})]}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-xl border p-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h2",{className:"text-xl font-bold mb-4",style:{color:"var(--color-noir)"},children:"Adresse"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Rue *"}),o.jsx("input",{type:"text",value:h,onChange:N=>y(N.target.value),required:!0,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:N=>{N.target.style.borderColor="var(--color-rose-500)",N.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:N=>{N.target.style.borderColor="var(--color-racine-200)",N.target.style.boxShadow="none"}})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Ville *"}),o.jsx("input",{type:"text",value:g,onChange:N=>p(N.target.value),required:!0,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:N=>{N.target.style.borderColor="var(--color-rose-500)",N.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:N=>{N.target.style.borderColor="var(--color-racine-200)",N.target.style.boxShadow="none"}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Code postal *"}),o.jsx("input",{type:"text",value:x,onChange:N=>k(N.target.value),required:!0,className:"w-full px-4 py-2.5 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:N=>{N.target.style.borderColor="var(--color-rose-500)",N.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:N=>{N.target.style.borderColor="var(--color-racine-200)",N.target.style.boxShadow="none"}})]})]})]})]}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-xl border p-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h2",{className:"text-xl font-bold mb-4",style:{color:"var(--color-noir)"},children:"Horaires d'ouverture"}),o.jsx("div",{className:"space-y-3",children:O.map(N=>{const I=X[N.key]||{open:"",close:"",closed:!1};return o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[o.jsxs("label",{className:"w-24 text-sm font-medium flex items-center gap-2",style:{color:"var(--color-noir-700)"},children:[o.jsx("input",{type:"checkbox",checked:!I.closed,onChange:v=>S(N.key,"closed",!v.target.checked),className:"w-4 h-4 rounded",style:{accentColor:"var(--color-rose-600)"}}),N.label]}),I.closed?o.jsx("span",{className:"text-sm italic",style:{color:"var(--color-noir-400)"},children:"Ferm"}):o.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[o.jsx("input",{type:"time",value:I.open||"",onChange:v=>S(N.key,"open",v.target.value),className:"px-3 py-2 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:v=>{v.target.style.borderColor="var(--color-rose-500)",v.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:v=>{v.target.style.borderColor="var(--color-racine-200)",v.target.style.boxShadow="none"}}),o.jsx("input",{type:"time",value:I.close||"",onChange:v=>S(N.key,"close",v.target.value),className:"px-3 py-2 rounded-lg border-2 outline-none transition-all duration-300 text-sm focus:ring-2 focus:ring-offset-2",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"},onFocus:v=>{v.target.style.borderColor="var(--color-rose-500)",v.target.style.boxShadow="0 0 0 3px rgba(236, 72, 153, 0.1)"},onBlur:v=>{v.target.style.borderColor="var(--color-racine-200)",v.target.style.boxShadow="none"}})]})]},N.key)})})]}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-xl border p-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h2",{className:"text-xl font-bold mb-4",style:{color:"var(--color-noir)"},children:"Images du garage"}),o.jsx(sc,{onUploadComplete:N=>V(N),maxImages:10,folder:"garages",multiple:!0,label:"Ajouter des images du garage",initialUrls:R}),R.length>0&&o.jsxs("p",{className:"text-xs mt-2",style:{color:"var(--color-noir-600)"},children:[R.length," image(s) ajoute(s)"]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsx("button",{type:"submit",disabled:l,className:"flex-1 px-6 py-3 bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] hover:from-[var(--color-rouge-700)] hover:to-[var(--color-rose-700)] text-white font-semibold rounded-lg shadow-lg hover:shadow-2xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-[1.02] active:scale-[0.98] relative overflow-hidden",children:o.jsx("span",{className:"relative z-10",children:l?"Enregistrement...":"Enregistrer les modifications"})}),o.jsx(J,{to:"/garage",className:"px-6 py-3 border-2 font-semibold rounded-lg transition-all duration-300 text-center hover:scale-105 active:scale-95",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir-700)"},children:"Annuler"})]})]})]})})}function ub(){const e=ue();return o.jsx("div",{className:"min-h-screen animate-fadeIn",style:{background:"linear-gradient(to bottom right, var(--color-racine-50), white, var(--color-rose-50))"},children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 max-w-4xl",children:[o.jsxs("button",{onClick:()=>e("/garage"),className:"mb-6 flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95",style:{backgroundColor:"var(--color-racine-600)",color:"white"},children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Retour au dashboard"]}),o.jsx(Sf,{})]})})}function hb(){const e=ue(),[r,t]=b.useState([]),[n,s]=b.useState(!0),[l,a]=b.useState(null),[c,i]=b.useState(!1),[d,u]=b.useState(null),[m,f]=b.useState(!1),[j,w]=b.useState([]),[h,y]=b.useState([]),[g,p]=b.useState({clientId:"",appointmentId:"",items:[{description:"",quantity:1,unitPrice:0,total:0}],taxRate:20,notes:"",validUntil:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]});b.useEffect(()=>{x(),k(),C()},[]);const x=async()=>{var D,R;try{const O=((await z.get("/quotes/garage/me")).data.quotes||[]).filter(G=>G.status!=="draft");t(O)}catch(V){a(((R=(D=V.response)==null?void 0:D.data)==null?void 0:R.message)||"Erreur lors du chargement")}finally{s(!1)}},k=async()=>{try{const R=(await z.get("/appointments/garage/me")).data.appointments||[],V=Array.from(new Map(R.map(O=>[O.clientId._id,O.clientId])).values());w(V)}catch(D){console.error("Erreur chargement clients:",D)}},C=async()=>{try{const D=await z.get("/appointments/garage/me");y(D.data.appointments||[])}catch(D){console.error("Erreur chargement rendez-vous:",D)}},E=async()=>{var D,R;try{const V=await z.post("/quotes",g);i(!1),p({clientId:"",appointmentId:"",items:[{description:"",quantity:1,unitPrice:0,total:0}],taxRate:20,notes:"",validUntil:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]}),x()}catch(V){alert(((R=(D=V.response)==null?void 0:D.data)==null?void 0:R.message)||"Erreur lors de la cration")}},P=async(D,R)=>{var V,O;if(d)try{await z.post(`/quotes/${d._id}/send`,{sendViaChat:D,sendViaEmail:R}),f(!1),u(null),x(),alert("Devis envoy avec succs")}catch(G){alert(((O=(V=G.response)==null?void 0:V.data)==null?void 0:O.message)||"Erreur lors de l'envoi")}},L=D=>{switch(D){case"sent":return{bg:"var(--color-racine-100)",text:"var(--color-racine-700)",label:"Envoy"};case"accepted":return{bg:"var(--color-racine-200)",text:"var(--color-racine-800)",label:"Accept"};case"rejected":return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:"Refus"};case"expired":return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:"Expir"};default:return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:D}}},H=()=>{p({...g,items:[...g.items,{description:"",quantity:1,unitPrice:0,total:0}]})},B=D=>{p({...g,items:g.items.filter((R,V)=>V!==D)})},X=(D,R,V)=>{const O=[...g.items],G={...O[D],[R]:V};(R==="quantity"||R==="unitPrice")&&(G.total=G.quantity*G.unitPrice),O[D]=G,p({...g,items:O})};return n?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):o.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>e("/garage"),className:"p-2 rounded-lg hover:bg-gray-100 transition-all duration-300",title:"Retour au dashboard",children:o.jsx("svg",{className:"w-6 h-6",style:{color:"var(--color-noir-700)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),o.jsx("h1",{className:"text-3xl font-bold",style:{color:"var(--color-noir)"},children:"Devis"})]}),o.jsx("button",{onClick:()=>i(!0),className:"px-6 py-2 rounded-lg font-semibold shadow-md hover:shadow-xl transition-all duration-300",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:"+ Nouveau devis"})]}),l&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:l}),o.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{style:{backgroundColor:"var(--color-racine-50)"},children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"N Devis"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Client"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Montant"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Statut"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Valide jusqu'au"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(D=>{const R=L(D.status);return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",style:{color:"var(--color-noir)"},children:D.quoteNumber}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:"var(--color-noir-700)"},children:D.clientId.name}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:"var(--color-noir-700)"},children:[D.total.toFixed(2),""]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:R.bg,color:R.text},children:R.label})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:"var(--color-noir-700)"},children:new Date(D.validUntil).toLocaleDateString("fr-FR")}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex gap-2",children:[D.pdfUrl&&o.jsx("a",{href:D.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"PDF"}),D.status==="accepted"&&o.jsx("button",{onClick:async()=>{var V,O;try{const G=await z.post(`/invoices/from-quote/${D._id}`,{dueDate:new Date(Date.now()+2592e6).toISOString().split("T")[0]});alert("Facture cre avec succs !"),e("/garage/invoices")}catch(G){alert(((O=(V=G.response)==null?void 0:V.data)==null?void 0:O.message)||"Erreur lors de la cration de la facture")}},className:"text-blue-600 hover:text-blue-800 font-semibold",title:"Crer une facture depuis ce devis",children:" Facture"})]})})]},D._id)})})]})}),c&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",style:{color:"var(--color-noir)"},children:"Nouveau devis"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-noir-700)"},children:"Client"}),o.jsxs("select",{value:g.clientId,onChange:D=>p({...g,clientId:D.target.value}),className:"w-full px-4 py-2 border rounded-lg",required:!0,children:[o.jsx("option",{value:"",children:"Slectionner un client"}),j.map(D=>o.jsxs("option",{value:D._id,children:[D.name," (",D.email,")"]},D._id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-noir-700)"},children:"Rendez-vous (optionnel)"}),o.jsxs("select",{value:g.appointmentId,onChange:D=>p({...g,appointmentId:D.target.value}),className:"w-full px-4 py-2 border rounded-lg",children:[o.jsx("option",{value:"",children:"Aucun"}),h.filter(D=>D.clientId._id===g.clientId).map(D=>o.jsxs("option",{value:D._id,children:[new Date(D.date).toLocaleDateString("fr-FR")," - ",D.time]},D._id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Articles"}),g.items.map((D,R)=>o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"text",placeholder:"Description",value:D.description,onChange:V=>X(R,"description",V.target.value),className:"flex-1 px-4 py-2 border rounded-lg"}),o.jsx("input",{type:"number",placeholder:"Qt",value:D.quantity,onChange:V=>X(R,"quantity",parseFloat(V.target.value)||0),className:"w-20 px-4 py-2 border rounded-lg",min:"0"}),o.jsx("input",{type:"number",placeholder:"Prix unit.",value:D.unitPrice,onChange:V=>X(R,"unitPrice",parseFloat(V.target.value)||0),className:"w-32 px-4 py-2 border rounded-lg",min:"0",step:"0.01"}),o.jsxs("span",{className:"px-4 py-2",style:{color:"var(--color-noir-700)"},children:[(D.quantity*D.unitPrice).toFixed(2),""]}),g.items.length>1&&o.jsx("button",{onClick:()=>B(R),className:"px-3 py-2 bg-red-500 text-white rounded-lg",children:""})]},R)),o.jsx("button",{onClick:H,className:"mt-2 px-4 py-2 bg-gray-200 rounded-lg text-sm",children:"+ Ajouter un article"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-noir-700)"},children:"Taux de TVA (%)"}),o.jsx("input",{type:"number",value:g.taxRate,onChange:D=>p({...g,taxRate:parseFloat(D.target.value)||0}),className:"w-full px-4 py-2 border rounded-lg",min:"0",max:"100",step:"0.1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-noir-700)"},children:"Valide jusqu'au"}),o.jsx("input",{type:"date",value:g.validUntil,onChange:D=>p({...g,validUntil:D.target.value}),className:"w-full px-4 py-2 border rounded-lg",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-noir-700)"},children:"Notes (optionnel)"}),o.jsx("textarea",{value:g.notes,onChange:D=>p({...g,notes:D.target.value}),className:"w-full px-4 py-2 border rounded-lg",rows:3})]})]}),o.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[o.jsx("button",{onClick:()=>i(!1),className:"px-6 py-2 border rounded-lg",children:"Annuler"}),o.jsx("button",{onClick:E,className:"px-6 py-2 rounded-lg font-semibold text-white",style:{backgroundColor:"var(--color-rouge-600)"},children:"Crer"})]})]})}),m&&d&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",style:{color:"var(--color-noir)"},children:"Envoyer le devis"}),o.jsxs("p",{className:"mb-4",style:{color:"var(--color-noir-700)"},children:["Comment souhaitez-vous envoyer le devis ",d.quoteNumber," ?"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",defaultChecked:!0,id:"sendChat"}),o.jsx("span",{style:{color:"var(--color-noir-700)"},children:"Via le chat de l'application"})]}),o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",defaultChecked:!0,id:"sendEmail"}),o.jsx("span",{style:{color:"var(--color-noir-700)"},children:"Par email"})]})]}),o.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[o.jsx("button",{onClick:()=>{f(!1),u(null)},className:"px-6 py-2 border rounded-lg",children:"Annuler"}),o.jsx("button",{onClick:()=>{var V,O;const D=(V=document.getElementById("sendChat"))==null?void 0:V.checked,R=(O=document.getElementById("sendEmail"))==null?void 0:O.checked;P(D,R)},className:"px-6 py-2 rounded-lg font-semibold text-white",style:{backgroundColor:"var(--color-rouge-600)"},children:"Envoyer"})]})]})})]})}function mb(){const e=ue(),[r,t]=b.useState([]),[n,s]=b.useState([]),[l,a]=b.useState(!0),[c,i]=b.useState(null),[d,u]=b.useState(!1),[m,f]=b.useState(null),[j,w]=b.useState(!1),[h,y]=b.useState(!1),[g,p]=b.useState([]),[x,k]=b.useState([]),[C,E]=b.useState({clientId:"",appointmentId:"",quoteId:"",items:[{description:"",quantity:1,unitPrice:0}],taxRate:20,notes:"",dueDate:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]});b.useEffect(()=>{P(),L(),H(),B()},[]);const P=async()=>{var N,I;try{const A=((await z.get("/invoices/garage/me")).data.invoices||[]).filter(U=>U.status!=="draft");t(A)}catch(v){i(((I=(N=v.response)==null?void 0:N.data)==null?void 0:I.message)||"Erreur lors du chargement")}finally{a(!1)}},L=async()=>{try{const I=((await z.get("/quotes/garage/me")).data.quotes||[]).filter(v=>v.status==="accepted");s(I)}catch(N){console.error("Erreur chargement devis:",N)}},H=async()=>{try{const I=(await z.get("/appointments/garage/me")).data.appointments||[],v=Array.from(new Map(I.map(A=>[A.clientId._id,A.clientId])).values());p(v)}catch(N){console.error("Erreur chargement clients:",N)}},B=async()=>{try{const N=await z.get("/appointments/garage/me");k(N.data.appointments||[])}catch(N){console.error("Erreur chargement rendez-vous:",N)}},X=async()=>{var N,I;try{const v=await z.post("/invoices",C);u(!1),E({clientId:"",appointmentId:"",quoteId:"",items:[{description:"",quantity:1,unitPrice:0}],taxRate:20,notes:"",dueDate:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]}),P()}catch(v){alert(((I=(N=v.response)==null?void 0:N.data)==null?void 0:I.message)||"Erreur lors de la cration")}},D=async N=>{var I,v;try{const A=await z.post(`/invoices/from-quote/${N}`,{dueDate:C.dueDate});u(!1),P(),alert("Facture cre avec succs")}catch(A){alert(((v=(I=A.response)==null?void 0:I.data)==null?void 0:v.message)||"Erreur lors de la cration")}},R=async(N,I)=>{var v,A;if(m)try{await z.post(`/invoices/${m._id}/send`,{sendViaChat:N,sendViaEmail:I}),w(!1),f(null),P(),alert("Facture envoye avec succs")}catch(U){alert(((A=(v=U.response)==null?void 0:v.data)==null?void 0:A.message)||"Erreur lors de l'envoi")}},V=async(N,I)=>{var v,A;if(m)try{await z.put(`/invoices/${m._id}/mark-paid`,{paidAmount:N,paymentMethod:I}),y(!1),f(null),P(),alert("Facture marque comme paye")}catch(U){alert(((A=(v=U.response)==null?void 0:v.data)==null?void 0:A.message)||"Erreur lors de la mise  jour")}},O=N=>{switch(N){case"sent":return{bg:"var(--color-racine-100)",text:"var(--color-racine-700)",label:"Envoye"};case"paid":return{bg:"var(--color-racine-200)",text:"var(--color-racine-800)",label:"Paye"};case"overdue":return{bg:"var(--color-rouge-200)",text:"var(--color-rouge-800)",label:"En retard"};case"cancelled":return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:"Annule"};default:return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:N}}},G=()=>{E({...C,items:[...C.items,{description:"",quantity:1,unitPrice:0}]})},F=N=>{E({...C,items:C.items.filter((I,v)=>v!==N)})},S=(N,I,v)=>{const A=[...C.items],U={...A[N],[I]:v};(I==="quantity"||I==="unitPrice")&&(U.total=U.quantity*U.unitPrice),A[N]=U,E({...C,items:A})};return l?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):o.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>e("/garage"),className:"p-2 rounded-lg hover:bg-gray-100 transition-all duration-300",title:"Retour au dashboard",children:o.jsx("svg",{className:"w-6 h-6",style:{color:"var(--color-noir-700)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),o.jsx("h1",{className:"text-3xl font-bold",style:{color:"var(--color-noir)"},children:"Factures"})]}),o.jsx("button",{onClick:()=>u(!0),className:"px-6 py-2 rounded-lg font-semibold shadow-md hover:shadow-xl transition-all duration-300",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:"+ Nouvelle facture"})]}),c&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:c}),o.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{style:{backgroundColor:"var(--color-racine-50)"},children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"N Facture"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Client"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Montant"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Pay"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Statut"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"chance"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(N=>{const I=O(N.status),v=N.total-N.paidAmount;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",style:{color:"var(--color-noir)"},children:N.invoiceNumber}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:"var(--color-noir-700)"},children:N.clientId.name}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:"var(--color-noir-700)"},children:[N.total.toFixed(2),""]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:"var(--color-noir-700)"},children:N.paidAmount>0?`${N.paidAmount.toFixed(2)}`:"-"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:I.bg,color:I.text},children:I.label})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:"var(--color-noir-700)"},children:new Date(N.dueDate).toLocaleDateString("fr-FR")}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex gap-2",children:[N.pdfUrl&&o.jsx("a",{href:N.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"PDF"}),N.status==="sent"&&v>0&&o.jsx("button",{onClick:()=>{f(N),y(!0)},className:"text-green-600 hover:text-green-800",children:"Marquer paye"})]})})]},N._id)})})]})}),d&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",style:{color:"var(--color-noir)"},children:"Nouvelle facture"}),n.length>0&&o.jsxs("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:[o.jsx("p",{className:"font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Crer depuis un devis accept :"}),o.jsx("div",{className:"space-y-2",children:n.map(N=>o.jsxs("button",{onClick:()=>D(N._id),className:"block w-full text-left px-4 py-2 bg-white rounded border hover:bg-gray-50",children:[o.jsx("span",{className:"font-medium",children:N.quoteNumber})," - ",N.clientId.name," - ",N.total.toFixed(2),""]},N._id))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-noir-700)"},children:"Client"}),o.jsxs("select",{value:C.clientId,onChange:N=>E({...C,clientId:N.target.value}),className:"w-full px-4 py-2 border rounded-lg",required:!0,children:[o.jsx("option",{value:"",children:"Slectionner un client"}),g.map(N=>o.jsxs("option",{value:N._id,children:[N.name," (",N.email,")"]},N._id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-noir-700)"},children:"Rendez-vous (optionnel)"}),o.jsxs("select",{value:C.appointmentId,onChange:N=>E({...C,appointmentId:N.target.value}),className:"w-full px-4 py-2 border rounded-lg",children:[o.jsx("option",{value:"",children:"Aucun"}),x.filter(N=>N.clientId._id===C.clientId).map(N=>o.jsxs("option",{value:N._id,children:[new Date(N.date).toLocaleDateString("fr-FR")," - ",N.time]},N._id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Articles"}),C.items.map((N,I)=>o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"text",placeholder:"Description",value:N.description,onChange:v=>S(I,"description",v.target.value),className:"flex-1 px-4 py-2 border rounded-lg"}),o.jsx("input",{type:"number",placeholder:"Qt",value:N.quantity,onChange:v=>S(I,"quantity",parseFloat(v.target.value)||0),className:"w-20 px-4 py-2 border rounded-lg",min:"0"}),o.jsx("input",{type:"number",placeholder:"Prix unit.",value:N.unitPrice,onChange:v=>S(I,"unitPrice",parseFloat(v.target.value)||0),className:"w-32 px-4 py-2 border rounded-lg",min:"0",step:"0.01"}),o.jsxs("span",{className:"px-4 py-2",style:{color:"var(--color-noir-700)"},children:[(N.quantity*N.unitPrice).toFixed(2),""]}),C.items.length>1&&o.jsx("button",{onClick:()=>F(I),className:"px-3 py-2 bg-red-500 text-white rounded-lg",children:""})]},I)),o.jsx("button",{onClick:G,className:"mt-2 px-4 py-2 bg-gray-200 rounded-lg text-sm",children:"+ Ajouter un article"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-noir-700)"},children:"Taux de TVA (%)"}),o.jsx("input",{type:"number",value:C.taxRate,onChange:N=>E({...C,taxRate:parseFloat(N.target.value)||0}),className:"w-full px-4 py-2 border rounded-lg",min:"0",max:"100",step:"0.1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-noir-700)"},children:"Date d'chance"}),o.jsx("input",{type:"date",value:C.dueDate,onChange:N=>E({...C,dueDate:N.target.value}),className:"w-full px-4 py-2 border rounded-lg",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-noir-700)"},children:"Notes (optionnel)"}),o.jsx("textarea",{value:C.notes,onChange:N=>E({...C,notes:N.target.value}),className:"w-full px-4 py-2 border rounded-lg",rows:3})]})]}),o.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[o.jsx("button",{onClick:()=>u(!1),className:"px-6 py-2 border rounded-lg",children:"Annuler"}),o.jsx("button",{onClick:X,className:"px-6 py-2 rounded-lg font-semibold text-white",style:{backgroundColor:"var(--color-rouge-600)"},children:"Crer"})]})]})}),j&&m&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",style:{color:"var(--color-noir)"},children:"Envoyer la facture"}),o.jsxs("p",{className:"mb-4",style:{color:"var(--color-noir-700)"},children:["Comment souhaitez-vous envoyer la facture ",m.invoiceNumber," ?"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",defaultChecked:!0,id:"sendChat"}),o.jsx("span",{style:{color:"var(--color-noir-700)"},children:"Via le chat de l'application"})]}),o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",defaultChecked:!0,id:"sendEmail"}),o.jsx("span",{style:{color:"var(--color-noir-700)"},children:"Par email"})]})]}),o.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[o.jsx("button",{onClick:()=>{w(!1),f(null)},className:"px-6 py-2 border rounded-lg",children:"Annuler"}),o.jsx("button",{onClick:()=>{var v,A;const N=(v=document.getElementById("sendChat"))==null?void 0:v.checked,I=(A=document.getElementById("sendEmail"))==null?void 0:A.checked;R(N,I)},className:"px-6 py-2 rounded-lg font-semibold text-white",style:{backgroundColor:"var(--color-rouge-600)"},children:"Envoyer"})]})]})}),h&&m&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",style:{color:"var(--color-noir)"},children:"Marquer comme paye"}),o.jsxs("p",{className:"mb-4",style:{color:"var(--color-noir-700)"},children:["Facture ",m.invoiceNumber," - Montant total: ",m.total.toFixed(2),""]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-noir-700)"},children:"Montant pay"}),o.jsx("input",{type:"number",id:"paidAmount",defaultValue:m.total,min:"0",max:m.total,step:"0.01",className:"w-full px-4 py-2 border rounded-lg"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-noir-700)"},children:"Mode de paiement"}),o.jsxs("select",{id:"paymentMethod",className:"w-full px-4 py-2 border rounded-lg",children:[o.jsx("option",{value:"cash",children:"Espces"}),o.jsx("option",{value:"card",children:"Carte bancaire"}),o.jsx("option",{value:"bank_transfer",children:"Virement"}),o.jsx("option",{value:"online",children:"En ligne"})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[o.jsx("button",{onClick:()=>{y(!1),f(null)},className:"px-6 py-2 border rounded-lg",children:"Annuler"}),o.jsx("button",{onClick:()=>{var v,A;const N=parseFloat(((v=document.getElementById("paidAmount"))==null?void 0:v.value)||"0"),I=((A=document.getElementById("paymentMethod"))==null?void 0:A.value)||"cash";V(N,I)},className:"px-6 py-2 rounded-lg font-semibold text-white",style:{backgroundColor:"var(--color-rouge-600)"},children:"Confirmer"})]})]})})]})}function fb(){const e=ue(),r=Z(x=>x.user),[t,n]=b.useState([]),[s,l]=b.useState(!0),[a,c]=b.useState(null),[i,d]=b.useState(null),[u,m]=b.useState(!1),[f,j]=b.useState(null);b.useEffect(()=>{if(!r||r.role!=="client"){e("/app",{replace:!0});return}w()},[r,e]);const w=async()=>{var x,k;l(!0),c(null);try{const C=await z.get("/quotes/client/me");n(C.data.quotes||[])}catch(C){c(((k=(x=C.response)==null?void 0:x.data)==null?void 0:k.message)||"Erreur lors du chargement")}finally{l(!1)}},h=async x=>{var k,C;if(confirm("tes-vous sr de vouloir accepter ce devis ?")){j(x);try{if(await z.put(`/quotes/${x}/accept`),await w(),(i==null?void 0:i._id)===x){const E=t.find(P=>P._id===x);E&&d({...E,status:"accepted"})}alert("Devis accept avec succs !")}catch(E){alert(((C=(k=E.response)==null?void 0:k.data)==null?void 0:C.message)||"Erreur lors de l'acceptation")}finally{j(null)}}},y=async x=>{var k,C;if(confirm("tes-vous sr de vouloir rejeter ce devis ?")){j(x);try{if(await z.put(`/quotes/${x}/reject`),await w(),(i==null?void 0:i._id)===x){const E=t.find(P=>P._id===x);E&&d({...E,status:"rejected"})}alert("Devis rejet")}catch(E){alert(((C=(k=E.response)==null?void 0:k.data)==null?void 0:C.message)||"Erreur lors du rejet")}finally{j(null)}}},g=x=>{switch(x){case"sent":return{bg:"var(--color-racine-100)",text:"var(--color-racine-700)",label:"Envoy"};case"accepted":return{bg:"var(--color-racine-200)",text:"var(--color-racine-800)",label:"Accept"};case"rejected":return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:"Refus"};case"expired":return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:"Expir"};default:return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:x}}},p=x=>{d(x),m(!0)};return s?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[var(--color-racine-50)] to-[var(--color-racine-100)] flex items-center justify-center",children:o.jsx("div",{className:"text-[var(--color-noir-700)] text-base sm:text-lg",children:"Chargement..."})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[var(--color-racine-50)] via-white to-[var(--color-rose-50)]",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 max-w-7xl",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-[var(--color-noir)] bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] bg-clip-text text-transparent",children:"Mes devis"}),o.jsx("button",{onClick:()=>e("/app/appointments"),className:"px-4 py-2 bg-[var(--color-rouge-600)] hover:bg-[var(--color-rouge-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300 text-sm sm:text-base",children:" Retour aux rendez-vous"})]}),a&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:a}),t.length===0?o.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-8 shadow-md border border-[var(--color-racine-200)] text-center",children:o.jsx("p",{className:"text-[var(--color-noir-700)] text-lg",children:"Aucun devis pour le moment"})}):o.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-md border border-[var(--color-racine-200)] overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-[var(--color-racine-50)]",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"N Devis"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Garage"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Montant"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Statut"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Valide jusqu'au"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(x=>{const k=g(x.status),C=new Date(x.validUntil)<new Date;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",style:{color:"var(--color-noir)"},children:x.quoteNumber}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:"var(--color-noir-700)"},children:x.garageId.name}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold",style:{color:"var(--color-rouge-600)"},children:[x.total.toFixed(2),""]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:k.bg,color:k.text},children:k.label})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:C?"var(--color-rouge-600)":"var(--color-noir-700)"},children:new Date(x.validUntil).toLocaleDateString("fr-FR")}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>p(x),className:"text-[var(--color-racine-600)] hover:text-[var(--color-racine-700)] font-semibold",children:"Voir"}),x.status==="sent"&&!C&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>h(x._id),disabled:f===x._id,className:"text-[var(--color-racine-600)] hover:text-[var(--color-racine-700)] font-semibold disabled:opacity-50",children:f===x._id?"Traitement...":"Accepter"}),o.jsx("button",{onClick:()=>y(x._id),disabled:f===x._id,className:"text-[var(--color-rouge-600)] hover:text-[var(--color-rouge-700)] font-semibold disabled:opacity-50",children:f===x._id?"Traitement...":"Rejeter"})]})]})})]},x._id)})})]})})}),u&&i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("h2",{className:"text-2xl font-bold",style:{color:"var(--color-noir)"},children:["Devis ",i.quoteNumber]}),o.jsx("button",{onClick:()=>m(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:"Garage"}),o.jsx("p",{className:"font-semibold",style:{color:"var(--color-noir)"},children:i.garageId.name}),o.jsxs("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:[i.garageId.address.street,", ",i.garageId.address.city]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:"Statut"}),o.jsx("span",{className:"inline-block px-2 py-1 text-xs font-semibold rounded-full mt-1",style:{backgroundColor:g(i.status).bg,color:g(i.status).text},children:g(i.status).label})]})]}),i.appointmentId&&o.jsxs("div",{className:"mb-6 p-4 bg-[var(--color-racine-50)] rounded-lg",children:[o.jsx("p",{className:"text-sm font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:"Rendez-vous associ"}),o.jsxs("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:[new Date(i.appointmentId.date).toLocaleDateString("fr-FR"),"  ",i.appointmentId.time]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--color-noir)"},children:"Dtails"}),o.jsxs("table",{className:"min-w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b",children:[o.jsx("th",{className:"text-left py-2 px-4",style:{color:"var(--color-noir-700)"},children:"Description"}),o.jsx("th",{className:"text-right py-2 px-4",style:{color:"var(--color-noir-700)"},children:"Qt"}),o.jsx("th",{className:"text-right py-2 px-4",style:{color:"var(--color-noir-700)"},children:"Prix unit."}),o.jsx("th",{className:"text-right py-2 px-4",style:{color:"var(--color-noir-700)"},children:"Total"})]})}),o.jsx("tbody",{children:i.items.map((x,k)=>o.jsxs("tr",{className:"border-b",children:[o.jsx("td",{className:"py-2 px-4",style:{color:"var(--color-noir)"},children:x.description}),o.jsx("td",{className:"text-right py-2 px-4",style:{color:"var(--color-noir)"},children:x.quantity}),o.jsxs("td",{className:"text-right py-2 px-4",style:{color:"var(--color-noir)"},children:[x.unitPrice.toFixed(2),""]}),o.jsxs("td",{className:"text-right py-2 px-4 font-semibold",style:{color:"var(--color-noir)"},children:[x.total.toFixed(2),""]})]},k))})]})]}),o.jsxs("div",{className:"border-t pt-4",children:[o.jsxs("div",{className:"flex justify-between mb-2",children:[o.jsx("span",{style:{color:"var(--color-noir-700)"},children:"Sous-total"}),o.jsxs("span",{className:"font-semibold",style:{color:"var(--color-noir)"},children:[i.subtotal.toFixed(2),""]})]}),i.taxRate>0&&o.jsxs("div",{className:"flex justify-between mb-2",children:[o.jsxs("span",{style:{color:"var(--color-noir-700)"},children:["TVA (",i.taxRate,"%)"]}),o.jsxs("span",{className:"font-semibold",style:{color:"var(--color-noir)"},children:[i.tax.toFixed(2),""]})]}),o.jsxs("div",{className:"flex justify-between text-xl font-bold pt-2 border-t",children:[o.jsx("span",{style:{color:"var(--color-noir)"},children:"Total"}),o.jsxs("span",{style:{color:"var(--color-rouge-600)"},children:[i.total.toFixed(2),""]})]})]}),i.notes&&o.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[o.jsx("p",{className:"text-sm font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:"Notes"}),o.jsx("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:i.notes})]}),o.jsxs("div",{className:"mt-6 flex gap-3",children:[i.pdfUrl&&o.jsx("a",{href:i.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-[var(--color-racine-600)] hover:bg-[var(--color-racine-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300",children:"Tlcharger PDF"}),i.status==="sent"&&new Date(i.validUntil)>=new Date&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>{h(i._id),m(!1)},disabled:f===i._id,className:"px-4 py-2 bg-[var(--color-racine-600)] hover:bg-[var(--color-racine-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300 disabled:opacity-50",children:f===i._id?"Traitement...":"Accepter le devis"}),o.jsx("button",{onClick:()=>{y(i._id),m(!1)},disabled:f===i._id,className:"px-4 py-2 bg-[var(--color-rouge-600)] hover:bg-[var(--color-rouge-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300 disabled:opacity-50",children:f===i._id?"Traitement...":"Rejeter le devis"})]})]})]})]})})]})})}function pb(){const[e,r]=b.useState([]),[t,n]=b.useState([]),[s,l]=b.useState(!0),[a,c]=b.useState(null),[i,d]=b.useState({status:"",garageId:"",clientId:"",dateFrom:"",dateTo:""});b.useEffect(()=>{u(),m()},[]);const u=async()=>{try{const h=await z.get("/garages");n(h.data.garages||[])}catch(h){console.error("Erreur lors du chargement des garages:",h)}},m=async()=>{var h,y;l(!0),c(null);try{const g={};i.status&&(g.status=i.status),i.garageId&&(g.garageId=i.garageId),i.clientId&&(g.clientId=i.clientId),i.dateFrom&&(g.dateFrom=i.dateFrom),i.dateTo&&(g.dateTo=i.dateTo);const p=await z.get("/admin/appointments",{params:g});r(p.data.appointments||[])}catch(g){c(((y=(h=g.response)==null?void 0:h.data)==null?void 0:y.message)||"Erreur lors du chargement")}finally{l(!1)}},f=(h,y)=>{d(g=>({...g,[h]:y}))},j=()=>{m()},w=h=>{switch(h){case"pending":return{bg:"var(--color-racine-100)",text:"var(--color-racine-700)",label:"En attente"};case"confirmed":return{bg:"var(--color-rouge-100)",text:"var(--color-rouge-700)",label:"Confirm"};case"in-progress":return{bg:"var(--color-rose-100)",text:"var(--color-rose-700)",label:"En cours"};case"completed":return{bg:"var(--color-racine-200)",text:"var(--color-racine-800)",label:"Termin"};case"cancelled":return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:"Annul"};default:return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:h}}};return o.jsxs("div",{className:"animate-fadeIn",children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-6",style:{color:"var(--color-noir)"},children:"Gestion des Rendez-vous"}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border mb-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:"var(--color-noir)"},children:"Filtres"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Garage"}),o.jsxs("select",{value:i.garageId,onChange:h=>f("garageId",h.target.value),className:"w-full px-4 py-2 rounded-lg border-2 outline-none transition-all duration-300 text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},children:[o.jsx("option",{value:"",children:"Tous les garages"}),t.map(h=>{var y;return o.jsxs("option",{value:h._id,children:[h.name," - ",((y=h.address)==null?void 0:y.city)||""]},h._id)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Statut"}),o.jsxs("select",{value:i.status,onChange:h=>f("status",h.target.value),className:"w-full px-4 py-2 rounded-lg border-2 outline-none transition-all duration-300 text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},children:[o.jsx("option",{value:"",children:"Tous"}),o.jsx("option",{value:"pending",children:"En attente"}),o.jsx("option",{value:"confirmed",children:"Confirm"}),o.jsx("option",{value:"in-progress",children:"En cours"}),o.jsx("option",{value:"completed",children:"Termin"}),o.jsx("option",{value:"cancelled",children:"Annul"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Date dbut"}),o.jsx("input",{type:"date",value:i.dateFrom,onChange:h=>f("dateFrom",h.target.value),className:"w-full px-4 py-2 rounded-lg border-2 outline-none transition-all duration-300 text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Date fin"}),o.jsx("input",{type:"date",value:i.dateTo,onChange:h=>f("dateTo",h.target.value),className:"w-full px-4 py-2 rounded-lg border-2 outline-none transition-all duration-300 text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"}})]}),o.jsx("div",{className:"sm:col-span-2 lg:col-span-2 flex items-end",children:o.jsx("button",{onClick:j,className:"w-full px-6 py-2.5 bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] hover:from-[var(--color-rouge-700)] hover:to-[var(--color-rose-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",children:o.jsx("span",{className:"relative z-10",children:"Appliquer les filtres"})})})]})]}),a&&o.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a}),s?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):e.length===0?o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-12 text-center shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsx("p",{className:"text-base",style:{color:"var(--color-noir-600)"},children:"Aucun rendez-vous trouv"})}):o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-xl border overflow-hidden animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{style:{backgroundColor:"var(--color-racine-50)"},children:[o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Date & Heure"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Client"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Garage"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Service"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Statut"})]})}),o.jsx("tbody",{className:"divide-y",style:{borderColor:"var(--color-racine-200)"},children:e.map((h,y)=>{var x,k,C,E,P;const g=w(h.status),p=new Date(h.date);return o.jsxs("tr",{className:"hover:bg-opacity-50 hover:shadow-md transition-all duration-200",style:{backgroundColor:y%2===0?"transparent":"var(--color-racine-50)"},children:[o.jsxs("td",{className:"px-4 py-3 text-sm",style:{color:"var(--color-noir-700)"},children:[p.toLocaleDateString("fr-FR"),"  ",h.time]}),o.jsxs("td",{className:"px-4 py-3 text-sm",style:{color:"var(--color-noir-600)"},children:[((x=h.clientId)==null?void 0:x.name)||"-",o.jsx("br",{}),o.jsx("span",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:((k=h.clientId)==null?void 0:k.email)||"-"})]}),o.jsx("td",{className:"px-4 py-3 text-sm",style:{color:"var(--color-noir-600)"},children:((C=h.garageId)==null?void 0:C.name)||"-"}),o.jsxs("td",{className:"px-4 py-3 text-sm",style:{color:"var(--color-noir-600)"},children:[((E=h.serviceId)==null?void 0:E.name)||"-",((P=h.serviceId)==null?void 0:P.price)&&o.jsxs("span",{className:"block text-xs",style:{color:"var(--color-rouge-600)"},children:[h.serviceId.price,""]})]}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:g.bg,color:g.text},children:g.label})})]},h._id)})})]})})})]})}function vb(){const[e,r]=b.useState([]),[t,n]=b.useState([]),[s,l]=b.useState(!0),[a,c]=b.useState(null),[i,d]=b.useState({rating:"",verified:"",garageId:""});b.useEffect(()=>{u(),m()},[]);const u=async()=>{try{const h=await z.get("/garages");n(h.data.garages||[])}catch(h){console.error("Erreur lors du chargement des garages:",h)}},m=async()=>{var h,y;l(!0),c(null);try{const g={};i.rating&&(g.rating=i.rating),i.verified!==""&&(g.verified=i.verified),i.garageId&&(g.garageId=i.garageId);const p=await z.get("/admin/reviews",{params:g});r(p.data.reviews||[])}catch(g){c(((y=(h=g.response)==null?void 0:h.data)==null?void 0:y.message)||"Erreur lors du chargement")}finally{l(!1)}},f=async h=>{var y,g;if(confirm("tes-vous sr de vouloir supprimer cet avis ?"))try{await z.delete(`/admin/reviews/${h}`),m()}catch(p){alert(((g=(y=p.response)==null?void 0:y.data)==null?void 0:g.message)||"Erreur lors de la suppression")}},j=h=>o.jsx("div",{className:"flex items-center gap-0.5",children:[...Array(5)].map((y,g)=>o.jsx("svg",{className:`w-4 h-4 ${g<h?"":"opacity-30"}`,style:{color:g<h?"var(--color-rose-500)":"var(--color-noir-300)"},fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},g))}),w=()=>{m()};return o.jsxs("div",{className:"animate-fadeIn",children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-6",style:{color:"var(--color-noir)"},children:"Modration des Avis"}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border mb-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:"var(--color-noir)"},children:"Filtres"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Garage"}),o.jsxs("select",{value:i.garageId,onChange:h=>d({...i,garageId:h.target.value}),className:"w-full px-4 py-2 rounded-lg border-2 outline-none transition-all duration-300 text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},children:[o.jsx("option",{value:"",children:"Tous les garages"}),t.map(h=>{var y;return o.jsxs("option",{value:h._id,children:[h.name," - ",((y=h.address)==null?void 0:y.city)||""]},h._id)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Note"}),o.jsxs("select",{value:i.rating,onChange:h=>d({...i,rating:h.target.value}),className:"w-full px-4 py-2 rounded-lg border-2 outline-none transition-all duration-300 text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},children:[o.jsx("option",{value:"",children:"Toutes"}),o.jsx("option",{value:"5",children:"5 toiles"}),o.jsx("option",{value:"4",children:"4 toiles"}),o.jsx("option",{value:"3",children:"3 toiles"}),o.jsx("option",{value:"2",children:"2 toiles"}),o.jsx("option",{value:"1",children:"1 toile"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Vrifi"}),o.jsxs("select",{value:i.verified,onChange:h=>d({...i,verified:h.target.value}),className:"w-full px-4 py-2 rounded-lg border-2 outline-none transition-all duration-300 text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},children:[o.jsx("option",{value:"",children:"Tous"}),o.jsx("option",{value:"true",children:"Vrifis"}),o.jsx("option",{value:"false",children:"Non vrifis"})]})]}),o.jsx("div",{className:"flex items-end",children:o.jsx("button",{onClick:w,className:"w-full px-6 py-2.5 bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] hover:from-[var(--color-rouge-700)] hover:to-[var(--color-rose-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",children:o.jsx("span",{className:"relative z-10",children:"Appliquer"})})})]})]}),a&&o.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a}),s?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):e.length===0?o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-12 text-center shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsx("p",{className:"text-base",style:{color:"var(--color-noir-600)"},children:"Aucun avis trouv"})}):o.jsx("div",{className:"space-y-4",children:e.map(h=>{var g,p,x,k;const y=new Date(h.createdAt);return o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-5 sm:p-6 border shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] flex items-center justify-center text-white font-semibold text-lg flex-shrink-0",children:((p=(g=h.clientId)==null?void 0:g.name)==null?void 0:p.charAt(0).toUpperCase())||"C"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h3",{className:"font-bold text-base",style:{color:"var(--color-noir)"},children:((x=h.clientId)==null?void 0:x.name)||"Client"}),o.jsx("span",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:y.toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})}),h.isVerified&&o.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:" Vrifi"})]}),o.jsxs("p",{className:"text-sm mb-2",style:{color:"var(--color-noir-600)"},children:["Pour: ",o.jsx("span",{className:"font-semibold",children:((k=h.garageId)==null?void 0:k.name)||"Garage"})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[j(h.rating),o.jsxs("span",{className:"text-sm font-semibold",style:{color:"var(--color-noir-700)"},children:[h.rating,"/5"]})]}),h.comment&&o.jsx("p",{className:"text-sm",style:{color:"var(--color-noir-700)"},children:h.comment})]})]}),o.jsx("button",{onClick:()=>f(h._id),className:"px-4 py-2 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:o.jsx("span",{className:"relative z-10",children:" Supprimer"})})]})},h._id)})})]})}function xb(){const[e,r]=b.useState([]),[t,n]=b.useState([]),[s,l]=b.useState([]),[a,c]=b.useState(!0),[i,d]=b.useState(null),[u,m]=b.useState({category:"",garageId:"",isActive:""});b.useEffect(()=>{f(),j()},[]);const f=async()=>{try{const y=await z.get("/garages");n(y.data.garages||[])}catch(y){console.error("Erreur lors du chargement des garages:",y)}},j=async()=>{var y,g;c(!0),d(null);try{const p={};u.category&&(p.category=u.category),u.garageId&&(p.garageId=u.garageId),u.isActive!==""&&(p.isActive=u.isActive);const x=await z.get("/admin/services",{params:p});r(x.data.services||[]),l(x.data.categories||[])}catch(p){d(((g=(y=p.response)==null?void 0:y.data)==null?void 0:g.message)||"Erreur lors du chargement")}finally{c(!1)}},w=()=>{j()},h=y=>({reparation:"Rparation",entretien:"Entretien",depannage:"Dpannage","vente-pieces":"Vente de pices",carrosserie:"Carrosserie",peinture:"Peinture",revision:"Rvision",autre:"Autre"})[y]||y;return o.jsxs("div",{className:"animate-fadeIn",children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-6",style:{color:"var(--color-noir)"},children:"Gestion des Services"}),s.length>0&&o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border mb-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:"var(--color-noir)"},children:"Services par catgorie"}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-8 gap-4",children:s.map(y=>o.jsxs("div",{className:"text-center p-3 rounded-lg",style:{backgroundColor:"var(--color-racine-50)"},children:[o.jsx("p",{className:"text-xs font-medium mb-1",style:{color:"var(--color-noir-600)"},children:h(y.category)}),o.jsx("p",{className:"text-lg font-bold",style:{color:"var(--color-rouge-600)"},children:y.count})]},y.category))})]}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border mb-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:"var(--color-noir)"},children:"Filtres"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Garage"}),o.jsxs("select",{value:u.garageId,onChange:y=>m({...u,garageId:y.target.value}),className:"w-full px-4 py-2 rounded-lg border-2 outline-none transition-all duration-300 text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},children:[o.jsx("option",{value:"",children:"Tous les garages"}),t.map(y=>{var g;return o.jsxs("option",{value:y._id,children:[y.name," - ",((g=y.address)==null?void 0:g.city)||""]},y._id)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Catgorie"}),o.jsxs("select",{value:u.category,onChange:y=>m({...u,category:y.target.value}),className:"w-full px-4 py-2 rounded-lg border-2 outline-none transition-all duration-300 text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},children:[o.jsx("option",{value:"",children:"Toutes"}),o.jsx("option",{value:"reparation",children:"Rparation"}),o.jsx("option",{value:"entretien",children:"Entretien"}),o.jsx("option",{value:"depannage",children:"Dpannage"}),o.jsx("option",{value:"vente-pieces",children:"Vente de pices"}),o.jsx("option",{value:"carrosserie",children:"Carrosserie"}),o.jsx("option",{value:"peinture",children:"Peinture"}),o.jsx("option",{value:"revision",children:"Rvision"}),o.jsx("option",{value:"autre",children:"Autre"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--color-noir-700)"},children:"Statut"}),o.jsxs("select",{value:u.isActive,onChange:y=>m({...u,isActive:y.target.value}),className:"w-full px-4 py-2 rounded-lg border-2 outline-none transition-all duration-300 text-sm",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)",backgroundColor:"white"},children:[o.jsx("option",{value:"",children:"Tous"}),o.jsx("option",{value:"true",children:"Actifs"}),o.jsx("option",{value:"false",children:"Inactifs"})]})]}),o.jsx("div",{className:"flex items-end",children:o.jsx("button",{onClick:w,className:"w-full px-6 py-2.5 bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] hover:from-[var(--color-rouge-700)] hover:to-[var(--color-rose-700)] text-white font-semibold rounded-lg shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden",children:o.jsx("span",{className:"relative z-10",children:"Appliquer"})})})]})]}),i&&o.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:i}),a?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):e.length===0?o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-12 text-center shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsx("p",{className:"text-base",style:{color:"var(--color-noir-600)"},children:"Aucun service trouv"})}):o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-xl border overflow-hidden animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{style:{backgroundColor:"var(--color-racine-50)"},children:[o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Nom"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Garage"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Catgorie"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Prix"}),o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",style:{color:"var(--color-noir)"},children:"Statut"})]})}),o.jsx("tbody",{className:"divide-y",style:{borderColor:"var(--color-racine-200)"},children:e.map((y,g)=>{var p;return o.jsxs("tr",{className:"hover:bg-opacity-50 hover:shadow-md transition-all duration-200",style:{backgroundColor:g%2===0?"transparent":"var(--color-racine-50)"},children:[o.jsx("td",{className:"px-4 py-3 text-sm font-medium",style:{color:"var(--color-noir-700)"},children:y.name}),o.jsx("td",{className:"px-4 py-3 text-sm",style:{color:"var(--color-noir-600)"},children:((p=y.garageId)==null?void 0:p.name)||"-"}),o.jsx("td",{className:"px-4 py-3 text-sm",style:{color:"var(--color-noir-600)"},children:h(y.category)}),o.jsx("td",{className:"px-4 py-3 text-sm",style:{color:"var(--color-noir-600)"},children:y.price?`${y.price}`:"-"}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:y.isActive?"var(--color-rouge-100)":"var(--color-noir-200)",color:y.isActive?"var(--color-rouge-700)":"var(--color-noir-600)"},children:y.isActive?"Actif":"Inactif"})})]},y._id)})})]})})})]})}function gb(){const[e,r]=b.useState(null),[t,n]=b.useState(!0),[s,l]=b.useState(null);b.useEffect(()=>{a()},[]);const a=async()=>{var i,d;n(!0),l(null);try{const u=await z.get("/admin/analytics");r(u.data.analytics)}catch(u){l(((d=(i=u.response)==null?void 0:i.data)==null?void 0:d.message)||"Erreur lors du chargement")}finally{n(!1)}},c=(i,d,u,m)=>{const f=Math.max(...i.map(j=>j[d]),1);return o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-semibold mb-3",style:{color:"var(--color-noir)"},children:u}),o.jsx("div",{className:"flex items-end gap-1 h-32",children:i.slice(-7).map((j,w)=>{const h=j[d]/f*100;return o.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[o.jsx("div",{className:"w-full rounded-t transition-all duration-300 hover:opacity-80",style:{height:`${h}%`,backgroundColor:m,minHeight:j[d]>0?"2px":"0"},title:`${j.date}: ${j[d]}`}),o.jsx("span",{className:"text-xs mt-1 rotate-45 origin-left whitespace-nowrap",style:{color:"var(--color-noir-500)"},children:new Date(j.date).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"})})]},w)})})]})};return t?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):s?o.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:["Erreur: ",s]}):e?o.jsxs("div",{className:"animate-fadeIn",children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-6",style:{color:"var(--color-noir)"},children:"Analytics & Rapports"}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:c(e.dailyStats||[],"users","Nouveaux Utilisateurs (7 derniers jours)","var(--color-rouge-600)")}),o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:c(e.dailyStats||[],"garages","Nouveaux Garages (7 derniers jours)","var(--color-rose-600)")}),o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:c(e.dailyStats||[],"appointments","Rendez-vous (7 derniers jours)","var(--color-racine-600)")}),o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:c(e.dailyStats||[],"reviews","Avis (7 derniers jours)","var(--color-rose-600)")})]}),e.topGaragesByAppointments&&e.topGaragesByAppointments.length>0&&o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border mb-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:"var(--color-noir)"},children:"Top 10 Garages par Nombre de Rendez-vous"}),o.jsx("div",{className:"space-y-3",children:e.topGaragesByAppointments.map((i,d)=>{var u;return o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:"var(--color-racine-50)"},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:d+1}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-sm",style:{color:"var(--color-noir)"},children:i.name||"Garage"}),o.jsx("div",{className:"flex items-center gap-2 mt-1",children:i.rating&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-xs font-semibold",style:{color:"var(--color-rose-600)"},children:((u=i.rating.average)==null?void 0:u.toFixed(1))||"0.0"}),o.jsx("svg",{className:"w-3 h-3",style:{color:"var(--color-rose-500)"},fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})]})})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-lg font-bold",style:{color:"var(--color-rouge-600)"},children:i.count}),o.jsx("p",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:"rendez-vous"})]})]},i.garageId)})})]}),e.garagesByCity&&e.garagesByCity.length>0&&o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border mb-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:"var(--color-noir)"},children:"Rpartition par Ville (Top 10)"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:e.garagesByCity.map(i=>o.jsxs("div",{className:"p-4 rounded-lg text-center",style:{backgroundColor:"var(--color-racine-50)"},children:[o.jsx("p",{className:"font-semibold text-sm mb-1",style:{color:"var(--color-noir)"},children:i._id||"Non spcifi"}),o.jsx("p",{className:"text-2xl font-bold",style:{color:"var(--color-rouge-600)"},children:i.count}),o.jsx("p",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:"garages"})]},i._id))})]}),e.popularServices&&e.popularServices.length>0&&o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:"var(--color-noir)"},children:"Services les Plus Populaires (Top 10)"}),o.jsx("div",{className:"space-y-2",children:e.popularServices.map((i,d)=>{var f;const u=((f=e.popularServices[0])==null?void 0:f.count)||1,m=i.count/u*100;return o.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"var(--color-racine-50)"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-sm",style:{color:"var(--color-noir)"},children:i._id}),o.jsx("p",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:i.category||"Non catgoris"})]}),o.jsx("p",{className:"font-bold",style:{color:"var(--color-rouge-600)"},children:i.count})]}),o.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full transition-all duration-300 rounded-full",style:{width:`${m}%`,backgroundColor:"var(--color-rose-500)"}})})]},i._id)})})]})]}):null}function yb(){var P,L,H,B,X,D,R,V;const{id:e}=Gi(),r=ue(),[t,n]=b.useState(null),[s,l]=b.useState([]),[a,c]=b.useState([]),[i,d]=b.useState([]),[u,m]=b.useState(!0),[f,j]=b.useState(null),[w,h]=b.useState("info");b.useEffect(()=>{e&&y()},[e]);const y=async()=>{var O,G;m(!0),j(null);try{const[F,S,N,I]=await Promise.all([z.get(`/garages/${e}`),z.get("/admin/appointments",{params:{garageId:e}}),z.get("/admin/services",{params:{garageId:e}}),z.get("/admin/reviews",{params:{garageId:e}})]);n(F.data.garage),l(S.data.appointments||[]),c(N.data.services||[]),d(I.data.reviews||[])}catch(F){j(((G=(O=F.response)==null?void 0:O.data)==null?void 0:G.message)||"Erreur lors du chargement")}finally{m(!1)}},g=async()=>{var O,G;try{await z.put(`/admin/garages/${e}/verify`),n(F=>({...F,isVerified:!0}))}catch(F){alert(((G=(O=F.response)==null?void 0:O.data)==null?void 0:G.message)||"Erreur")}},p=async()=>{var O,G;try{await z.put(`/admin/garages/${e}/unverify`),n(F=>({...F,isVerified:!1}))}catch(F){alert(((G=(O=F.response)==null?void 0:O.data)==null?void 0:G.message)||"Erreur")}},x=async()=>{var O,G;try{await z.put(`/admin/garages/${e}/suspend`),n(F=>({...F,isActive:!1}))}catch(F){alert(((G=(O=F.response)==null?void 0:O.data)==null?void 0:G.message)||"Erreur")}},k=async()=>{var O,G;try{await z.put(`/admin/garages/${e}/activate`),n(F=>({...F,isActive:!0}))}catch(F){alert(((G=(O=F.response)==null?void 0:O.data)==null?void 0:G.message)||"Erreur")}},C=O=>{switch(O){case"pending":return{bg:"var(--color-racine-100)",text:"var(--color-racine-700)",label:"En attente"};case"confirmed":return{bg:"var(--color-rouge-100)",text:"var(--color-rouge-700)",label:"Confirm"};case"in-progress":return{bg:"var(--color-rose-100)",text:"var(--color-rose-700)",label:"En cours"};case"completed":return{bg:"var(--color-racine-200)",text:"var(--color-racine-800)",label:"Termin"};case"cancelled":return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:"Annul"};default:return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:O}}},E=O=>o.jsx("div",{className:"flex items-center gap-0.5",children:[...Array(5)].map((G,F)=>o.jsx("svg",{className:`w-4 h-4 ${F<O?"":"opacity-30"}`,style:{color:F<O?"var(--color-rose-500)":"var(--color-noir-300)"},fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},F))});return u?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):f||!t?o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:f||"Garage non trouv"}):o.jsxs("div",{className:"animate-fadeIn",children:[o.jsx("div",{className:"flex items-center gap-4 mb-6",children:o.jsxs("button",{onClick:()=>r("/admin/garages"),className:"flex items-center gap-2 text-sm font-medium hover:underline",style:{color:"var(--color-noir-600)"},children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Retour aux garages"]})}),o.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-6 shadow-xl border mb-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",style:{color:"var(--color-noir)"},children:t.name}),o.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[o.jsxs("span",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:[" ",((P=t.address)==null?void 0:P.city)||"",", ",((L=t.address)==null?void 0:L.postalCode)||""]}),t.isVerified&&o.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:" Vrifi"}),o.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:t.isActive?"var(--color-rouge-100)":"var(--color-noir-200)",color:t.isActive?"var(--color-rouge-700)":"var(--color-noir-600)"},children:t.isActive?"Actif":"Suspendu"}),t.rating&&t.rating.count>0&&o.jsxs("div",{className:"flex items-center gap-1",children:[E(Math.round(t.rating.average)),o.jsx("span",{className:"text-sm font-semibold",style:{color:"var(--color-rose-600)"},children:t.rating.average.toFixed(1)}),o.jsxs("span",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:["(",t.rating.count,")"]})]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[t.isVerified?o.jsx("button",{onClick:p,className:"px-4 py-2 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95",style:{backgroundColor:"var(--color-noir-600)",color:"white"},children:"Dvrifier"}):o.jsx("button",{onClick:g,className:"px-4 py-2 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:"Vrifier"}),t.isActive?o.jsx("button",{onClick:x,className:"px-4 py-2 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:"Suspendre"}):o.jsx("button",{onClick:k,className:"px-4 py-2 rounded-lg text-sm font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:"Activer"})]})]})}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-4 shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-rouge-200)"},children:[o.jsx("div",{className:"text-2xl font-bold mb-1",style:{color:"var(--color-rouge-600)"},children:s.length}),o.jsx("div",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:"Rendez-vous"})]}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-4 shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-rose-200)"},children:[o.jsx("div",{className:"text-2xl font-bold mb-1",style:{color:"var(--color-rose-600)"},children:a.length}),o.jsx("div",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:"Services"})]}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-4 shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("div",{className:"text-2xl font-bold mb-1",style:{color:"var(--color-racine-600)"},children:i.length}),o.jsx("div",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:"Avis"})]}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-4 shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-rose-200)"},children:[o.jsx("div",{className:"text-2xl font-bold mb-1",style:{color:"var(--color-rose-600)"},children:((B=(H=t.rating)==null?void 0:H.average)==null?void 0:B.toFixed(1))||"0.0"}),o.jsx("div",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:"Note moyenne"})]})]}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-xl border mb-6 animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("div",{className:"flex border-b overflow-x-auto",style:{borderColor:"var(--color-racine-200)"},children:[{key:"info",label:" Informations",count:null},{key:"appointments",label:" Rendez-vous",count:s.length},{key:"services",label:" Services",count:a.length},{key:"reviews",label:" Avis",count:i.length}].map(O=>o.jsxs("button",{onClick:()=>h(O.key),className:`px-6 py-3 font-semibold text-sm transition-colors whitespace-nowrap ${w===O.key?"border-b-2":""}`,style:{color:w===O.key?"var(--color-rouge-600)":"var(--color-noir-600)",borderBottomColor:w===O.key?"var(--color-rouge-600)":"transparent"},children:[O.label," ",O.count!==null&&`(${O.count})`]},O.key))}),o.jsxs("div",{className:"p-6",children:[w==="info"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:"Description"}),o.jsx("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:t.description||"Aucune description"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:"Adresse"}),o.jsxs("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:[((X=t.address)==null?void 0:X.street)||"",o.jsx("br",{}),((D=t.address)==null?void 0:D.postalCode)||""," ",((R=t.address)==null?void 0:R.city)||"",o.jsx("br",{}),((V=t.address)==null?void 0:V.country)||""]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:"Contact"}),o.jsxs("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:[" ",t.phone||"-",o.jsx("br",{})," ",t.email||"-",t.website&&o.jsxs(o.Fragment,{children:[o.jsx("br",{})," ",o.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:t.website})]})]})]})]}),t.ownerId&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",style:{color:"var(--color-noir-700)"},children:"Propritaire"}),o.jsxs("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:[t.ownerId.name||"-",o.jsx("br",{}),t.ownerId.email||"-"]})]})]}),w==="appointments"&&o.jsx("div",{className:"space-y-3",children:s.length===0?o.jsx("p",{className:"text-sm text-center",style:{color:"var(--color-noir-500)"},children:"Aucun rendez-vous"}):s.map(O=>{var S,N;const G=C(O.status),F=new Date(O.date);return o.jsxs("div",{className:"p-4 rounded-lg border",style:{borderColor:"var(--color-racine-200)",backgroundColor:"var(--color-racine-50)"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("span",{className:"font-semibold",style:{color:"var(--color-noir)"},children:[F.toLocaleDateString("fr-FR"),"  ",O.time]}),o.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold",style:{backgroundColor:G.bg,color:G.text},children:G.label})]}),o.jsxs("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:[" ",((S=O.clientId)==null?void 0:S.name)||"Client","   ",((N=O.serviceId)==null?void 0:N.name)||"Service"]})]},O._id)})}),w==="services"&&o.jsx("div",{className:"space-y-3",children:a.length===0?o.jsx("p",{className:"text-sm text-center",style:{color:"var(--color-noir-500)"},children:"Aucun service"}):a.map(O=>o.jsxs("div",{className:"p-4 rounded-lg border",style:{borderColor:"var(--color-racine-200)",backgroundColor:"var(--color-racine-50)"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"font-semibold",style:{color:"var(--color-noir)"},children:O.name}),o.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold",style:{backgroundColor:O.isActive?"var(--color-rouge-100)":"var(--color-noir-200)",color:O.isActive?"var(--color-rouge-700)":"var(--color-noir-600)"},children:O.isActive?"Actif":"Inactif"})]}),o.jsxs("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:[O.category,"  ",O.price?`${O.price}`:"Prix variable"]})]},O._id))}),w==="reviews"&&o.jsx("div",{className:"space-y-3",children:i.length===0?o.jsx("p",{className:"text-sm text-center",style:{color:"var(--color-noir-500)"},children:"Aucun avis"}):i.map(O=>{var F,S,N;const G=new Date(O.createdAt);return o.jsx("div",{className:"p-4 rounded-lg border",style:{borderColor:"var(--color-racine-200)",backgroundColor:"var(--color-racine-50)"},children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-[var(--color-rouge-600)] to-[var(--color-rose-600)] flex items-center justify-center text-white font-semibold flex-shrink-0",children:((S=(F=O.clientId)==null?void 0:F.name)==null?void 0:S.charAt(0).toUpperCase())||"C"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"font-semibold",style:{color:"var(--color-noir)"},children:((N=O.clientId)==null?void 0:N.name)||"Client"}),E(O.rating),o.jsx("span",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:G.toLocaleDateString("fr-FR")}),O.isVerified&&o.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-semibold",style:{backgroundColor:"var(--color-rose-600)",color:"white"},children:""})]}),O.comment&&o.jsx("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:O.comment})]})]})},O._id)})})]})]})]})}function bb(){const[e,r]=Qi(),[t,n]=b.useState([]),[s,l]=b.useState([]),[a,c]=b.useState(e.get("userId")),[i,d]=b.useState(!0),[u,m]=b.useState(!1),[f,j]=b.useState("");b.useEffect(()=>{w(),h();const x=e.get("userId");x&&c(x)},[]);const w=async()=>{try{const x=await z.get("/messages/conversations");n(x.data.conversations||[]),d(!1)}catch(x){console.error("Erreur chargement conversations:",x),n([]),d(!1)}},h=async()=>{try{const k=((await z.get("/users")).data.users||[]).filter(C=>C.role!=="admin");l(k)}catch(x){console.error("Erreur chargement utilisateurs:",x)}},y=()=>{c(null),r({})},g=x=>{c(x),r({userId:x}),m(!1),j("")},p=s.filter(x=>x.name.toLowerCase().includes(f.toLowerCase())||x.email.toLowerCase().includes(f.toLowerCase()));return i?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):a?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2.5 rounded-lg font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95",style:{backgroundColor:"var(--color-racine-600)",color:"white"},children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Retour aux conversations"]}),o.jsx(rl,{userId:a,onClose:y})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold",style:{color:"var(--color-noir)"},children:"Messages"}),o.jsx("button",{onClick:()=>m(!u),className:"px-4 py-2 rounded-lg font-semibold shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:"+ Nouvelle conversation"})]}),u&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 max-w-md w-full mx-4",style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-xl font-bold",style:{color:"var(--color-noir)"},children:"Nouvelle conversation"}),o.jsx("button",{onClick:()=>{m(!1),j("")},className:"text-2xl hover:opacity-70",style:{color:"var(--color-noir-600)"},children:""})]}),o.jsx("input",{type:"text",value:f,onChange:x=>j(x.target.value),placeholder:"Rechercher un utilisateur ou garagiste...",className:"w-full px-4 py-2 rounded-lg border-2 mb-4 outline-none",style:{borderColor:"var(--color-racine-200)",color:"var(--color-noir)"}}),o.jsx("div",{className:"overflow-y-auto flex-1",children:p.length===0?o.jsx("p",{className:"text-center py-4",style:{color:"var(--color-noir-600)"},children:"Aucun utilisateur trouv"}):o.jsx("div",{className:"space-y-2",children:p.map(x=>{var k,C;return o.jsxs("button",{onClick:()=>g(x._id),className:"w-full p-3 bg-white rounded-lg border hover:bg-[var(--color-racine-50)] transition-all duration-200 flex items-center gap-3",style:{borderColor:"var(--color-racine-200)"},children:[x.avatar?o.jsx("img",{src:x.avatar,alt:x.name,className:"w-10 h-10 rounded-full"}):o.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-rouge-100)",color:"var(--color-rouge-700)"},children:((C=(k=x.name)==null?void 0:k[0])==null?void 0:C.toUpperCase())||"U"}),o.jsxs("div",{className:"text-left flex-1",children:[o.jsx("p",{className:"font-semibold",style:{color:"var(--color-noir)"},children:x.name}),o.jsxs("p",{className:"text-xs",style:{color:"var(--color-noir-600)"},children:[x.email,"  ",x.role==="garagiste"?"Garagiste":"Client"]})]})]},x._id)})})})]})}),t.length===0?o.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl p-8 text-center shadow-xl border animate-fadeIn",style:{borderColor:"var(--color-racine-200)"},children:[o.jsx("p",{className:"text-base",style:{color:"var(--color-noir-600)"},children:"Aucune conversation"}),o.jsx("p",{className:"text-sm mt-2",style:{color:"var(--color-noir-500)"},children:'Cliquez sur "Nouvelle conversation" pour commencer'})]}):o.jsx("div",{className:"space-y-2",children:t.map(x=>{var k,C,E;return o.jsxs("button",{onClick:()=>{c(x.user._id),r({userId:x.user._id})},className:"w-full p-4 bg-white/90 backdrop-blur-md rounded-xl shadow-md border hover:shadow-xl transition-all duration-300 hover:-translate-y-1 flex items-center justify-between",style:{borderColor:"var(--color-racine-200)"},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[x.user.avatar?o.jsx("img",{src:x.user.avatar,alt:x.user.name,className:"w-12 h-12 rounded-full"}):o.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold",style:{backgroundColor:"var(--color-rouge-100)",color:"var(--color-rouge-700)"},children:((C=(k=x.user.name)==null?void 0:k[0])==null?void 0:C.toUpperCase())||"U"}),o.jsxs("div",{className:"text-left",children:[o.jsx("h3",{className:"font-semibold",style:{color:"var(--color-noir)"},children:x.user.name}),o.jsx("p",{className:"text-sm truncate max-w-[200px]",style:{color:"var(--color-noir-600)"},children:((E=x.lastMessage)==null?void 0:E.content)||"Aucun message"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-xs",style:{color:"var(--color-noir-500)"},children:x.lastMessage?new Date(x.lastMessage.createdAt).toLocaleDateString("fr-FR"):""}),x.unreadCount>0&&o.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 rounded-full text-xs font-semibold",style:{backgroundColor:"var(--color-rouge-600)",color:"white"},children:x.unreadCount})]})]},x._id)})})]})}function wb(){const[e,r]=b.useState([]),[t,n]=b.useState([]),[s,l]=b.useState(!0),[a,c]=b.useState(null),[i,d]=b.useState({status:"",garageId:"",dateFrom:"",dateTo:""});b.useEffect(()=>{u(),m()},[]);const u=async()=>{try{const h=await z.get("/garages");n(h.data.garages||[])}catch(h){console.error("Erreur lors du chargement des garages:",h)}},m=async()=>{var h,y;l(!0),c(null);try{const g={};i.status&&(g.status=i.status),i.garageId&&(g.garageId=i.garageId),i.dateFrom&&(g.dateFrom=i.dateFrom),i.dateTo&&(g.dateTo=i.dateTo);const x=((await z.get("/admin/invoices",{params:g})).data.invoices||[]).filter(k=>k.status!=="draft");r(x)}catch(g){c(((y=(h=g.response)==null?void 0:h.data)==null?void 0:y.message)||"Erreur lors du chargement")}finally{l(!1)}},f=(h,y)=>{d(g=>({...g,[h]:y}))},j=()=>{m()},w=h=>{switch(h){case"sent":return{bg:"var(--color-racine-100)",text:"var(--color-racine-700)",label:"Envoye"};case"paid":return{bg:"var(--color-racine-200)",text:"var(--color-racine-800)",label:"Paye"};case"overdue":return{bg:"var(--color-rouge-200)",text:"var(--color-rouge-800)",label:"En retard"};case"cancelled":return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:"Annule"};default:return{bg:"var(--color-noir-200)",text:"var(--color-noir-600)",label:h}}};return s?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"text-base",style:{color:"var(--color-noir-700)"},children:"Chargement..."})}):o.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[o.jsx("h1",{className:"text-3xl font-bold mb-6",style:{color:"var(--color-noir)"},children:"Toutes les factures"}),a&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:a}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-noir-700)"},children:"Garage"}),o.jsxs("select",{value:i.garageId,onChange:h=>f("garageId",h.target.value),className:"w-full px-4 py-2 border rounded-lg",children:[o.jsx("option",{value:"",children:"Tous les garages"}),t.map(h=>o.jsx("option",{value:h._id,children:h.name},h._id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-noir-700)"},children:"Statut"}),o.jsxs("select",{value:i.status,onChange:h=>f("status",h.target.value),className:"w-full px-4 py-2 border rounded-lg",children:[o.jsx("option",{value:"",children:"Tous les statuts"}),o.jsx("option",{value:"sent",children:"Envoye"}),o.jsx("option",{value:"paid",children:"Paye"}),o.jsx("option",{value:"overdue",children:"En retard"}),o.jsx("option",{value:"cancelled",children:"Annule"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-noir-700)"},children:"Date de dbut"}),o.jsx("input",{type:"date",value:i.dateFrom,onChange:h=>f("dateFrom",h.target.value),className:"w-full px-4 py-2 border rounded-lg"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-noir-700)"},children:"Date de fin"}),o.jsx("input",{type:"date",value:i.dateTo,onChange:h=>f("dateTo",h.target.value),className:"w-full px-4 py-2 border rounded-lg"})]})]}),o.jsx("div",{className:"mt-4",children:o.jsx("button",{onClick:j,className:"px-6 py-2 rounded-lg font-semibold text-white",style:{backgroundColor:"var(--color-rouge-600)"},children:"Appliquer les filtres"})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{style:{backgroundColor:"var(--color-racine-50)"},children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"N Facture"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Garage"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Client"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Montant"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Pay"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Statut"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-noir-700)"},children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(h=>{var p,x;const y=w(h.status),g=h.total-h.paidAmount;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",style:{color:"var(--color-noir)"},children:h.invoiceNumber}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:"var(--color-noir-700)"},children:((p=h.garageId)==null?void 0:p.name)||"N/A"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:"var(--color-noir-700)"},children:((x=h.clientId)==null?void 0:x.name)||"N/A"}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:"var(--color-noir-700)"},children:[h.total.toFixed(2),""]}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:"var(--color-noir-700)"},children:[h.paidAmount>0?`${h.paidAmount.toFixed(2)}`:"-",g>0&&o.jsxs("span",{className:"text-xs text-red-600 ml-1",children:["(Reste: ",g.toFixed(2),")"]})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:y.bg,color:y.text},children:y.label})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:"var(--color-noir-700)"},children:new Date(h.createdAt).toLocaleDateString("fr-FR")}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsx("div",{className:"flex gap-2",children:h.pdfUrl&&o.jsx("a",{href:h.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"PDF"})})})]},h._id)})})]}),e.length===0&&o.jsx("div",{className:"p-6 text-center",children:o.jsx("p",{className:"text-sm",style:{color:"var(--color-noir-600)"},children:"Aucune facture trouve"})})]})]})}function Oe({children:e}){return Z(t=>!!t.token)?e:o.jsx(nt,{to:"/login",replace:!0})}function De({children:e,roles:r}){const t=Z(n=>n.user);return t?r.includes(t.role)?e:o.jsx(nt,{to:"/login",replace:!0}):o.jsx(nt,{to:"/login",replace:!0})}function jb(){const e=Z(s=>s.token),r=Z(s=>s.user),t=Z(s=>s.setUser);b.useEffect(()=>{(async()=>{if(e&&!r)try{const l=await z.get("/auth/me");t(l.data.user)}catch{}})()},[e,r,t]);const n=s=>s==="admin"?"/admin":s==="garagiste"?"/garage":"/app";return o.jsxs(o.Fragment,{children:[o.jsx(xy,{}),o.jsxs(Jv,{children:[o.jsx(te,{path:"/",element:e&&r?o.jsx(nt,{to:n(r.role),replace:!0}):o.jsx(nt,{to:"/app",replace:!0})}),o.jsx(te,{path:"/login",element:o.jsx(dy,{})}),o.jsx(te,{path:"/register",element:o.jsx(uy,{})}),o.jsxs(te,{path:"/admin",element:o.jsx(Oe,{children:o.jsx(De,{roles:["admin"],children:o.jsx(vy,{})})}),children:[o.jsx(te,{index:!0,element:o.jsx(hy,{})}),o.jsx(te,{path:"users",element:o.jsx(my,{})}),o.jsx(te,{path:"garages",element:o.jsx(fy,{})}),o.jsx(te,{path:"garages/:id",element:o.jsx(yb,{})}),o.jsx(te,{path:"garagistes",element:o.jsx(py,{})}),o.jsx(te,{path:"appointments",element:o.jsx(pb,{})}),o.jsx(te,{path:"reviews",element:o.jsx(vb,{})}),o.jsx(te,{path:"services",element:o.jsx(xb,{})}),o.jsx(te,{path:"analytics",element:o.jsx(gb,{})}),o.jsx(te,{path:"messages",element:o.jsx(bb,{})}),o.jsx(te,{path:"invoices",element:o.jsx(wb,{})})]}),o.jsx(te,{path:"/garage",element:o.jsx(Oe,{children:o.jsx(De,{roles:["garagiste"],children:o.jsx(gy,{})})})}),o.jsx(te,{path:"/garage/appointments",element:o.jsx(Oe,{children:o.jsx(De,{roles:["garagiste"],children:o.jsx(ab,{})})})}),o.jsx(te,{path:"/garage/services",element:o.jsx(Oe,{children:o.jsx(De,{roles:["garagiste"],children:o.jsx(ib,{})})})}),o.jsx(te,{path:"/garage/reviews",element:o.jsx(Oe,{children:o.jsx(De,{roles:["garagiste"],children:o.jsx(cb,{})})})}),o.jsx(te,{path:"/garage/settings",element:o.jsx(Oe,{children:o.jsx(De,{roles:["garagiste"],children:o.jsx(db,{})})})}),o.jsx(te,{path:"/garage/messages",element:o.jsx(Oe,{children:o.jsx(De,{roles:["garagiste"],children:o.jsx(ub,{})})})}),o.jsx(te,{path:"/garage/quotes",element:o.jsx(Oe,{children:o.jsx(De,{roles:["garagiste"],children:o.jsx(hb,{})})})}),o.jsx(te,{path:"/garage/invoices",element:o.jsx(Oe,{children:o.jsx(De,{roles:["garagiste"],children:o.jsx(mb,{})})})}),o.jsx(te,{path:"/app",element:o.jsx(yy,{})}),o.jsx(te,{path:"/app/garages",element:o.jsx(wy,{})}),o.jsx(te,{path:"/app/garage/:id",element:o.jsx(g1,{})}),o.jsx(te,{path:"/app/garage/:id/book",element:o.jsx(Oe,{children:o.jsx(De,{roles:["client"],children:o.jsx(tb,{})})})}),o.jsx(te,{path:"/app/appointments",element:o.jsx(Oe,{children:o.jsx(De,{roles:["client"],children:o.jsx(ob,{})})})}),o.jsx(te,{path:"/app/profile",element:o.jsx(Oe,{children:o.jsx(De,{roles:["client"],children:o.jsx(nb,{})})})}),o.jsx(te,{path:"/app/favorites",element:o.jsx(Oe,{children:o.jsx(De,{roles:["client"],children:o.jsx(sb,{})})})}),o.jsx(te,{path:"/app/quotes",element:o.jsx(Oe,{children:o.jsx(De,{roles:["client"],children:o.jsx(fb,{})})})}),o.jsx(te,{path:"/app/messages",element:o.jsx(Oe,{children:o.jsx(De,{roles:["client","garagiste"],children:o.jsx(lb,{})})})}),o.jsx(te,{path:"*",element:o.jsx(nt,{to:"/app",replace:!0})})]})]})}Ml.createRoot(document.getElementById("root")).render(o.jsx(ne.StrictMode,{children:o.jsx(nx,{children:o.jsx(jb,{})})}));
